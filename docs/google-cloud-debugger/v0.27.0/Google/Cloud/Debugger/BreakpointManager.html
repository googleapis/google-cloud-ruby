---
layout: yard_main
title: "Class: Google::Cloud::Debugger::BreakpointManager - Stackdriver"
css: 
  - /docs/css/style.css
  - /docs/css/common.css
  - /css/yard-main.css
js: 
  - /docs/js/app.js
  - /js/yard-main.js
---
<script type="text/javascript" charset="utf-8">
  pathId = "Google::Cloud::Debugger::BreakpointManager";
  relpath = '../../../';
</script>


<div class="nav-wrap">
  <iframe id="nav" src="../../../class_list.html?1"></iframe>
  <div id="resizer"></div>
</div>

<div id="main" tabindex="-1">
  <div id="header">
    <div id="menu">
  
    <a href="../../../_index.html">Index (B)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Debugger.html" title="Google::Cloud::Debugger (module)">Debugger</a></span></span>
     &raquo; 
    <span class="title">BreakpointManager</span>
  
</div>

    <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
    <div class="clear"></div>
  </div>

  <div id="content"><h1>Class: Google::Cloud::Debugger::BreakpointManager
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Google::Cloud::Debugger::BreakpointManager</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd>MonitorMixin</dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/google/cloud/debugger/breakpoint_manager.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <h1>BreakpointManager</h1>

<p>Responsible for querying Stackdriver Debugger service for any active
breakpoints and keep an accurate local copies of the breakpoints.</p>

<p>It correctly remembers which breakpoints are currently active and
watched by the debugger agent, and which breakpoints are already
completed. The BreakpointManager holds the record of truth for debugger
breakpoints</p>


  </div>
</div>
<div class="tags">
  

</div>



  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#agent-instance_method" title="#agent (instance method)">#<strong>agent</strong>  &#x21d2; Google::Cloud::Debugger::Agent </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The debugger agent this tracer belongs to.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#app_root-instance_method" title="#app_root (instance method)">#<strong>app_root</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Application root directory, in absolute file path form.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_breakpoints_change-instance_method" title="#on_breakpoints_change (instance method)">#<strong>on_breakpoints_change</strong>  &#x21d2; Method </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Callback function invoked when new breakpoints are added or removed.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active_breakpoints-instance_method" title="#active_breakpoints (instance method)">#<strong>active_breakpoints</strong>  &#x21d2; Array&lt;Google::Cloud::Debugger::Breakpoint&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get a list of all active breakpoints.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all_complete%3F-instance_method" title="#all_complete? (instance method)">#<strong>all_complete?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Check whether any active breakpoints haven&#39;t been completed yet.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#breakpoint_hit-instance_method" title="#breakpoint_hit (instance method)">#<strong>breakpoint_hit</strong>(breakpoint, call_stack_bindings)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Evaluates a hit breakpoint, and submit the breakpoint to Transmitter if this breakpoint is evaluated successfully.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#breakpoints-instance_method" title="#breakpoints (instance method)">#<strong>breakpoints</strong>  &#x21d2; Array&lt;Google::Cloud::Debugger::Breakpoint&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get a list of all breakpoints, both active and completed.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear_breakpoints-instance_method" title="#clear_breakpoints (instance method)">#<strong>clear_breakpoints</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Clear local breakpoints cache.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#completed_breakpoints-instance_method" title="#completed_breakpoints (instance method)">#<strong>completed_breakpoints</strong>  &#x21d2; Array&lt;Google::Cloud::Debugger::Breakpoint&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get a list of all completed breakpoints.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#log_logpoint-instance_method" title="#log_logpoint (instance method)">#<strong>log_logpoint</strong>(logpoint)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Assume the given logpoint is successfully evaluated, log the evaluated log message via logger.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mark_off-instance_method" title="#mark_off (instance method)">#<strong>mark_off</strong>(breakpoint)  &#x21d2; Google::Cloud::Debugger::Breakpoint, NilClass </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Mark a given active breakpoint as completed.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sync_active_breakpoints-instance_method" title="#sync_active_breakpoints (instance method)">#<strong>sync_active_breakpoints</strong>(debuggee_id)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Sync active breakpoints with Stackdriver Debugger service for a given debuggee application.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_breakpoints-instance_method" title="#update_breakpoints (instance method)">#<strong>update_breakpoints</strong>(server_breakpoints)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Update the local breakpoints cache with a list of server active breakpoints.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="agent-instance_method">
  
    #<strong>agent</strong>  &#x21d2; <tt><span class='object_link'><a href="Agent.html" title="Google::Cloud::Debugger::Agent (class)">Google::Cloud::Debugger::Agent</a></span></tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The debugger agent this tracer belongs to</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Agent.html" title="Google::Cloud::Debugger::Agent (class)">Google::Cloud::Debugger::Agent</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


39
40
41</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/debugger/breakpoint_manager.rb', line 39</span>

<span class='kw'>def</span> <span class='id identifier rubyid_agent'>agent</span>
  <span class='ivar'>@agent</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="app_root-instance_method">
  
    #<strong>app_root</strong>  &#x21d2; <tt>String</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Application root directory, in absolute file path form.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/debugger/breakpoint_manager.rb', line 48</span>

<span class='kw'>def</span> <span class='id identifier rubyid_app_root'>app_root</span>
  <span class='ivar'>@app_root</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="on_breakpoints_change=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="on_breakpoints_change-instance_method">
  
    #<strong>on_breakpoints_change</strong>  &#x21d2; <tt>Method</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Callback function invoked when new breakpoints are added or removed</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Method</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


53
54
55</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/debugger/breakpoint_manager.rb', line 53</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_breakpoints_change'>on_breakpoints_change</span>
  <span class='ivar'>@on_breakpoints_change</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="active_breakpoints-instance_method">
  
    #<strong>active_breakpoints</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="Breakpoint.html" title="Google::Cloud::Debugger::Breakpoint (class)">Google::Cloud::Debugger::Breakpoint</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get a list of all active breakpoints.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Breakpoint.html" title="Google::Cloud::Debugger::Breakpoint (class)">Google::Cloud::Debugger::Breakpoint</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list of all
active breakpoints.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


245
246
247
248
249</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/debugger/breakpoint_manager.rb', line 245</span>

<span class='kw'>def</span> <span class='id identifier rubyid_active_breakpoints'>active_breakpoints</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@active_breakpoints</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="all_complete?-instance_method">
  
    #<strong>all_complete?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Check whether any active breakpoints haven&#39;t been completed yet.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>True if no more active breakpoints are left. False
otherwise.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


256
257
258
259
260</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/debugger/breakpoint_manager.rb', line 256</span>

<span class='kw'>def</span> <span class='id identifier rubyid_all_complete?'>all_complete?</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@active_breakpoints</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="breakpoint_hit-instance_method">
  
    #<strong>breakpoint_hit</strong>(breakpoint, call_stack_bindings)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Evaluates a hit breakpoint, and submit the breakpoint to
Transmitter if this breakpoint is evaluated successfully.</p>

<p>See Breakpoint#evaluate for evaluation details.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>breakpoint</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Breakpoint.html" title="Google::Cloud::Debugger::Breakpoint (class)">Google::Cloud::Debugger::Breakpoint</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The breakpoint
to be evaluated</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>call_stack_bindings</span>
      
      
        <span class='type'>(<tt>Array&lt;Binding&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>An array of Ruby Binding
objects, from the each frame of the call stack that leads to the
triggering of the breakpoints.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/debugger/breakpoint_manager.rb', line 152</span>

<span class='kw'>def</span> <span class='id identifier rubyid_breakpoint_hit'>breakpoint_hit</span> <span class='id identifier rubyid_breakpoint'>breakpoint</span><span class='comma'>,</span> <span class='id identifier rubyid_call_stack_bindings'>call_stack_bindings</span>
  <span class='id identifier rubyid_breakpoint'>breakpoint</span><span class='period'>.</span><span class='id identifier rubyid_evaluate'>evaluate</span> <span class='id identifier rubyid_call_stack_bindings'>call_stack_bindings</span>

  <span class='kw'>case</span> <span class='id identifier rubyid_breakpoint'>breakpoint</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span>
  <span class='kw'>when</span> <span class='symbol'>:CAPTURE</span>
    <span class='comment'># Take this completed breakpoint off manager&#39;s active breakpoints
</span>    <span class='comment'># list, submit the breakpoint snapshot, and update Tracer&#39;s
</span>    <span class='comment'># breakpoints_cache.
</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_breakpoint'>breakpoint</span><span class='period'>.</span><span class='id identifier rubyid_complete?'>complete?</span>

    <span class='comment'># Remove this breakpoint from active list
</span>    <span class='id identifier rubyid_mark_off'>mark_off</span> <span class='id identifier rubyid_breakpoint'>breakpoint</span>
    <span class='comment'># Signal transmitter to submit this breakpoint
</span>    <span class='id identifier rubyid_agent'>agent</span><span class='period'>.</span><span class='id identifier rubyid_transmitter'>transmitter</span><span class='period'>.</span><span class='id identifier rubyid_submit'>submit</span> <span class='id identifier rubyid_breakpoint'>breakpoint</span>
  <span class='kw'>when</span> <span class='symbol'>:LOG</span>
    <span class='id identifier rubyid_log_logpoint'>log_logpoint</span> <span class='id identifier rubyid_breakpoint'>breakpoint</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="breakpoints-instance_method">
  
    #<strong>breakpoints</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="Breakpoint.html" title="Google::Cloud::Debugger::Breakpoint (class)">Google::Cloud::Debugger::Breakpoint</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get a list of all breakpoints, both active and completed.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Breakpoint.html" title="Google::Cloud::Debugger::Breakpoint (class)">Google::Cloud::Debugger::Breakpoint</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list of all
breakpoints.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


223
224
225
226
227</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/debugger/breakpoint_manager.rb', line 223</span>

<span class='kw'>def</span> <span class='id identifier rubyid_breakpoints'>breakpoints</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@active_breakpoints</span> <span class='op'>|</span> <span class='ivar'>@completed_breakpoints</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="clear_breakpoints-instance_method">
  
    #<strong>clear_breakpoints</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Clear local breakpoints cache. Remove all active and completed
breakpoints</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


265
266
267
268
269
270</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/debugger/breakpoint_manager.rb', line 265</span>

<span class='kw'>def</span> <span class='id identifier rubyid_clear_breakpoints'>clear_breakpoints</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@active_breakpoints</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
    <span class='ivar'>@completed_breakpoints</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="completed_breakpoints-instance_method">
  
    #<strong>completed_breakpoints</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="Breakpoint.html" title="Google::Cloud::Debugger::Breakpoint (class)">Google::Cloud::Debugger::Breakpoint</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get a list of all completed breakpoints.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Breakpoint.html" title="Google::Cloud::Debugger::Breakpoint (class)">Google::Cloud::Debugger::Breakpoint</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list of all
completed breakpoints.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


234
235
236
237
238</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/debugger/breakpoint_manager.rb', line 234</span>

<span class='kw'>def</span> <span class='id identifier rubyid_completed_breakpoints'>completed_breakpoints</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@completed_breakpoints</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="log_logpoint-instance_method">
  
    #<strong>log_logpoint</strong>(logpoint)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Assume the given logpoint is successfully evaluated, log the
evaluated log message via logger</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>logpoint</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Breakpoint.html" title="Google::Cloud::Debugger::Breakpoint (class)">Google::Cloud::Debugger::Breakpoint</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The evaluated
logpoint.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


178
179
180
181
182
183
184
185
186
187
188
189
190
191</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/debugger/breakpoint_manager.rb', line 178</span>

<span class='kw'>def</span> <span class='id identifier rubyid_log_logpoint'>log_logpoint</span> <span class='id identifier rubyid_logpoint'>logpoint</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_agent'>agent</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_logpoint'>logpoint</span><span class='period'>.</span><span class='id identifier rubyid_evaluated_log_message'>evaluated_log_message</span>

  <span class='id identifier rubyid_message'>message</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LOGPOINT: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_logpoint'>logpoint</span><span class='period'>.</span><span class='id identifier rubyid_evaluated_log_message'>evaluated_log_message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

  <span class='kw'>case</span> <span class='id identifier rubyid_logpoint'>logpoint</span><span class='period'>.</span><span class='id identifier rubyid_log_level'>log_level</span>
  <span class='kw'>when</span> <span class='symbol'>:INFO</span>
    <span class='id identifier rubyid_agent'>agent</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='id identifier rubyid_message'>message</span>
  <span class='kw'>when</span> <span class='symbol'>:WARNING</span>
    <span class='id identifier rubyid_agent'>agent</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='id identifier rubyid_message'>message</span>
  <span class='kw'>when</span> <span class='symbol'>:ERROR</span>
    <span class='id identifier rubyid_agent'>agent</span><span class='period'>.</span><span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='id identifier rubyid_message'>message</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mark_off-instance_method">
  
    #<strong>mark_off</strong>(breakpoint)  &#x21d2; <tt><span class='object_link'><a href="Breakpoint.html" title="Google::Cloud::Debugger::Breakpoint (class)">Google::Cloud::Debugger::Breakpoint</a></span></tt>, <tt>NilClass</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Mark a given active breakpoint as completed. Meaning moving it from
list of active breakpoints to completed breakpoints.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>breakpoint</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Breakpoint.html" title="Google::Cloud::Debugger::Breakpoint (class)">Google::Cloud::Debugger::Breakpoint</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The breakpoint
to remove from local cache</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Breakpoint.html" title="Google::Cloud::Debugger::Breakpoint (class)">Google::Cloud::Debugger::Breakpoint</a></span></tt>, <tt>NilClass</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The same
breakpoint if successfully marked off as completed. Nil if
this breakpoint isn&#39;t found in the list of active breakpoints or
failed to mark off as completed.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


205
206
207
208
209
210
211
212
213
214
215
216</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/debugger/breakpoint_manager.rb', line 205</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mark_off'>mark_off</span> <span class='id identifier rubyid_breakpoint'>breakpoint</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_breakpoint'>breakpoint</span> <span class='op'>=</span> <span class='ivar'>@active_breakpoints</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='id identifier rubyid_breakpoint'>breakpoint</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_breakpoint'>breakpoint</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='kw'>nil</span>
    <span class='kw'>else</span>
      <span class='ivar'>@completed_breakpoints</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_breakpoint'>breakpoint</span>
      <span class='id identifier rubyid_breakpoint'>breakpoint</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sync_active_breakpoints-instance_method">
  
    #<strong>sync_active_breakpoints</strong>(debuggee_id)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Sync active breakpoints with Stackdriver Debugger service for a given
debuggee application. Each request to the debugger service returns
the full list of all active breakpoints. This method makes sure the
local cache of active breakpoints is consistent with server
breakpoints set.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>debuggee_id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Debuggee application ID</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>True if synced successfully; otherwise false.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/debugger/breakpoint_manager.rb', line 85</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sync_active_breakpoints'>sync_active_breakpoints</span> <span class='id identifier rubyid_debuggee_id'>debuggee_id</span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_list_active_breakpoints'>list_active_breakpoints</span> <span class='id identifier rubyid_debuggee_id'>debuggee_id</span><span class='comma'>,</span> <span class='ivar'>@wait_token</span>
  <span class='kw'>rescue</span>
    <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_wait_expired'>wait_expired</span>

  <span class='ivar'>@wait_token</span> <span class='op'>=</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_next_wait_token'>next_wait_token</span>

  <span class='id identifier rubyid_server_breakpoints'>server_breakpoints</span> <span class='op'>=</span>
    <span class='id identifier rubyid_convert_grpc_breakpoints'>convert_grpc_breakpoints</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_breakpoints'>breakpoints</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_update_breakpoints'>update_breakpoints</span> <span class='id identifier rubyid_server_breakpoints'>server_breakpoints</span>

  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_breakpoints-instance_method">
  
    #<strong>update_breakpoints</strong>(server_breakpoints)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Update the local breakpoints cache with a list of server active
breakpoints. New breakpoints will be added to local cache, and deleted
breakpoints will be removed from local cache.</p>

<p>It also correctly identifies evaluated active breakpoints from the
server set of breakpoints, and does not re-add such evaluated
breakpoints to the active list again.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>server_breakpoints</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Breakpoint.html" title="Google::Cloud::Debugger::Breakpoint (class)">Google::Cloud::Debugger::Breakpoint</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>List of active breakpoints from Stackdriver Debugger service</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/debugger/breakpoint_manager.rb', line 116</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_breakpoints'>update_breakpoints</span> <span class='id identifier rubyid_server_breakpoints'>server_breakpoints</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_new_breakpoints'>new_breakpoints</span> <span class='op'>=</span>
      <span class='id identifier rubyid_filter_breakpoints'>filter_breakpoints</span> <span class='id identifier rubyid_server_breakpoints'>server_breakpoints</span> <span class='op'>-</span> <span class='id identifier rubyid_breakpoints'>breakpoints</span>

    <span class='id identifier rubyid_before_breakpoints_count'>before_breakpoints_count</span> <span class='op'>=</span> <span class='id identifier rubyid_breakpoints'>breakpoints</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>

    <span class='comment'># Remember new active breakpoints from server
</span>    <span class='ivar'>@active_breakpoints</span> <span class='op'>+=</span> <span class='id identifier rubyid_new_breakpoints'>new_breakpoints</span> <span class='kw'>unless</span> <span class='id identifier rubyid_new_breakpoints'>new_breakpoints</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

    <span class='comment'># Forget old breakpoints
</span>    <span class='ivar'>@completed_breakpoints</span> <span class='op'>&amp;=</span> <span class='id identifier rubyid_server_breakpoints'>server_breakpoints</span>
    <span class='ivar'>@active_breakpoints</span> <span class='op'>&amp;=</span> <span class='id identifier rubyid_server_breakpoints'>server_breakpoints</span>
    <span class='id identifier rubyid_after_breakpoints_acount'>after_breakpoints_acount</span> <span class='op'>=</span> <span class='id identifier rubyid_breakpoints'>breakpoints</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>

    <span class='id identifier rubyid_breakpoints_updated'>breakpoints_updated</span> <span class='op'>=</span>
      <span class='op'>!</span><span class='id identifier rubyid_new_breakpoints'>new_breakpoints</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>||</span>
      <span class='lparen'>(</span><span class='id identifier rubyid_before_breakpoints_count'>before_breakpoints_count</span> <span class='op'>!=</span> <span class='id identifier rubyid_after_breakpoints_acount'>after_breakpoints_acount</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_on_breakpoints_change'>on_breakpoints_change</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='ivar'>@active_breakpoints</span><span class='rparen'>)</span> <span class='kw'>if</span>
      <span class='id identifier rubyid_on_breakpoints_change'>on_breakpoints_change</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:call</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_breakpoints_updated'>breakpoints_updated</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

  <div id="footer">
  <ul class="footer-links">
    <li>
      <a href="https://github.com/GoogleCloudPlatform/google-cloud-ruby" title="Google Cloud on Github">
        <img src="/google-cloud-ruby/img/icon-link-github.svg" alt="GitHub icon"> GitHub
      </a>
    </li>
    <li>
      <a href="https://github.com/GoogleCloudPlatform/google-cloud-ruby/issues" title="Google Cloud issues on Github">
        <img src="/google-cloud-ruby/img/icon-link-github.svg" alt="GitHub icon"> Issues
      </a>
    </li>
    <li>
      <a href="http://stackoverflow.com/questions/tagged/google-cloud-ruby" title="Google Cloud on StackOverflow">
      <img src="/google-cloud-ruby/img/icon-link-stackoverflow.svg" alt="StackOverflow icon"> StackOverflow
    </a>
    </li>
    <li>
      <a href="http://rubygems.org/gems/google-cloud" title="Google Cloud on RubyGems">
        <img src="/google-cloud-ruby/img/icon-link-package-manager.svg" alt="RubyGems icon"> RubyGems
      </a>
    </li>
  </ul>

  <p>
    Documentation generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool">yard</a>.
  </p>
</div>

</div>
