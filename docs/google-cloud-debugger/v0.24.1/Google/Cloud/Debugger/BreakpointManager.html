---
layout: yard_main
title: "Class: Google::Cloud::Debugger::BreakpointManager - Stackdriver"
css: 
  - /docs/css/style.css
  - /docs/css/common.css
  - /css/yard-main.css
js: 
  - /docs/js/app.js
  - /js/yard-main.js
---
<script type="text/javascript" charset="utf-8">
  pathId = "Google::Cloud::Debugger::BreakpointManager";
  relpath = '../../../';
</script>


<div class="nav_wrap">
  <iframe id="nav" src="../../../class_list.html?1"></iframe>
  <div id="resizer"></div>
</div>

<div id="main" tabindex="-1">
  <div id="header">
    <div id="menu">
  
    <a href="../../../_index.html">Index (B)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Debugger.html" title="Google::Cloud::Debugger (module)">Debugger</a></span></span>
     &raquo; 
    <span class="title">BreakpointManager</span>
  
</div>

    <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
    <div class="clear"></div>
  </div>

  <div id="content"><h1>Class: Google::Cloud::Debugger::BreakpointManager
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Google::Cloud::Debugger::BreakpointManager</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd>MonitorMixin</dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/google/cloud/debugger/breakpoint_manager.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <h1>BreakpointManager</h1>

<p>Responsible for querying Stackdriver Debugger service for any active
breakpoints and keep an accurate local copies of the breakpoints.</p>

<p>It correctly remembers which breakpoints are currently active and
watched by the debugger agent, and which breakpoints are already
completed. The BreakpointManager holds the record of truth for debugger
breakpoints</p>


  </div>
</div>
<div class="tags">
  

</div>



  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#app_root-instance_method" title="#app_root (instance method)">#<strong>app_root</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Application root directory, in absolute file path form.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_breakpoints_change-instance_method" title="#on_breakpoints_change (instance method)">#<strong>on_breakpoints_change</strong>  &#x21d2; Method </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Callback function invoked when new breakpoints are added or removed.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active_breakpoints-instance_method" title="#active_breakpoints (instance method)">#<strong>active_breakpoints</strong>  &#x21d2; Array&lt;Google::Cloud::Debugger::Breakpoint&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get a list of all active breakpoints.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all_complete%3F-instance_method" title="#all_complete? (instance method)">#<strong>all_complete?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Check whether any active breakpoints haven&#39;t been completed yet.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#breakpoints-instance_method" title="#breakpoints (instance method)">#<strong>breakpoints</strong>  &#x21d2; Array&lt;Google::Cloud::Debugger::Breakpoint&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get a list of all breakpoints, both active and completed.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear_breakpoints-instance_method" title="#clear_breakpoints (instance method)">#<strong>clear_breakpoints</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Clear local breakpoints cache.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#completed_breakpoints-instance_method" title="#completed_breakpoints (instance method)">#<strong>completed_breakpoints</strong>  &#x21d2; Array&lt;Google::Cloud::Debugger::Breakpoint&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get a list of all completed breakpoints.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mark_off-instance_method" title="#mark_off (instance method)">#<strong>mark_off</strong>(breakpoint)  &#x21d2; Google::Cloud::Debugger::Breakpoint, NilClass </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Mark a given active breakpoint as completed.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sync_active_breakpoints-instance_method" title="#sync_active_breakpoints (instance method)">#<strong>sync_active_breakpoints</strong>(debuggee_id)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Sync active breakpoints with Stackdriver Debugger service for a given debuggee application.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_breakpoints-instance_method" title="#update_breakpoints (instance method)">#<strong>update_breakpoints</strong>(server_breakpoints)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Update the local breakpoints cache with a list of server active breakpoints.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="app_root-instance_method">
  
    #<strong>app_root</strong>  &#x21d2; <tt>String</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Application root directory, in absolute file path form.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


42
43
44</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/debugger/breakpoint_manager.rb', line 42</span>

<span class='kw'>def</span> <span class='id identifier rubyid_app_root'>app_root</span>
  <span class='ivar'>@app_root</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="on_breakpoints_change=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="on_breakpoints_change-instance_method">
  
    #<strong>on_breakpoints_change</strong>  &#x21d2; <tt>Method</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Callback function invoked when new breakpoints are added or removed</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Method</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


47
48
49</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/debugger/breakpoint_manager.rb', line 47</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_breakpoints_change'>on_breakpoints_change</span>
  <span class='ivar'>@on_breakpoints_change</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="active_breakpoints-instance_method">
  
    #<strong>active_breakpoints</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="Breakpoint.html" title="Google::Cloud::Debugger::Breakpoint (class)">Google::Cloud::Debugger::Breakpoint</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get a list of all active breakpoints.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Breakpoint.html" title="Google::Cloud::Debugger::Breakpoint (class)">Google::Cloud::Debugger::Breakpoint</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list of all
active breakpoints.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


188
189
190
191
192</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/debugger/breakpoint_manager.rb', line 188</span>

<span class='kw'>def</span> <span class='id identifier rubyid_active_breakpoints'>active_breakpoints</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@active_breakpoints</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="all_complete?-instance_method">
  
    #<strong>all_complete?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Check whether any active breakpoints haven&#39;t been completed yet.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>True if no more active breakpoints are left. False
otherwise.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


199
200
201
202
203</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/debugger/breakpoint_manager.rb', line 199</span>

<span class='kw'>def</span> <span class='id identifier rubyid_all_complete?'>all_complete?</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@active_breakpoints</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="breakpoints-instance_method">
  
    #<strong>breakpoints</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="Breakpoint.html" title="Google::Cloud::Debugger::Breakpoint (class)">Google::Cloud::Debugger::Breakpoint</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get a list of all breakpoints, both active and completed.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Breakpoint.html" title="Google::Cloud::Debugger::Breakpoint (class)">Google::Cloud::Debugger::Breakpoint</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list of all
breakpoints.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


166
167
168
169
170</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/debugger/breakpoint_manager.rb', line 166</span>

<span class='kw'>def</span> <span class='id identifier rubyid_breakpoints'>breakpoints</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@active_breakpoints</span> <span class='op'>|</span> <span class='ivar'>@completed_breakpoints</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="clear_breakpoints-instance_method">
  
    #<strong>clear_breakpoints</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Clear local breakpoints cache. Remove all active and completed
breakpoints</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


208
209
210
211
212
213</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/debugger/breakpoint_manager.rb', line 208</span>

<span class='kw'>def</span> <span class='id identifier rubyid_clear_breakpoints'>clear_breakpoints</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@active_breakpoints</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
    <span class='ivar'>@completed_breakpoints</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="completed_breakpoints-instance_method">
  
    #<strong>completed_breakpoints</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="Breakpoint.html" title="Google::Cloud::Debugger::Breakpoint (class)">Google::Cloud::Debugger::Breakpoint</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get a list of all completed breakpoints.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Breakpoint.html" title="Google::Cloud::Debugger::Breakpoint (class)">Google::Cloud::Debugger::Breakpoint</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A list of all
completed breakpoints.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


177
178
179
180
181</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/debugger/breakpoint_manager.rb', line 177</span>

<span class='kw'>def</span> <span class='id identifier rubyid_completed_breakpoints'>completed_breakpoints</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@completed_breakpoints</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mark_off-instance_method">
  
    #<strong>mark_off</strong>(breakpoint)  &#x21d2; <tt><span class='object_link'><a href="Breakpoint.html" title="Google::Cloud::Debugger::Breakpoint (class)">Google::Cloud::Debugger::Breakpoint</a></span></tt>, <tt>NilClass</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Mark a given active breakpoint as completed. Meaning moving it from
list of active breakpoints to completed breakpoints.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>breakpoint</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Breakpoint.html" title="Google::Cloud::Debugger::Breakpoint (class)">Google::Cloud::Debugger::Breakpoint</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The breakpoint
to remove from local cache</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Breakpoint.html" title="Google::Cloud::Debugger::Breakpoint (class)">Google::Cloud::Debugger::Breakpoint</a></span></tt>, <tt>NilClass</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The same
breakpoint if successfully marked off as completed. Nil if
this breakpoint isn&#39;t found in the list of active breakpoints or
failed to mark off as completed.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


148
149
150
151
152
153
154
155
156
157
158
159</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/debugger/breakpoint_manager.rb', line 148</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mark_off'>mark_off</span> <span class='id identifier rubyid_breakpoint'>breakpoint</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_breakpoint'>breakpoint</span> <span class='op'>=</span> <span class='ivar'>@active_breakpoints</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='id identifier rubyid_breakpoint'>breakpoint</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_breakpoint'>breakpoint</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='kw'>nil</span>
    <span class='kw'>else</span>
      <span class='ivar'>@completed_breakpoints</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_breakpoint'>breakpoint</span>
      <span class='id identifier rubyid_breakpoint'>breakpoint</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sync_active_breakpoints-instance_method">
  
    #<strong>sync_active_breakpoints</strong>(debuggee_id)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Sync active breakpoints with Stackdriver Debugger service for a given
debuggee application. Each request to the debugger service returns
the full list of all active breakpoints. This method makes sure the
local cache of active breakpoints is consistent with server
breakpoints set.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>debuggee_id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Debuggee application ID</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>True if synced successfully; otherwise false.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/debugger/breakpoint_manager.rb', line 78</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sync_active_breakpoints'>sync_active_breakpoints</span> <span class='id identifier rubyid_debuggee_id'>debuggee_id</span>
  <span class='kw'>begin</span>
    <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_list_active_breakpoints'>list_active_breakpoints</span> <span class='id identifier rubyid_debuggee_id'>debuggee_id</span><span class='comma'>,</span> <span class='ivar'>@wait_token</span>
  <span class='kw'>rescue</span>
    <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_wait_expired'>wait_expired</span>

  <span class='ivar'>@wait_token</span> <span class='op'>=</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_next_wait_token'>next_wait_token</span>

  <span class='id identifier rubyid_server_breakpoints'>server_breakpoints</span> <span class='op'>=</span> <span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_breakpoints'>breakpoints</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_server_breakpoints'>server_breakpoints</span> <span class='op'>=</span> <span class='id identifier rubyid_server_breakpoints'>server_breakpoints</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_grpc_b'>grpc_b</span><span class='op'>|</span>
    <span class='const'><span class='object_link'><a href="Breakpoint.html" title="Google::Cloud::Debugger::Breakpoint (class)">Breakpoint</a></span></span><span class='period'>.</span><span class='id identifier rubyid_from_grpc'>from_grpc</span> <span class='id identifier rubyid_grpc_b'>grpc_b</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_update_breakpoints'>update_breakpoints</span> <span class='id identifier rubyid_server_breakpoints'>server_breakpoints</span>

  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_breakpoints-instance_method">
  
    #<strong>update_breakpoints</strong>(server_breakpoints)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Update the local breakpoints cache with a list of server active
breakpoints. New breakpoints will be added to local cache, and deleted
breakpoints will be removed from local cache.</p>

<p>It also correctly identifies evaluated active breakpoints from the
server set of breakpoints, and does not re-add such evaluated
breakpoints to the active list again.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>server_breakpoints</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Breakpoint.html" title="Google::Cloud::Debugger::Breakpoint (class)">Google::Cloud::Debugger::Breakpoint</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>List of active breakpoints from Stackdriver Debugger service</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/debugger/breakpoint_manager.rb', line 111</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_breakpoints'>update_breakpoints</span> <span class='id identifier rubyid_server_breakpoints'>server_breakpoints</span>
  <span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_new_breakpoints'>new_breakpoints</span> <span class='op'>=</span>
      <span class='id identifier rubyid_server_breakpoints'>server_breakpoints</span> <span class='op'>-</span> <span class='ivar'>@active_breakpoints</span> <span class='op'>-</span> <span class='ivar'>@completed_breakpoints</span>
    <span class='id identifier rubyid_before_breakpoints_count'>before_breakpoints_count</span> <span class='op'>=</span>
      <span class='ivar'>@active_breakpoints</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>+</span> <span class='ivar'>@completed_breakpoints</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>

    <span class='comment'># Remember new active breakpoints from server
</span>    <span class='ivar'>@active_breakpoints</span> <span class='op'>+=</span> <span class='id identifier rubyid_new_breakpoints'>new_breakpoints</span> <span class='kw'>unless</span> <span class='id identifier rubyid_new_breakpoints'>new_breakpoints</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>

    <span class='comment'># Forget old breakpoints
</span>    <span class='ivar'>@completed_breakpoints</span> <span class='op'>&amp;=</span> <span class='id identifier rubyid_server_breakpoints'>server_breakpoints</span>
    <span class='ivar'>@active_breakpoints</span> <span class='op'>&amp;=</span> <span class='id identifier rubyid_server_breakpoints'>server_breakpoints</span>
    <span class='id identifier rubyid_after_breakpoints_acount'>after_breakpoints_acount</span> <span class='op'>=</span>
      <span class='ivar'>@active_breakpoints</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>+</span> <span class='ivar'>@completed_breakpoints</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>

    <span class='id identifier rubyid_breakpoints_updated'>breakpoints_updated</span> <span class='op'>=</span>
      <span class='op'>!</span><span class='id identifier rubyid_new_breakpoints'>new_breakpoints</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>||</span>
      <span class='lparen'>(</span><span class='id identifier rubyid_before_breakpoints_count'>before_breakpoints_count</span> <span class='op'>!=</span> <span class='id identifier rubyid_after_breakpoints_acount'>after_breakpoints_acount</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_on_breakpoints_change'>on_breakpoints_change</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='ivar'>@active_breakpoints</span><span class='rparen'>)</span> <span class='kw'>if</span>
      <span class='id identifier rubyid_on_breakpoints_change'>on_breakpoints_change</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:call</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_breakpoints_updated'>breakpoints_updated</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

  <div id="footer">
  <ul class="footer-links">
    <li>
      <a href="https://github.com/GoogleCloudPlatform/google-cloud-ruby" title="Google Cloud on Github">
        <img src="/google-cloud-ruby/img/icon-link-github.svg" alt="GitHub icon"> GitHub
      </a>
    </li>
    <li>
      <a href="https://github.com/GoogleCloudPlatform/google-cloud-ruby/issues" title="Google Cloud issues on Github">
        <img src="/google-cloud-ruby/img/icon-link-github.svg" alt="GitHub icon"> Issues
      </a>
    </li>
    <li>
      <a href="http://stackoverflow.com/questions/tagged/google-cloud-ruby" title="Google Cloud on StackOverflow">
      <img src="/google-cloud-ruby/img/icon-link-stackoverflow.svg" alt="StackOverflow icon"> StackOverflow
    </a>
    </li>
    <li>
      <a href="http://rubygems.org/gems/google-cloud" title="Google Cloud on RubyGems">
        <img src="/google-cloud-ruby/img/icon-link-package-manager.svg" alt="RubyGems icon"> RubyGems
      </a>
    </li>
  </ul>

  <p>
    Documentation generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool">yard</a>.
  </p>
</div>

</div>
