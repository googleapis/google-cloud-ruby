---
layout: yard_main
title: "Class: Google::Cloud::Storage::Bucket - Google"
css: 
  - /docs/css/style.css
  - /docs/css/common.css
  - /css/yard-main.css
js: 
  - /docs/js/app.js
  - /js/yard-main.js
---
<script type="text/javascript" charset="utf-8">
  pathId = "Google::Cloud::Storage::Bucket";
  relpath = '../../../';
</script>


<div class="nav-wrap">
  <iframe id="nav" src="../../../class_list.html?1"></iframe>
  <div id="resizer"></div>
</div>

<div id="main" tabindex="-1">
  <div id="header">
    <div id="menu">
  
    <a href="../../../_index.html">Index (B)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span>
     &raquo; 
    <span class="title">Bucket</span>
  
</div>

    <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
    <div class="clear"></div>
  </div>

  <div id="content"><h1>Class: Google::Cloud::Storage::Bucket
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Google::Cloud::Storage::Bucket</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/google/cloud/storage/bucket.rb<span class="defines">,<br />
  lib/google/cloud/storage/bucket/acl.rb,<br /> lib/google/cloud/storage/bucket/cors.rb,<br /> lib/google/cloud/storage/bucket/list.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <h1>Bucket</h1>

<p>Represents a Storage bucket. Belongs to a Project and has many Files.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
  </div>


</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="Bucket/Updater.html" title="Google::Cloud::Storage::Bucket::Updater (class)">Updater</a></span></p>
</div>
<h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Bucket/Acl.html" title="Google::Cloud::Storage::Bucket::Acl (class)">Acl</a></span>, <span class='object_link'><a href="Bucket/Cors.html" title="Google::Cloud::Storage::Bucket::Cors (class)">Cors</a></span>, <span class='object_link'><a href="Bucket/DefaultAcl.html" title="Google::Cloud::Storage::Bucket::DefaultAcl (class)">DefaultAcl</a></span>, <span class='object_link'><a href="Bucket/List.html" title="Google::Cloud::Storage::Bucket::List (class)">List</a></span>, <span class='object_link'><a href="Bucket/Updater.html" title="Google::Cloud::Storage::Bucket::Updater (class)">Updater</a></span>
    
  
</p>




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_project-instance_method" title="#user_project (instance method)">#<strong>user_project</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A boolean value or a project ID string to indicate the project to be billed for operations on the bucket and its files.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#acl-instance_method" title="#acl (instance method)">#<strong>acl</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The Bucket::Acl instance used to control access to the bucket.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#api_url-instance_method" title="#api_url (instance method)">#<strong>api_url</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A URL that can be used to access the bucket using the REST API.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#compose-instance_method" title="#compose (instance method)">#<strong>compose</strong>(sources, destination, acl: nil, encryption_key: nil) {|file| ... } &#x21d2; Google::Cloud::Storage::File </a>
    

    
      (also: #compose_file, #combine)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Concatenates a list of existing files in the bucket into a new file in the bucket.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cors-instance_method" title="#cors (instance method)">#<strong>cors</strong> {|cors| ... } &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the current CORS configuration for a static website served from the bucket.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_file-instance_method" title="#create_file (instance method)">#<strong>create_file</strong>(file, path = nil, acl: nil, cache_control: nil, content_disposition: nil, content_encoding: nil, content_language: nil, content_type: nil, crc32c: nil, md5: nil, metadata: nil, storage_class: nil, encryption_key: nil, kms_key: nil)  &#x21d2; Google::Cloud::Storage::File </a>
    

    
      (also: #upload_file, #new_file)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new <span class='object_link'><a href="File.html" title="Google::Cloud::Storage::File (class)">File</a></span> object by providing a path to a local file (or any File-like object such as StringIO) to upload, along with the path at which to store it in the bucket.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_notification-instance_method" title="#create_notification (instance method)">#<strong>create_notification</strong>(topic, custom_attrs: nil, event_types: nil, prefix: nil, payload: nil)  &#x21d2; Google::Cloud::Storage::Notification </a>
    

    
      (also: #new_notification)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new Pub/Sub notification subscription for the bucket.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#created_at-instance_method" title="#created_at (instance method)">#<strong>created_at</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creation time of the bucket.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_acl-instance_method" title="#default_acl (instance method)">#<strong>default_acl</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The Bucket::DefaultAcl instance used to control access to the bucket&#39;s files.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_kms_key-instance_method" title="#default_kms_key (instance method)">#<strong>default_kms_key</strong>  &#x21d2; String<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The Cloud KMS encryption key that will be used to protect files.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_kms_key=-instance_method" title="#default_kms_key= (instance method)">#<strong>default_kms_key=</strong>(new_default_kms_key)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Set the Cloud KMS encryption key that will be used to protect files.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete-instance_method" title="#delete (instance method)">#<strong>delete</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Permanently deletes the bucket.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#exists%3F-instance_method" title="#exists? (instance method)">#<strong>exists?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Determines whether the bucket exists in the Storage service.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#file-instance_method" title="#file (instance method)">#<strong>file</strong>(path, generation: nil, skip_lookup: nil, encryption_key: nil)  &#x21d2; Google::Cloud::Storage::File<sup>?</sup> </a>
    

    
      (also: #find_file)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Retrieves a file matching the path.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#files-instance_method" title="#files (instance method)">#<strong>files</strong>(prefix: nil, delimiter: nil, token: nil, max: nil, versions: nil)  &#x21d2; Array&lt;Google::Cloud::Storage::File&gt; </a>
    

    
      (also: #find_files)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Retrieves a list of files matching the criteria.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#id-instance_method" title="#id (instance method)">#<strong>id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The ID of the bucket.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#kind-instance_method" title="#kind (instance method)">#<strong>kind</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The kind of item this is.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#labels-instance_method" title="#labels (instance method)">#<strong>labels</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A hash of user-provided labels.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#labels=-instance_method" title="#labels= (instance method)">#<strong>labels=</strong>(labels)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Updates the hash of user-provided labels.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#location-instance_method" title="#location (instance method)">#<strong>location</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The location of the bucket.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#logging_bucket-instance_method" title="#logging_bucket (instance method)">#<strong>logging_bucket</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The destination bucket name for the bucket&#39;s logs.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#logging_bucket=-instance_method" title="#logging_bucket= (instance method)">#<strong>logging_bucket=</strong>(logging_bucket)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Updates the destination bucket for the bucket&#39;s logs.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#logging_prefix-instance_method" title="#logging_prefix (instance method)">#<strong>logging_prefix</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The logging object prefix for the bucket&#39;s logs.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#logging_prefix=-instance_method" title="#logging_prefix= (instance method)">#<strong>logging_prefix=</strong>(logging_prefix)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Updates the logging object prefix.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#name-instance_method" title="#name (instance method)">#<strong>name</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The name of the bucket.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#notification-instance_method" title="#notification (instance method)">#<strong>notification</strong>(id)  &#x21d2; Google::Cloud::Storage::Notification<sup>?</sup> </a>
    

    
      (also: #find_notification)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Retrieves a Pub/Sub notification subscription for the bucket.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#notifications-instance_method" title="#notifications (instance method)">#<strong>notifications</strong>  &#x21d2; Array&lt;Google::Cloud::Storage::Notification&gt; </a>
    

    
      (also: #find_notifications)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Retrieves the entire list of Pub/Sub notification subscriptions for the bucket.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#policy-instance_method" title="#policy (instance method)">#<strong>policy</strong>(force: nil) {|policy| ... } &#x21d2; Policy </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Gets and updates the <a href="https://cloud.google.com/iam/">Cloud IAM</a> access control policy for this bucket.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#post_object-instance_method" title="#post_object (instance method)">#<strong>post_object</strong>(path, policy: nil, issuer: nil, client_email: nil, signing_key: nil, private_key: nil)  &#x21d2; PostObject </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Generate a PostObject that includes the fields and url to upload objects via html forms.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reload!-instance_method" title="#reload! (instance method)">#<strong>reload!</strong>  &#x21d2; Object </a>
    

    
      (also: #refresh!)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Reloads the bucket with current data from the Storage service.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#requester_pays-instance_method" title="#requester_pays (instance method)">#<strong>requester_pays</strong>  &#x21d2; Boolean<sup>?</sup> </a>
    

    
      (also: #requester_pays?)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Indicates that a client accessing the bucket or a file it contains must assume the transit costs related to the access.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#requester_pays=-instance_method" title="#requester_pays= (instance method)">#<strong>requester_pays=</strong>(new_requester_pays)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Enables requester pays for the bucket.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#signed_url-instance_method" title="#signed_url (instance method)">#<strong>signed_url</strong>(path, method: nil, expires: nil, content_type: nil, content_md5: nil, headers: nil, issuer: nil, client_email: nil, signing_key: nil, private_key: nil, query: nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Access without authentication can be granted to a File for a specified period of time.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#storage_class-instance_method" title="#storage_class (instance method)">#<strong>storage_class</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The bucket&#39;s storage class.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#storage_class=-instance_method" title="#storage_class= (instance method)">#<strong>storage_class=</strong>(new_storage_class)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Updates the bucket&#39;s storage class.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#test_permissions-instance_method" title="#test_permissions (instance method)">#<strong>test_permissions</strong>(*permissions)  &#x21d2; Array&lt;String&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Tests the specified permissions against the <a href="https://cloud.google.com/iam/">Cloud IAM</a> access control policy.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update-instance_method" title="#update (instance method)">#<strong>update</strong> {|bucket| ... } &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Updates the bucket with changes made in the given block in a single PATCH request.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_policy-instance_method" title="#update_policy (instance method)">#<strong>update_policy</strong>(new_policy)  &#x21d2; Policy </a>
    

    
      (also: #policy=)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Updates the <a href="https://cloud.google.com/iam/">Cloud IAM</a> access control policy for this bucket.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#versioning=-instance_method" title="#versioning= (instance method)">#<strong>versioning=</strong>(new_versioning)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Updates whether <a href="https://cloud.google.com/storage/docs/object-versioning">Object Versioning</a> is enabled for the bucket.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#versioning%3F-instance_method" title="#versioning? (instance method)">#<strong>versioning?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Whether <a href="https://cloud.google.com/storage/docs/object-versioning">Object Versioning</a> is enabled for the bucket.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#website_404-instance_method" title="#website_404 (instance method)">#<strong>website_404</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The page returned from a static website served from the bucket when a site visitor requests a resource that does not exist.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#website_404=-instance_method" title="#website_404= (instance method)">#<strong>website_404=</strong>(website_404)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Updates the page returned from a static website served from the bucket when a site visitor requests a resource that does not exist.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#website_main-instance_method" title="#website_main (instance method)">#<strong>website_main</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The index page returned from a static website served from the bucket when a site visitor requests the top level directory.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#website_main=-instance_method" title="#website_main= (instance method)">#<strong>website_main=</strong>(website_main)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Updates the index page returned from a static website served from the bucket when a site visitor requests the top level directory.</p>
</div></span>
  
</li>

      
    </ul>
  


  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="user_project=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="user_project-instance_method">
  
    #<strong>user_project</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>A boolean value or a project ID string to indicate the project to
be billed for operations on the bucket and its files. If this
attribute is set to <code>true</code>, transit costs for operations on the bucket
will be billed to the current project for this client. (See
<span class='object_link'><a href="Project.html#project-instance_method" title="Google::Cloud::Storage::Project#project (method)">Project#project</a></span> for the ID of the current project.) If this
attribute is set to a project ID, and that project is authorized for
the currently authenticated service account, transit costs will be
billed to that project. This attribute is required with requester
pays-enabled buckets. The default is <code>nil</code>.</p>

<p>In general, this attribute should be set when first retrieving the
bucket by providing the <code>user_project</code> option to <span class='object_link'><a href="Project.html#bucket-instance_method" title="Google::Cloud::Storage::Project#bucket (method)">Project#bucket</a></span>.</p>

<p>See also <span class='object_link'><a href="#requester_pays=-instance_method" title="Google::Cloud::Storage::Bucket#requester_pays= (method)">#requester_pays=</a></span> and <span class='object_link'><a href="#requester_pays-instance_method" title="Google::Cloud::Storage::Bucket#requester_pays (method)">#requester_pays</a></span>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Setting a non-default project:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>other-project-bucket</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>user_project:</span> <span class='kw'>true</span>
<span class='id identifier rubyid_files'>files</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_files'>files</span> <span class='comment'># Billed to current project
</span><span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_user_project'>user_project</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-other-project</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_files'>files</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_files'>files</span> <span class='comment'># Billed to &quot;my-other-project&quot;</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


76
77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 76</span>

<span class='kw'>def</span> <span class='id identifier rubyid_user_project'>user_project</span>
  <span class='ivar'>@user_project</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="acl-instance_method">
  
    #<strong>acl</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The Bucket::Acl instance used to control access to the bucket.</p>

<p>A bucket has owners, writers, and readers. Permissions can be granted
to an individual user&#39;s email address, a group&#39;s email address, as
well as many predefined lists.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Grant access to a user by prepending <code>&quot;user-&quot;</code> to an email:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>heidi@example.net</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_acl'>acl</span><span class='period'>.</span><span class='id identifier rubyid_add_reader'>add_reader</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>user-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Grant access to a group by prepending <code>&quot;group-&quot;</code> to an email:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>authors@example.net</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_acl'>acl</span><span class='period'>.</span><span class='id identifier rubyid_add_reader'>add_reader</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>group-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Or, grant access via a predefined permissions list:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_acl'>acl</span><span class='period'>.</span><span class='id identifier rubyid_public!'>public!</span></code></pre>
    
  </div>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/storage/docs/access-control" target="_parent" title="Access Control guide">Access Control guide</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1177
1178
1179</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 1177</span>

<span class='kw'>def</span> <span class='id identifier rubyid_acl'>acl</span>
  <span class='ivar'>@acl</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="" title="Google::Cloud::Storage::Bucket (class)">Bucket</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Bucket/Acl.html" title="Google::Cloud::Storage::Bucket::Acl (class)">Acl</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="api_url-instance_method">
  
    #<strong>api_url</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>A URL that can be used to access the bucket using the REST API.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


107
108
109</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 107</span>

<span class='kw'>def</span> <span class='id identifier rubyid_api_url'>api_url</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_self_link'>self_link</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="compose-instance_method">
  
    #<strong>compose</strong>(sources, destination, acl: nil, encryption_key: nil) {|file| ... } &#x21d2; <tt><span class='object_link'><a href="File.html" title="Google::Cloud::Storage::File (class)">Google::Cloud::Storage::File</a></span></tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='compose_file-instance_method'>compose_file</span>, <span id='combine-instance_method'>combine</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Concatenates a list of existing files in the bucket into a new file in
the bucket. There is a limit (currently 32) to the number of files
that can be composed in a single operation.</p>

<p>To compose files encrypted with a customer-supplied encryption key,
use the <code>encryption_key</code> option. All source files must have been
encrypted with the same key, and the resulting destination file will
also be encrypted with the same key.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_sources'>sources</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file-1.ext</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file-2.ext</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>

<span class='id identifier rubyid_new_file'>new_file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_compose'>compose</span> <span class='id identifier rubyid_sources'>sources</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/new-file.ext</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Set the properties of the new file in a block:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_sources'>sources</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file-1.ext</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file-2.ext</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>

<span class='id identifier rubyid_new_file'>new_file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_compose'>compose</span> <span class='id identifier rubyid_sources'>sources</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/new-file.ext</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_cache_control'>cache_control</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>private, max-age=0, no-cache</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_content_disposition'>content_disposition</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>inline; filename=filename.ext</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_content_encoding'>content_encoding</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>deflate</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_content_language'>content_language</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>de</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_content_type'>content_type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>application/json</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Specify the generation of source files (but skip retrieval):</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file_1'>file_1</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file-1.ext</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                     <span class='label'>generation:</span> <span class='int'>1490390259479000</span><span class='comma'>,</span> <span class='label'>skip_lookup:</span> <span class='kw'>true</span>
<span class='id identifier rubyid_file_2'>file_2</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file-2.ext</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                     <span class='label'>generation:</span> <span class='int'>1490310974144000</span><span class='comma'>,</span> <span class='label'>skip_lookup:</span> <span class='kw'>true</span>

<span class='id identifier rubyid_new_file'>new_file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_compose'>compose</span> <span class='lbracket'>[</span><span class='id identifier rubyid_file_1'>file_1</span><span class='comma'>,</span> <span class='id identifier rubyid_file_2'>file_2</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/new-file.ext</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>sources</span>
      
      
        <span class='type'>(<tt>Array&lt;String, <span class='object_link'><a href="File.html" title="Google::Cloud::Storage::File (class)">Google::Cloud::Storage::File</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The list
of source file names or objects that will be concatenated into a
single file.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>destination</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The name of the new file.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>acl</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A predefined set of access controls to apply to
this file.</p>

<p>Acceptable values are:</p>

<ul>
<li><code>auth</code>, <code>auth_read</code>, <code>authenticated</code>, <code>authenticated_read</code>,
<code>authenticatedRead</code> - File owner gets OWNER access, and
allAuthenticatedUsers get READER access.</li>
<li><code>owner_full</code>, <code>bucketOwnerFullControl</code> - File owner gets OWNER
access, and project team owners get OWNER access.</li>
<li><code>owner_read</code>, <code>bucketOwnerRead</code> - File owner gets OWNER access,
and project team owners get READER access.</li>
<li><code>private</code> - File owner gets OWNER access.</li>
<li><code>project_private</code>, <code>projectPrivate</code> - File owner gets OWNER
access, and project team members get access according to their
roles.</li>
<li><code>public</code>, <code>public_read</code>, <code>publicRead</code> - File owner gets OWNER
access, and allUsers get READER access.</li>
</ul>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>encryption_key</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Optional. The customer-supplied,
AES-256 encryption key used to encrypt the source files, if one was
used. All source files must have been encrypted with the same key,
and the resulting destination file will also be encrypted with the
key.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="#file-instance_method" title="Google::Cloud::Storage::Bucket#file (method)">file</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A block yielding a delegate file object for setting the
properties of the destination file.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="File.html" title="Google::Cloud::Storage::File (class)">Google::Cloud::Storage::File</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The new file.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


899
900
901
902
903
904
905
906
907
908
909
910
911
912
913
914
915
916
917
918
919</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 899</span>

<span class='kw'>def</span> <span class='id identifier rubyid_compose'>compose</span> <span class='id identifier rubyid_sources'>sources</span><span class='comma'>,</span> <span class='id identifier rubyid_destination'>destination</span><span class='comma'>,</span> <span class='label'>acl:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>encryption_key:</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_ensure_service!'>ensure_service!</span>
  <span class='id identifier rubyid_sources'>sources</span> <span class='op'>=</span> <span class='const'>Array</span> <span class='id identifier rubyid_sources'>sources</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_sources'>sources</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>&lt;</span> <span class='int'>2</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>must provide at least two source files</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>acl:</span> <span class='const'><span class='object_link'><a href="File.html" title="Google::Cloud::Storage::File (class)">File</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="File/Acl.html" title="Google::Cloud::Storage::File::Acl (class)">Acl</a></span></span><span class='period'>.</span><span class='id identifier rubyid_predefined_rule_for'>predefined_rule_for</span><span class='lparen'>(</span><span class='id identifier rubyid_acl'>acl</span><span class='rparen'>)</span><span class='comma'>,</span>
              <span class='label'>key:</span> <span class='id identifier rubyid_encryption_key'>encryption_key</span><span class='comma'>,</span>
              <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_destination_gapi'>destination_gapi</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_destination_gapi'>destination_gapi</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Apis.html" title="Google::Apis (module)">Apis</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Apis/StorageV1.html" title="Google::Apis::StorageV1 (module)">StorageV1</a></span></span><span class='op'>::</span><span class='const'>Object</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_updater'>updater</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="File.html" title="Google::Cloud::Storage::File (class)">File</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="File/Updater.html" title="Google::Cloud::Storage::File::Updater (class)">Updater</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_destination_gapi'>destination_gapi</span>
    <span class='kw'>yield</span> <span class='id identifier rubyid_updater'>updater</span>
    <span class='id identifier rubyid_updater'>updater</span><span class='period'>.</span><span class='id identifier rubyid_check_for_changed_metadata!'>check_for_changed_metadata!</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_gapi'>gapi</span> <span class='op'>=</span> <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_compose_file'>compose_file</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_sources'>sources</span><span class='comma'>,</span> <span class='id identifier rubyid_destination'>destination</span><span class='comma'>,</span>
                              <span class='id identifier rubyid_destination_gapi'>destination_gapi</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>
  <span class='const'><span class='object_link'><a href="File.html" title="Google::Cloud::Storage::File (class)">File</a></span></span><span class='period'>.</span><span class='id identifier rubyid_from_gapi'>from_gapi</span> <span class='id identifier rubyid_gapi'>gapi</span><span class='comma'>,</span> <span class='id identifier rubyid_service'>service</span><span class='comma'>,</span> <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cors-instance_method">
  
    #<strong>cors</strong> {|cors| ... } &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the current CORS configuration for a static website served
from the bucket.</p>

<p>The return value is a frozen (unmodifiable) array of hashes containing
the attributes specified for the Bucket resource field
<a href="https://cloud.google.com/storage/docs/json_api/v1/buckets#cors">cors</a>.</p>

<p>This method also accepts a block for updating the bucket&#39;s CORS rules.
See <span class='object_link'><a href="Bucket/Cors.html" title="Google::Cloud::Storage::Bucket::Cors (class)">Cors</a></span> for details.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Retrieving the bucket&#39;s CORS rules.</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_cors'>cors</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='comment'>#=&gt; 2
</span><span class='id identifier rubyid_rule'>rule</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_cors'>cors</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_origin'>origin</span> <span class='comment'>#=&gt; [&quot;http://example.org&quot;]
</span><span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_methods'>methods</span> <span class='comment'>#=&gt; [&quot;GET&quot;,&quot;POST&quot;,&quot;DELETE&quot;]
</span><span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span> <span class='comment'>#=&gt; [&quot;X-My-Custom-Header&quot;]
</span><span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_max_age'>max_age</span> <span class='comment'>#=&gt; 3600</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Updating the bucket&#39;s CORS rules inside a block.</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>
<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
  <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_cors'>cors</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span>
    <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_add_rule'>add_rule</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://example.org</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>https://example.org</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
               <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
               <span class='label'>headers:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>X-My-Custom-Header</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
               <span class='label'>max_age:</span> <span class='int'>3600</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
  </div>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="#cors-instance_method" title="Google::Cloud::Storage::Bucket#cors (method)">cors</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>a block for setting CORS rules</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>cors</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Bucket/Cors.html" title="Google::Cloud::Storage::Bucket::Cors (class)">Bucket::Cors</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the object accepting CORS rules</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/storage/docs/cross-origin" target="_parent" title="Cross-Origin Resource Sharing (CORS)">Cross-Origin Resource Sharing (CORS)</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


162
163
164
165
166
167
168
169
170
171
172</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 162</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cors'>cors</span>
  <span class='id identifier rubyid_cors_builder'>cors_builder</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Google::Cloud::Storage::Bucket (class)">Bucket</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Bucket/Cors.html" title="Google::Cloud::Storage::Bucket::Cors (class)">Cors</a></span></span><span class='period'>.</span><span class='id identifier rubyid_from_gapi'>from_gapi</span> <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_cors_configurations'>cors_configurations</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='kw'>yield</span> <span class='id identifier rubyid_cors_builder'>cors_builder</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_cors_builder'>cors_builder</span><span class='period'>.</span><span class='id identifier rubyid_changed?'>changed?</span>
      <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_cors_configurations'>cors_configurations</span> <span class='op'>=</span> <span class='id identifier rubyid_cors_builder'>cors_builder</span><span class='period'>.</span><span class='id identifier rubyid_to_gapi'>to_gapi</span>
      <span class='id identifier rubyid_patch_gapi!'>patch_gapi!</span> <span class='symbol'>:cors_configurations</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_cors_builder'>cors_builder</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span> <span class='comment'># always return frozen objects
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_file-instance_method">
  
    #<strong>create_file</strong>(file, path = nil, acl: nil, cache_control: nil, content_disposition: nil, content_encoding: nil, content_language: nil, content_type: nil, crc32c: nil, md5: nil, metadata: nil, storage_class: nil, encryption_key: nil, kms_key: nil)  &#x21d2; <tt><span class='object_link'><a href="File.html" title="Google::Cloud::Storage::File (class)">Google::Cloud::Storage::File</a></span></tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='upload_file-instance_method'>upload_file</span>, <span id='new_file-instance_method'>new_file</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a new <span class='object_link'><a href="File.html" title="Google::Cloud::Storage::File (class)">File</a></span> object by providing a path to a local file (or
any File-like object such as StringIO) to upload, along with the path
at which to store it in the bucket.</p>

<h4>Customer-supplied encryption keys</h4>

<p>By default, Google Cloud Storage manages server-side encryption keys
on your behalf. However, a <a href="https://cloud.google.com/storage/docs/encryption#customer-supplied">customer-supplied encryption key</a>
can be provided with the <code>encryption_key</code> option. If given, the same
key must be provided to subsequently download or copy the file. If you
use customer-supplied encryption keys, you must securely manage your
keys and ensure that they are not lost. Also, please note that file
metadata is not encrypted, with the exception of the CRC32C checksum
and MD5 hash. The names of files and buckets are also not encrypted,
and you can read or update the metadata of an encrypted file without
providing the encryption key.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_create_file'>create_file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/local.file.ext</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Specifying a destination path:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_create_file'>create_file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/local.file.ext</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>destination/path/file.ext</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Providing a customer-supplied encryption key:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>
<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># Key generation shown for example purposes only. Write your own.
</span><span class='id identifier rubyid_cipher'>cipher</span> <span class='op'>=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>Cipher</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>aes-256-cfb</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_cipher'>cipher</span><span class='period'>.</span><span class='id identifier rubyid_encrypt'>encrypt</span>
<span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_cipher'>cipher</span><span class='period'>.</span><span class='id identifier rubyid_random_key'>random_key</span>

<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_create_file'>create_file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/local.file.ext</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>destination/path/file.ext</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                   <span class='label'>encryption_key:</span> <span class='id identifier rubyid_key'>key</span>

<span class='comment'># Store your key and hash securely for later use.
</span><span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>destination/path/file.ext</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                   <span class='label'>encryption_key:</span> <span class='id identifier rubyid_key'>key</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Providing a customer-managed Cloud KMS encryption key:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>
<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># KMS key ring must use the same location as the bucket.
</span><span class='id identifier rubyid_kms_key_name'>kms_key_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>projects/a/locations/b/keyRings/c/cryptoKeys/d</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_create_file'>create_file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/local.file.ext</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                   <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>destination/path/file.ext</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                   <span class='label'>kms_key:</span> <span class='id identifier rubyid_kms_key_name'>kms_key_name</span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>destination/path/file.ext</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_kms_key'>kms_key</span> <span class='comment'>#=&gt; kms_key_name</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Create a file with gzip-encoded data.</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>zlib</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_gz'>gz</span> <span class='op'>=</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_z'>z</span> <span class='op'>=</span> <span class='const'>Zlib</span><span class='op'>::</span><span class='const'>GzipWriter</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_gz'>gz</span>
<span class='id identifier rubyid_z'>z</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello world!</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_z'>z</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
<span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_gz'>gz</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_create_file'>create_file</span> <span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/gzipped.txt</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                   <span class='label'>content_encoding:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>gzip</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/gzipped.txt</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># The downloaded data is decompressed by default.
</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_download'>download</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/downloaded/hello.txt</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># The downloaded data remains compressed with skip_decompress.
</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_download'>download</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/downloaded/gzipped.txt</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
              <span class='label'>skip_decompress:</span> <span class='kw'>true</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>file</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>::File</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Path of the file on the filesystem to
upload. Can be an File object, or File-like object such as StringIO.
(If the object does not have path, a <code>path</code> argument must be also be
provided.)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Path to store the file in Google Cloud Storage.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>acl</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A predefined set of access controls to apply to
this file.</p>

<p>Acceptable values are:</p>

<ul>
<li><code>auth</code>, <code>auth_read</code>, <code>authenticated</code>, <code>authenticated_read</code>,
<code>authenticatedRead</code> - File owner gets OWNER access, and
allAuthenticatedUsers get READER access.</li>
<li><code>owner_full</code>, <code>bucketOwnerFullControl</code> - File owner gets OWNER
access, and project team owners get OWNER access.</li>
<li><code>owner_read</code>, <code>bucketOwnerRead</code> - File owner gets OWNER access,
and project team owners get READER access.</li>
<li><code>private</code> - File owner gets OWNER access.</li>
<li><code>project_private</code>, <code>projectPrivate</code> - File owner gets OWNER
access, and project team members get access according to their
roles.</li>
<li><code>public</code>, <code>public_read</code>, <code>publicRead</code> - File owner gets OWNER
access, and allUsers get READER access.</li>
</ul>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>cache_control</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The
<a href="https://tools.ietf.org/html/rfc7234#section-5.2">Cache-Control</a>
response header to be returned when the file is downloaded.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>content_disposition</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The
<a href="https://tools.ietf.org/html/rfc6266">Content-Disposition</a>
response header to be returned when the file is downloaded.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>content_encoding</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The <a href="https://tools.ietf.org/html/rfc7231#section-3.1.2.2">Content-Encoding
</a> response
header to be returned when the file is downloaded. For example,
<code>content_encoding: &quot;gzip&quot;</code> can indicate to clients that the uploaded
data is gzip-compressed. However, there is no check to guarantee the
specified <code>Content-Encoding</code> has actually been applied to the file
data, and incorrectly specifying the file&#39;s encoding could lead
to unintended behavior on subsequent download requests.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>content_language</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The
<a href="http://tools.ietf.org/html/bcp47">Content-Language</a> response
header to be returned when the file is downloaded.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>content_type</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The
<a href="https://tools.ietf.org/html/rfc2616#section-14.17">Content-Type</a>
response header to be returned when the file is downloaded.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>crc32c</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The CRC32c checksum of the file data, as
described in <a href="http://tools.ietf.org/html/rfc4960#appendix-B">RFC 4960, Appendix
B</a>.
If provided, Cloud Storage will only create the file if the value
matches the value calculated by the service. See
<a href="https://cloud.google.com/storage/docs/hashes-etags">Validation</a>
for more information.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>md5</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The MD5 hash of the file data. If provided, Cloud
Storage will only create the file if the value matches the value
calculated by the service. See
<a href="https://cloud.google.com/storage/docs/hashes-etags">Validation</a> for
more information.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>metadata</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A hash of custom, user-provided web-safe keys
and arbitrary string values that will returned with requests for the
file as &quot;x-goog-meta-&quot; response headers.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>storage_class</span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Storage class of the file.
Determines how the file is stored and determines the SLA and the
cost of storage. Accepted values include <code>:multi_regional</code>,
<code>:regional</code>, <code>:nearline</code>, and <code>:coldline</code>, as well as the equivalent
strings returned by <span class='object_link'><a href="#storage_class-instance_method" title="Google::Cloud::Storage::Bucket#storage_class (method)">#storage_class</a></span>. For more information, see
<a href="https://cloud.google.com/storage/docs/storage-classes">Storage Classes</a>
and <a href="https://cloud.google.com/storage/docs/per-object-storage-class">Per-Object Storage
Class</a>.
The default value is the default storage class for the bucket.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>encryption_key</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Optional. A customer-supplied, AES-256
encryption key that will be used to encrypt the file. Do not provide
if <code>kms_key</code> is used.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>kms_key</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Optional. Resource name of the Cloud KMS
key, of the form
<code>projects/my-prj/locations/kr-loc/keyRings/my-kr/cryptoKeys/my-key</code>,
that will be used to encrypt the file. The KMS key ring must use
the same location as the bucket.The Service Account associated with
your project requires access to this encryption key. Do not provide
if <code>encryption_key</code> is used.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="File.html" title="Google::Cloud::Storage::File (class)">Google::Cloud::Storage::File</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


788
789
790
791
792
793
794
795
796
797
798
799
800
801
802
803
804
805
806
807
808
809</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 788</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_file'>create_file</span> <span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>acl:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>cache_control:</span> <span class='kw'>nil</span><span class='comma'>,</span>
                <span class='label'>content_disposition:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>content_encoding:</span> <span class='kw'>nil</span><span class='comma'>,</span>
                <span class='label'>content_language:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>content_type:</span> <span class='kw'>nil</span><span class='comma'>,</span>
                <span class='label'>crc32c:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>md5:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>metadata:</span> <span class='kw'>nil</span><span class='comma'>,</span>
                <span class='label'>storage_class:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>encryption_key:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>kms_key:</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_ensure_service!'>ensure_service!</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>acl:</span> <span class='const'><span class='object_link'><a href="File.html" title="Google::Cloud::Storage::File (class)">File</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="File/Acl.html" title="Google::Cloud::Storage::File::Acl (class)">Acl</a></span></span><span class='period'>.</span><span class='id identifier rubyid_predefined_rule_for'>predefined_rule_for</span><span class='lparen'>(</span><span class='id identifier rubyid_acl'>acl</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='label'>md5:</span> <span class='id identifier rubyid_md5'>md5</span><span class='comma'>,</span>
              <span class='label'>cache_control:</span> <span class='id identifier rubyid_cache_control'>cache_control</span><span class='comma'>,</span> <span class='label'>content_type:</span> <span class='id identifier rubyid_content_type'>content_type</span><span class='comma'>,</span>
              <span class='label'>content_disposition:</span> <span class='id identifier rubyid_content_disposition'>content_disposition</span><span class='comma'>,</span> <span class='label'>crc32c:</span> <span class='id identifier rubyid_crc32c'>crc32c</span><span class='comma'>,</span>
              <span class='label'>content_encoding:</span> <span class='id identifier rubyid_content_encoding'>content_encoding</span><span class='comma'>,</span> <span class='label'>metadata:</span> <span class='id identifier rubyid_metadata'>metadata</span><span class='comma'>,</span>
              <span class='label'>content_language:</span> <span class='id identifier rubyid_content_language'>content_language</span><span class='comma'>,</span> <span class='label'>key:</span> <span class='id identifier rubyid_encryption_key'>encryption_key</span><span class='comma'>,</span>
              <span class='label'>kms_key:</span> <span class='id identifier rubyid_kms_key'>kms_key</span><span class='comma'>,</span>
              <span class='label'>storage_class:</span> <span class='id identifier rubyid_storage_class_for'>storage_class_for</span><span class='lparen'>(</span><span class='id identifier rubyid_storage_class'>storage_class</span><span class='rparen'>)</span><span class='comma'>,</span>
              <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_ensure_io_or_file_exists!'>ensure_io_or_file_exists!</span> <span class='id identifier rubyid_file'>file</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>||=</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span> <span class='kw'>if</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbol'>:path</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>||=</span> <span class='id identifier rubyid_file'>file</span> <span class='kw'>if</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>String</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>must provide path</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='id identifier rubyid_gapi'>gapi</span> <span class='op'>=</span> <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_insert_file'>insert_file</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>
  <span class='const'><span class='object_link'><a href="File.html" title="Google::Cloud::Storage::File (class)">File</a></span></span><span class='period'>.</span><span class='id identifier rubyid_from_gapi'>from_gapi</span> <span class='id identifier rubyid_gapi'>gapi</span><span class='comma'>,</span> <span class='id identifier rubyid_service'>service</span><span class='comma'>,</span> <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_notification-instance_method">
  
    #<strong>create_notification</strong>(topic, custom_attrs: nil, event_types: nil, prefix: nil, payload: nil)  &#x21d2; <tt><span class='object_link'><a href="Notification.html" title="Google::Cloud::Storage::Notification (class)">Google::Cloud::Storage::Notification</a></span></tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='new_notification-instance_method'>new_notification</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a new Pub/Sub notification subscription for the bucket.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/pubsub</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_pubsub'>pubsub</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'>Pubsub</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_topic'>topic</span> <span class='op'>=</span> <span class='id identifier rubyid_pubsub'>pubsub</span><span class='period'>.</span><span class='id identifier rubyid_create_topic'>create_topic</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-topic</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_topic'>topic</span><span class='period'>.</span><span class='id identifier rubyid_policy'>policy</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span>
  <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>roles/pubsub.publisher</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>serviceAccount:my-project</span><span class='tstring_end'>&quot;</span></span> \
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@gs-project-accounts.iam.gserviceaccount.com</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>
<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_notification'>notification</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_create_notification'>create_notification</span> <span class='id identifier rubyid_topic'>topic</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>topic</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The name of the Cloud PubSub topic to which the
notification subscription will publish.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>custom_attrs</span>
      
      
        <span class='type'>(<tt>Hash(String =&gt; String)</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The custom attributes for
the notification. An optional list of additional attributes to
attach to each Cloud Pub/Sub message published for the notification
subscription.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>event_types</span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>String</tt>, <tt>Array&lt;Symbol, String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The event
types for the notification subscription. If provided, messages will
only be sent for the listed event types. If empty, messages will be
sent for all event types.</p>

<p>Acceptable values are:</p>

<ul>
<li><code>:finalize</code> - Sent when a new object (or a new generation of
an existing object) is successfully created in the bucket. This
includes copying or rewriting an existing object. A failed upload
does not trigger this event.</li>
<li><code>:update</code> - Sent when the metadata of an existing object changes.</li>
<li><code>:delete</code> - Sent when an object has been permanently deleted. This
includes objects that are overwritten or are deleted as part of
the bucket&#39;s lifecycle configuration. For buckets with object
versioning enabled, this is not sent when an object is archived
(see <code>OBJECT_ARCHIVE</code>), even if archival occurs via the
<span class='object_link'><a href="File.html#delete-instance_method" title="Google::Cloud::Storage::File#delete (method)">File#delete</a></span> method.</li>
<li><code>:archive</code> - Only sent when the bucket has enabled object
versioning. This event indicates that the live version of an
object has become an archived version, either because it was
archived or because it was overwritten by the upload of an object
of the same name.</li>
</ul>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>prefix</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The file name prefix for the notification
subscription. If provided, the notification will only be applied to
file names that begin with this prefix.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>payload</span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>String</tt>, <tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The desired content of the
Pub/Sub message payload. Acceptable values are:</p>

<ul>
<li><code>:json</code> or <code>true</code> - The Pub/Sub message payload will be a UTF-8
string containing the <a href="https://cloud.google.com/storage/docs/json_api/v1/objects#resource-representations">resource
representation</a>
of the file&#39;s metadata.</li>
<li><code>:none</code> or <code>false</code> - No payload is included with the notification.</li>
</ul>

<p>The default value is <code>:json</code>.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Notification.html" title="Google::Cloud::Storage::Notification (class)">Google::Cloud::Storage::Notification</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/storage/docs/pubsub-notifications" target="_parent" title="Cloud Pub/Sub Notifications for Google Cloud">Cloud Pub/Sub Notifications for Google Cloud</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1479
1480
1481
1482
1483
1484
1485
1486
1487
1488</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 1479</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_notification'>create_notification</span> <span class='id identifier rubyid_topic'>topic</span><span class='comma'>,</span> <span class='label'>custom_attrs:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>event_types:</span> <span class='kw'>nil</span><span class='comma'>,</span>
                        <span class='label'>prefix:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>payload:</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_ensure_service!'>ensure_service!</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='label'>custom_attrs:</span> <span class='id identifier rubyid_custom_attrs'>custom_attrs</span><span class='comma'>,</span> <span class='label'>event_types:</span> <span class='id identifier rubyid_event_types'>event_types</span><span class='comma'>,</span>
              <span class='label'>prefix:</span> <span class='id identifier rubyid_prefix'>prefix</span><span class='comma'>,</span> <span class='label'>payload:</span> <span class='id identifier rubyid_payload'>payload</span><span class='comma'>,</span>
              <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span> <span class='rbrace'>}</span>

  <span class='id identifier rubyid_gapi'>gapi</span> <span class='op'>=</span> <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_insert_notification'>insert_notification</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_topic'>topic</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span>
  <span class='const'><span class='object_link'><a href="Notification.html" title="Google::Cloud::Storage::Notification (class)">Notification</a></span></span><span class='period'>.</span><span class='id identifier rubyid_from_gapi'>from_gapi</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_gapi'>gapi</span><span class='comma'>,</span> <span class='id identifier rubyid_service'>service</span><span class='comma'>,</span> <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="created_at-instance_method">
  
    #<strong>created_at</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creation time of the bucket.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


113
114
115</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 113</span>

<span class='kw'>def</span> <span class='id identifier rubyid_created_at'>created_at</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_time_created'>time_created</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_acl-instance_method">
  
    #<strong>default_acl</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The Bucket::DefaultAcl instance used to control access to the bucket&#39;s
files.</p>

<p>A bucket&#39;s files have owners, writers, and readers. Permissions can be
granted to an individual user&#39;s email address, a group&#39;s email
address, as well as many predefined lists.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Grant access to a user by prepending <code>&quot;user-&quot;</code> to an email:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>heidi@example.net</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_default_acl'>default_acl</span><span class='period'>.</span><span class='id identifier rubyid_add_reader'>add_reader</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>user-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Grant access to a group by prepending <code>&quot;group-&quot;</code> to an email</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>authors@example.net</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_default_acl'>default_acl</span><span class='period'>.</span><span class='id identifier rubyid_add_reader'>add_reader</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>group-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Or, grant access via a predefined permissions list:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_default_acl'>default_acl</span><span class='period'>.</span><span class='id identifier rubyid_public!'>public!</span></code></pre>
    
  </div>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/storage/docs/access-control" target="_parent" title="Access Control guide">Access Control guide</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1221
1222
1223</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 1221</span>

<span class='kw'>def</span> <span class='id identifier rubyid_default_acl'>default_acl</span>
  <span class='ivar'>@default_acl</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="" title="Google::Cloud::Storage::Bucket (class)">Bucket</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Bucket/DefaultAcl.html" title="Google::Cloud::Storage::Bucket::DefaultAcl (class)">DefaultAcl</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_kms_key-instance_method">
  
    #<strong>default_kms_key</strong>  &#x21d2; <tt>String</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The Cloud KMS encryption key that will be used to protect files.
For example: <code>projects/a/locations/b/keyRings/c/cryptoKeys/d</code></p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># KMS key ring must use the same location as the bucket.
</span><span class='id identifier rubyid_kms_key_name'>kms_key_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>projects/a/locations/b/keyRings/c/cryptoKeys/d</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_default_kms_key'>default_kms_key</span> <span class='op'>=</span> <span class='id identifier rubyid_kms_key_name'>kms_key_name</span>

<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_default_kms_key'>default_kms_key</span> <span class='comment'>#=&gt; kms_key_name</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A Cloud KMS encryption key, or <code>nil</code> if none
has been configured.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


401
402
403</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 401</span>

<span class='kw'>def</span> <span class='id identifier rubyid_default_kms_key'>default_kms_key</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_encryption'>encryption</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_encryption'>encryption</span><span class='period'>.</span><span class='id identifier rubyid_default_kms_key_name'>default_kms_key_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_kms_key=-instance_method">
  
    #<strong>default_kms_key=</strong>(new_default_kms_key)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Set the Cloud KMS encryption key that will be used to protect files.
For example: <code>projects/a/locations/b/keyRings/c/cryptoKeys/d</code></p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># KMS key ring must use the same location as the bucket.
</span><span class='id identifier rubyid_kms_key_name'>kms_key_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>projects/a/locations/b/keyRings/c/cryptoKeys/d</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_default_kms_key'>default_kms_key</span> <span class='op'>=</span> <span class='id identifier rubyid_kms_key_name'>kms_key_name</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>new_default_kms_key</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>New Cloud KMS key name</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


423
424
425
426
427</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 423</span>

<span class='kw'>def</span> <span class='id identifier rubyid_default_kms_key='>default_kms_key=</span> <span class='id identifier rubyid_new_default_kms_key'>new_default_kms_key</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_encryption'>encryption</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Apis.html" title="Google::Apis (module)">Apis</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Apis/StorageV1.html" title="Google::Apis::StorageV1 (module)">StorageV1</a></span></span><span class='op'>::</span><span class='const'>Bucket</span><span class='op'>::</span><span class='const'>Encryption</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> \
    <span class='label'>default_kms_key_name:</span> <span class='id identifier rubyid_new_default_kms_key'>new_default_kms_key</span>
  <span class='id identifier rubyid_patch_gapi!'>patch_gapi!</span> <span class='symbol'>:encryption</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete-instance_method">
  
    #<strong>delete</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Permanently deletes the bucket.
The bucket must be empty before it can be deleted.</p>

<p>The API call to delete the bucket may be retried under certain
conditions. See <span class='object_link'><a href="../../Cloud.html#storage-instance_method" title="Google::Cloud#storage (method)">Google::Cloud#storage</a></span> to control this behavior.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Returns <code>true</code> if the bucket was deleted.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


496
497
498
499
500</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 496</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete'>delete</span>
  <span class='id identifier rubyid_ensure_service!'>ensure_service!</span>
  <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_delete_bucket'>delete_bucket</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span>
  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="exists?-instance_method">
  
    #<strong>exists?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Determines whether the bucket exists in the Storage service.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1504
1505
1506
1507
1508
1509
1510
1511
1512
1513</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 1504</span>

<span class='kw'>def</span> <span class='id identifier rubyid_exists?'>exists?</span>
  <span class='comment'># Always true if we have a grpc object
</span>  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>unless</span> <span class='id identifier rubyid_lazy?'>lazy?</span>
  <span class='comment'># If we have a value, return it
</span>  <span class='kw'>return</span> <span class='ivar'>@exists</span> <span class='kw'>unless</span> <span class='ivar'>@exists</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_ensure_gapi!'>ensure_gapi!</span>
  <span class='ivar'>@exists</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'>NotFoundError</span>
  <span class='ivar'>@exists</span> <span class='op'>=</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="file-instance_method">
  
    #<strong>file</strong>(path, generation: nil, skip_lookup: nil, encryption_key: nil)  &#x21d2; <tt><span class='object_link'><a href="File.html" title="Google::Cloud::Storage::File (class)">Google::Cloud::Storage::File</a></span></tt><sup>?</sup> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='find_file-instance_method'>find_file</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Retrieves a file matching the path.</p>

<p>If a <a href="https://cloud.google.com/storage/docs/encryption#customer-supplied">customer-supplied encryption
key</a>
was used with <span class='object_link'><a href="#create_file-instance_method" title="Google::Cloud::Storage::Bucket#create_file (method)">#create_file</a></span>, the <code>encryption_key</code> option must be
provided or else the file&#39;s CRC32C checksum and MD5 hash will not be
returned.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Name (path) of the file.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>generation</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When present, selects a specific revision
of this object. Default is the latest version.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>skip_lookup</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Optionally create a Bucket object
without verifying the bucket resource exists on the Storage service.
Calls made on this object will raise errors if the bucket resource
does not exist. Default is <code>false</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>encryption_key</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Optional. The customer-supplied,
AES-256 encryption key used to encrypt the file, if one was provided
to <span class='object_link'><a href="#create_file-instance_method" title="Google::Cloud::Storage::Bucket#create_file (method)">#create_file</a></span>. (Not used if <code>skip_lookup</code> is also set.)</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="File.html" title="Google::Cloud::Storage::File (class)">Google::Cloud::Storage::File</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Returns nil if file does
not exist</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


594
595
596
597
598
599
600
601
602
603
604
605
606
607</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 594</span>

<span class='kw'>def</span> <span class='id identifier rubyid_file'>file</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='label'>generation:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>skip_lookup:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>encryption_key:</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_ensure_service!'>ensure_service!</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_skip_lookup'>skip_lookup</span>
    <span class='kw'>return</span> <span class='const'><span class='object_link'><a href="File.html" title="Google::Cloud::Storage::File (class)">File</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new_lazy'>new_lazy</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_service'>service</span><span class='comma'>,</span>
                         <span class='label'>generation:</span> <span class='id identifier rubyid_generation'>generation</span><span class='comma'>,</span>
                         <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_gapi'>gapi</span> <span class='op'>=</span> <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_get_file'>get_file</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='label'>generation:</span> <span class='id identifier rubyid_generation'>generation</span><span class='comma'>,</span>
                                      <span class='label'>key:</span> <span class='id identifier rubyid_encryption_key'>encryption_key</span><span class='comma'>,</span>
                                      <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span>
  <span class='const'><span class='object_link'><a href="File.html" title="Google::Cloud::Storage::File (class)">File</a></span></span><span class='period'>.</span><span class='id identifier rubyid_from_gapi'>from_gapi</span> <span class='id identifier rubyid_gapi'>gapi</span><span class='comma'>,</span> <span class='id identifier rubyid_service'>service</span><span class='comma'>,</span> <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span>
<span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'>NotFoundError</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="files-instance_method">
  
    #<strong>files</strong>(prefix: nil, delimiter: nil, token: nil, max: nil, versions: nil)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="File.html" title="Google::Cloud::Storage::File (class)">Google::Cloud::Storage::File</a></span>&gt;</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='find_files-instance_method'>find_files</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Retrieves a list of files matching the criteria.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_files'>files</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_files'>files</span>
<span class='id identifier rubyid_files'>files</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
<span class='kw'>end</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Retrieve all files: (See <span class='object_link'><a href="File/List.html#all-instance_method" title="Google::Cloud::Storage::File::List#all (method)">File::List#all</a></span>)</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_files'>files</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_files'>files</span>
<span class='id identifier rubyid_files'>files</span><span class='period'>.</span><span class='id identifier rubyid_all'>all</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
<span class='kw'>end</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>prefix</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Filter results to files whose names begin with
this prefix.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>delimiter</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Returns results in a directory-like mode.
<code>items</code> will contain only objects whose names, aside from the
<code>prefix</code>, do not contain <code>delimiter</code>. Objects whose names, aside
from the <code>prefix</code>, contain <code>delimiter</code> will have their name,
truncated after the <code>delimiter</code>, returned in <code>prefixes</code>. Duplicate
<code>prefixes</code> are omitted.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>token</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A previously-returned page token representing
part of the larger set of results to view.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>max</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Maximum number of items plus prefixes to return.
As duplicate prefixes are omitted, fewer total results may be
returned than requested. The default value of this parameter is
1,000 items.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>versions</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>If <code>true</code>, lists all versions of an object
as distinct results. The default is <code>false</code>. For more information,
see <a href="https://cloud.google.com/storage/docs/object-versioning">Object Versioning
</a>.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="File.html" title="Google::Cloud::Storage::File (class)">Google::Cloud::Storage::File</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>(See
<span class='object_link'><a href="File/List.html" title="Google::Cloud::Storage::File::List (class)">File::List</a></span>)</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


549
550
551
552
553
554
555
556
557
558</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 549</span>

<span class='kw'>def</span> <span class='id identifier rubyid_files'>files</span> <span class='label'>prefix:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>delimiter:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>token:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>max:</span> <span class='kw'>nil</span><span class='comma'>,</span>
          <span class='label'>versions:</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_ensure_service!'>ensure_service!</span>
  <span class='id identifier rubyid_gapi'>gapi</span> <span class='op'>=</span> <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_list_files'>list_files</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>prefix:</span> <span class='id identifier rubyid_prefix'>prefix</span><span class='comma'>,</span> <span class='label'>delimiter:</span> <span class='id identifier rubyid_delimiter'>delimiter</span><span class='comma'>,</span>
                                  <span class='label'>token:</span> <span class='id identifier rubyid_token'>token</span><span class='comma'>,</span> <span class='label'>max:</span> <span class='id identifier rubyid_max'>max</span><span class='comma'>,</span>
                                  <span class='label'>versions:</span> <span class='id identifier rubyid_versions'>versions</span><span class='comma'>,</span>
                                  <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span>
  <span class='const'><span class='object_link'><a href="File.html" title="Google::Cloud::Storage::File (class)">File</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="File/List.html" title="Google::Cloud::Storage::File::List (class)">List</a></span></span><span class='period'>.</span><span class='id identifier rubyid_from_gapi'>from_gapi</span> <span class='id identifier rubyid_gapi'>gapi</span><span class='comma'>,</span> <span class='id identifier rubyid_service'>service</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_prefix'>prefix</span><span class='comma'>,</span> <span class='id identifier rubyid_delimiter'>delimiter</span><span class='comma'>,</span> <span class='id identifier rubyid_max'>max</span><span class='comma'>,</span>
                       <span class='id identifier rubyid_versions'>versions</span><span class='comma'>,</span> <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="id-instance_method">
  
    #<strong>id</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The ID of the bucket.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


95
96
97</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 95</span>

<span class='kw'>def</span> <span class='id identifier rubyid_id'>id</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="kind-instance_method">
  
    #<strong>kind</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The kind of item this is.
For buckets, this is always <code>storage#bucket</code>.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


89
90
91</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 89</span>

<span class='kw'>def</span> <span class='id identifier rubyid_kind'>kind</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_kind'>kind</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="labels-instance_method">
  
    #<strong>labels</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>A hash of user-provided labels. The hash is frozen and changes are not
allowed.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


313
314
315
316
317</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 313</span>

<span class='kw'>def</span> <span class='id identifier rubyid_labels'>labels</span>
  <span class='id identifier rubyid_m'>m</span> <span class='op'>=</span> <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_labels'>labels</span>
  <span class='id identifier rubyid_m'>m</span> <span class='op'>=</span> <span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span class='id identifier rubyid_to_h'>to_h</span> <span class='kw'>if</span> <span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbol'>:to_h</span>
  <span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="labels=-instance_method">
  
    #<strong>labels=</strong>(labels)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Updates the hash of user-provided labels.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


321
322
323
324</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 321</span>

<span class='kw'>def</span> <span class='id identifier rubyid_labels='>labels=</span> <span class='id identifier rubyid_labels'>labels</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_labels'>labels</span> <span class='op'>=</span> <span class='id identifier rubyid_labels'>labels</span>
  <span class='id identifier rubyid_patch_gapi!'>patch_gapi!</span> <span class='symbol'>:labels</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="location-instance_method">
  
    #<strong>location</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The location of the bucket.
Object data for objects in the bucket resides in physical
storage within this region. Defaults to US.
See the developer&#39;s guide for the authoritative list.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/storage/docs/concepts-techniques" target="_parent" title="https://cloud.google.com/storage/docs/concepts-techniques">https://cloud.google.com/storage/docs/concepts-techniques</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


181
182
183</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 181</span>

<span class='kw'>def</span> <span class='id identifier rubyid_location'>location</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_location'>location</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="logging_bucket-instance_method">
  
    #<strong>logging_bucket</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The destination bucket name for the bucket&#39;s logs.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/storage/docs/access-logs" target="_parent" title="Access Logs">Access Logs</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


190
191
192</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 190</span>

<span class='kw'>def</span> <span class='id identifier rubyid_logging_bucket'>logging_bucket</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_logging'>logging</span><span class='period'>.</span><span class='id identifier rubyid_log_bucket'>log_bucket</span> <span class='kw'>if</span> <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_logging'>logging</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="logging_bucket=-instance_method">
  
    #<strong>logging_bucket=</strong>(logging_bucket)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Updates the destination bucket for the bucket&#39;s logs.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>logging_bucket</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The bucket to hold the logging output</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/storage/docs/access-logs" target="_parent" title="Access Logs">Access Logs</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


201
202
203
204
205</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 201</span>

<span class='kw'>def</span> <span class='id identifier rubyid_logging_bucket='>logging_bucket=</span> <span class='id identifier rubyid_logging_bucket'>logging_bucket</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_logging'>logging</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Apis.html" title="Google::Apis (module)">Apis</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Apis/StorageV1.html" title="Google::Apis::StorageV1 (module)">StorageV1</a></span></span><span class='op'>::</span><span class='const'>Bucket</span><span class='op'>::</span><span class='const'>Logging</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_logging'>logging</span><span class='period'>.</span><span class='id identifier rubyid_log_bucket'>log_bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_logging_bucket'>logging_bucket</span>
  <span class='id identifier rubyid_patch_gapi!'>patch_gapi!</span> <span class='symbol'>:logging</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="logging_prefix-instance_method">
  
    #<strong>logging_prefix</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The logging object prefix for the bucket&#39;s logs. For more information,</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/storage/docs/access-logs" target="_parent" title="Access Logs">Access Logs</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


212
213
214</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 212</span>

<span class='kw'>def</span> <span class='id identifier rubyid_logging_prefix'>logging_prefix</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_logging'>logging</span><span class='period'>.</span><span class='id identifier rubyid_log_object_prefix'>log_object_prefix</span> <span class='kw'>if</span> <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_logging'>logging</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="logging_prefix=-instance_method">
  
    #<strong>logging_prefix=</strong>(logging_prefix)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Updates the logging object prefix. This prefix will be used to create
log object names for the bucket. It can be at most 900 characters and
must be a <a href="https://cloud.google.com/storage/docs/bucket-naming#objectnames">valid object
name</a>.
By default, the object prefix is the name of the bucket for which the
logs are enabled.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/storage/docs/access-logs" target="_parent" title="Access Logs">Access Logs</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


226
227
228
229
230</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 226</span>

<span class='kw'>def</span> <span class='id identifier rubyid_logging_prefix='>logging_prefix=</span> <span class='id identifier rubyid_logging_prefix'>logging_prefix</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_logging'>logging</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Apis.html" title="Google::Apis (module)">Apis</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Apis/StorageV1.html" title="Google::Apis::StorageV1 (module)">StorageV1</a></span></span><span class='op'>::</span><span class='const'>Bucket</span><span class='op'>::</span><span class='const'>Logging</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_logging'>logging</span><span class='period'>.</span><span class='id identifier rubyid_log_object_prefix'>log_object_prefix</span> <span class='op'>=</span> <span class='id identifier rubyid_logging_prefix'>logging_prefix</span>
  <span class='id identifier rubyid_patch_gapi!'>patch_gapi!</span> <span class='symbol'>:logging</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="name-instance_method">
  
    #<strong>name</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The name of the bucket.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


101
102
103</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 101</span>

<span class='kw'>def</span> <span class='id identifier rubyid_name'>name</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="notification-instance_method">
  
    #<strong>notification</strong>(id)  &#x21d2; <tt><span class='object_link'><a href="Notification.html" title="Google::Cloud::Storage::Notification (class)">Google::Cloud::Storage::Notification</a></span></tt><sup>?</sup> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='find_notification-instance_method'>find_notification</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Retrieves a Pub/Sub notification subscription for the bucket.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_notification'>notification</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_notification'>notification</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_notification'>notification</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The Notification ID.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Notification.html" title="Google::Cloud::Storage::Notification (class)">Google::Cloud::Storage::Notification</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Returns nil if the
notification does not exist</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/storage/docs/pubsub-notifications" target="_parent" title="Cloud Pub/Sub Notifications for Google Cloud">Cloud Pub/Sub Notifications for Google Cloud</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1401
1402
1403
1404
1405
1406
1407</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 1401</span>

<span class='kw'>def</span> <span class='id identifier rubyid_notification'>notification</span> <span class='id identifier rubyid_id'>id</span>
  <span class='id identifier rubyid_ensure_service!'>ensure_service!</span>
  <span class='id identifier rubyid_gapi'>gapi</span> <span class='op'>=</span> <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_get_notification'>get_notification</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span>
  <span class='const'><span class='object_link'><a href="Notification.html" title="Google::Cloud::Storage::Notification (class)">Notification</a></span></span><span class='period'>.</span><span class='id identifier rubyid_from_gapi'>from_gapi</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_gapi'>gapi</span><span class='comma'>,</span> <span class='id identifier rubyid_service'>service</span><span class='comma'>,</span> <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span>
<span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'>NotFoundError</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="notifications-instance_method">
  
    #<strong>notifications</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="Notification.html" title="Google::Cloud::Storage::Notification (class)">Google::Cloud::Storage::Notification</a></span>&gt;</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='find_notifications-instance_method'>find_notifications</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Retrieves the entire list of Pub/Sub notification subscriptions for
the bucket.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_notifications'>notifications</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_notifications'>notifications</span>
<span class='id identifier rubyid_notifications'>notifications</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_notification'>notification</span><span class='op'>|</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_notification'>notification</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
<span class='kw'>end</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Notification.html" title="Google::Cloud::Storage::Notification (class)">Google::Cloud::Storage::Notification</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/storage/docs/pubsub-notifications" target="_parent" title="Cloud Pub/Sub Notifications for Google Cloud">Cloud Pub/Sub Notifications for Google Cloud</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1370
1371
1372
1373
1374
1375
1376
1377</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 1370</span>

<span class='kw'>def</span> <span class='id identifier rubyid_notifications'>notifications</span>
  <span class='id identifier rubyid_ensure_service!'>ensure_service!</span>
  <span class='id identifier rubyid_gapi'>gapi</span> <span class='op'>=</span> <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_list_notifications'>list_notifications</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span>
  <span class='const'>Array</span><span class='lparen'>(</span><span class='id identifier rubyid_gapi'>gapi</span><span class='period'>.</span><span class='id identifier rubyid_items'>items</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_gapi_object'>gapi_object</span><span class='op'>|</span>
    <span class='const'><span class='object_link'><a href="Notification.html" title="Google::Cloud::Storage::Notification (class)">Notification</a></span></span><span class='period'>.</span><span class='id identifier rubyid_from_gapi'>from_gapi</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_gapi_object'>gapi_object</span><span class='comma'>,</span> <span class='id identifier rubyid_service'>service</span><span class='comma'>,</span>
                           <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="policy-instance_method">
  
    #<strong>policy</strong>(force: nil) {|policy| ... } &#x21d2; <tt><span class='object_link'><a href="Policy.html" title="Google::Cloud::Storage::Policy (class)">Policy</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Gets and updates the <a href="https://cloud.google.com/iam/">Cloud IAM</a> access
control policy for this bucket.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_policy'>policy</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_policy'>policy</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Retrieve the latest policy and update it in a block:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_policy'>policy</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span>
  <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>roles/owner</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>user:owner@example.com</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>force</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>[Deprecated] Force the latest policy to be
retrieved from the Storage service when <code>true</code>. Deprecated because
the latest policy is now always retrieved. The default is <code>nil</code>.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="#policy-instance_method" title="Google::Cloud::Storage::Bucket#policy (method)">policy</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A block for updating the policy. The latest policy
will be read from the service and passed to the block. After the
block completes, the modified policy will be written to the service.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>policy</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Policy.html" title="Google::Cloud::Storage::Policy (class)">Policy</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the current Cloud IAM Policy for this
bucket</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Policy.html" title="Google::Cloud::Storage::Policy (class)">Policy</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the current Cloud IAM Policy for this bucket</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/iam/docs/managing-policies" target="_parent" title="Managing Policies">Managing Policies</a></li>
    
      <li><a href="https://cloud.google.com/storage/docs/json_api/v1/buckets/setIamPolicy" target="_parent" title="Buckets: setIamPolicy">Buckets: setIamPolicy</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1266
1267
1268
1269
1270
1271
1272
1273
1274</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 1266</span>

<span class='kw'>def</span> <span class='id identifier rubyid_policy'>policy</span> <span class='label'>force:</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DEPRECATED: &#39;force&#39; in Bucket#policy</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_force'>force</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_ensure_service!'>ensure_service!</span>
  <span class='id identifier rubyid_gapi'>gapi</span> <span class='op'>=</span> <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_get_bucket_policy'>get_bucket_policy</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span>
  <span class='id identifier rubyid_policy'>policy</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Policy.html" title="Google::Cloud::Storage::Policy (class)">Policy</a></span></span><span class='period'>.</span><span class='id identifier rubyid_from_gapi'>from_gapi</span> <span class='id identifier rubyid_gapi'>gapi</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_policy'>policy</span> <span class='kw'>unless</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='kw'>yield</span> <span class='id identifier rubyid_policy'>policy</span>
  <span class='id identifier rubyid_update_policy'>update_policy</span> <span class='id identifier rubyid_policy'>policy</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="post_object-instance_method">
  
    #<strong>post_object</strong>(path, policy: nil, issuer: nil, client_email: nil, signing_key: nil, private_key: nil)  &#x21d2; <tt><span class='object_link'><a href="PostObject.html" title="Google::Cloud::Storage::PostObject (class)">PostObject</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Generate a PostObject that includes the fields and url to
upload objects via html forms.</p>

<p>Generating a PostObject requires service account credentials,
either by connecting with a service account when calling
<span class='object_link'><a href="../../Cloud.html#storage-class_method" title="Google::Cloud.storage (method)">Google::Cloud.storage</a></span>, or by passing in the service account
<code>issuer</code> and <code>signing_key</code> values. Although the private key can
be passed as a string for convenience, creating and storing
an instance of # <code>OpenSSL::PKey::RSA</code> is more efficient
when making multiple calls to <code>post_object</code>.</p>

<p>A <span class='object_link'><a href="SignedUrlUnavailable.html" title="Google::Cloud::Storage::SignedUrlUnavailable (class)">SignedUrlUnavailable</a></span> is raised if the service account credentials
are missing. Service account credentials are acquired by following the
steps in <a href="https://cloud.google.com/storage/docs/authentication#service_accounts">Service Account Authentication</a>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_post'>post</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_post_object'>post_object</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>avatars/heidi/400x400.png</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_post'>post</span><span class='period'>.</span><span class='id identifier rubyid_url'>url</span> <span class='comment'>#=&gt; &quot;https://storage.googleapis.com&quot;
</span><span class='id identifier rubyid_post'>post</span><span class='period'>.</span><span class='id identifier rubyid_fields'>fields</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span> <span class='comment'>#=&gt; &quot;my-todo-app/avatars/heidi/400x400.png&quot;
</span><span class='id identifier rubyid_post'>post</span><span class='period'>.</span><span class='id identifier rubyid_fields'>fields</span><span class='lbracket'>[</span><span class='symbol'>:GoogleAccessId</span><span class='rbracket'>]</span> <span class='comment'>#=&gt; &quot;0123456789@gserviceaccount.com&quot;
</span><span class='id identifier rubyid_post'>post</span><span class='period'>.</span><span class='id identifier rubyid_fields'>fields</span><span class='lbracket'>[</span><span class='symbol'>:signature</span><span class='rbracket'>]</span> <span class='comment'>#=&gt; &quot;ABC...XYZ=&quot;
</span><span class='id identifier rubyid_post'>post</span><span class='period'>.</span><span class='id identifier rubyid_fields'>fields</span><span class='lbracket'>[</span><span class='symbol'>:policy</span><span class='rbracket'>]</span> <span class='comment'>#=&gt; &quot;ABC...XYZ=&quot;</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Using a policy to define the upload authorization:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_policy'>policy</span> <span class='op'>=</span> <span class='lbrace'>{</span>
  <span class='label'>expiration:</span> <span class='lparen'>(</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span> <span class='op'>+</span> <span class='int'>3600</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_iso8601'>iso8601</span><span class='comma'>,</span>
  <span class='label'>conditions:</span> <span class='lbracket'>[</span>
    <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>starts-with</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$key</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='label'>acl:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bucket-owner-read</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='label'>bucket:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>travel-maps</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbrace'>{</span><span class='label'>success_action_redirect:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://example.com/success.html</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>eq</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$Content-Type</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>image/jpeg</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>content-length-range</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1000000</span><span class='rbracket'>]</span>
  <span class='rbracket'>]</span>
<span class='rbrace'>}</span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_post'>post</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_post_object'>post_object</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>avatars/heidi/400x400.png</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                           <span class='label'>policy:</span> <span class='id identifier rubyid_policy'>policy</span>

<span class='id identifier rubyid_post'>post</span><span class='period'>.</span><span class='id identifier rubyid_url'>url</span> <span class='comment'>#=&gt; &quot;https://storage.googleapis.com&quot;
</span><span class='id identifier rubyid_post'>post</span><span class='period'>.</span><span class='id identifier rubyid_fields'>fields</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span> <span class='comment'>#=&gt; &quot;my-todo-app/avatars/heidi/400x400.png&quot;
</span><span class='id identifier rubyid_post'>post</span><span class='period'>.</span><span class='id identifier rubyid_fields'>fields</span><span class='lbracket'>[</span><span class='symbol'>:GoogleAccessId</span><span class='rbracket'>]</span> <span class='comment'>#=&gt; &quot;0123456789@gserviceaccount.com&quot;
</span><span class='id identifier rubyid_post'>post</span><span class='period'>.</span><span class='id identifier rubyid_fields'>fields</span><span class='lbracket'>[</span><span class='symbol'>:signature</span><span class='rbracket'>]</span> <span class='comment'>#=&gt; &quot;ABC...XYZ=&quot;
</span><span class='id identifier rubyid_post'>post</span><span class='period'>.</span><span class='id identifier rubyid_fields'>fields</span><span class='lbracket'>[</span><span class='symbol'>:policy</span><span class='rbracket'>]</span> <span class='comment'>#=&gt; &quot;ABC...XYZ=&quot;</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Using the issuer and signing_key options:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>PKey</span><span class='op'>::</span><span class='const'>RSA</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_post'>post</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_post_object'>post_object</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>avatars/heidi/400x400.png</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                          <span class='label'>issuer:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>service-account@gcloud.com</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                          <span class='label'>signing_key:</span> <span class='id identifier rubyid_key'>key</span>

<span class='id identifier rubyid_post'>post</span><span class='period'>.</span><span class='id identifier rubyid_url'>url</span> <span class='comment'>#=&gt; &quot;https://storage.googleapis.com&quot;
</span><span class='id identifier rubyid_post'>post</span><span class='period'>.</span><span class='id identifier rubyid_fields'>fields</span><span class='lbracket'>[</span><span class='symbol'>:key</span><span class='rbracket'>]</span> <span class='comment'>#=&gt; &quot;my-todo-app/avatars/heidi/400x400.png&quot;
</span><span class='id identifier rubyid_post'>post</span><span class='period'>.</span><span class='id identifier rubyid_fields'>fields</span><span class='lbracket'>[</span><span class='symbol'>:GoogleAccessId</span><span class='rbracket'>]</span> <span class='comment'>#=&gt; &quot;0123456789@gserviceaccount.com&quot;
</span><span class='id identifier rubyid_post'>post</span><span class='period'>.</span><span class='id identifier rubyid_fields'>fields</span><span class='lbracket'>[</span><span class='symbol'>:signature</span><span class='rbracket'>]</span> <span class='comment'>#=&gt; &quot;ABC...XYZ=&quot;
</span><span class='id identifier rubyid_post'>post</span><span class='period'>.</span><span class='id identifier rubyid_fields'>fields</span><span class='lbracket'>[</span><span class='symbol'>:policy</span><span class='rbracket'>]</span> <span class='comment'>#=&gt; &quot;ABC...XYZ=&quot;</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Path to the file in Google Cloud Storage.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>policy</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The security policy that describes what
can and cannot be uploaded in the form. When provided,
the PostObject fields will include a Signature based on the JSON
representation of this Hash and the same policy in Base64 format.
If you do not provide a security policy, requests are considered
to be anonymous and will only work with buckets that have granted
WRITE or FULL_CONTROL permission to anonymous users.
See <a href="https://cloud.google.com/storage/docs/xml-api/post-object#policydocument">Policy Document</a>
for more information.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>issuer</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Service Account&#39;s Client Email.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>client_email</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Service Account&#39;s Client Email.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>signing_key</span>
      
      
        <span class='type'>(<tt>OpenSSL::PKey::RSA</tt>, <tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Service Account&#39;s
Private Key.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>private_key</span>
      
      
        <span class='type'>(<tt>OpenSSL::PKey::RSA</tt>, <tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Service Account&#39;s
Private Key.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="PostObject.html" title="Google::Cloud::Storage::PostObject (class)">PostObject</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/storage/docs/xml-api/post-object" target="_parent" title="https://cloud.google.com/storage/docs/xml-api/post-object">https://cloud.google.com/storage/docs/xml-api/post-object</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1127
1128
1129
1130
1131
1132
1133
1134
1135
1136</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 1127</span>

<span class='kw'>def</span> <span class='id identifier rubyid_post_object'>post_object</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='label'>policy:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>issuer:</span> <span class='kw'>nil</span><span class='comma'>,</span>
                <span class='label'>client_email:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>signing_key:</span> <span class='kw'>nil</span><span class='comma'>,</span>
                <span class='label'>private_key:</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_ensure_service!'>ensure_service!</span>

  <span class='id identifier rubyid_signer'>signer</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="File.html" title="Google::Cloud::Storage::File (class)">File</a></span></span><span class='op'>::</span><span class='const'>Signer</span><span class='period'>.</span><span class='id identifier rubyid_from_bucket'>from_bucket</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span>
  <span class='id identifier rubyid_signer'>signer</span><span class='period'>.</span><span class='id identifier rubyid_post_object'>post_object</span> <span class='label'>issuer:</span> <span class='id identifier rubyid_issuer'>issuer</span><span class='comma'>,</span> <span class='label'>client_email:</span> <span class='id identifier rubyid_client_email'>client_email</span><span class='comma'>,</span>
                     <span class='label'>signing_key:</span> <span class='id identifier rubyid_signing_key'>signing_key</span><span class='comma'>,</span> <span class='label'>private_key:</span> <span class='id identifier rubyid_private_key'>private_key</span><span class='comma'>,</span>
                     <span class='label'>policy:</span> <span class='id identifier rubyid_policy'>policy</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reload!-instance_method">
  
    #<strong>reload!</strong>  &#x21d2; <tt>Object</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='refresh!-instance_method'>refresh!</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Reloads the bucket with current data from the Storage service.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1493
1494
1495
1496
1497
1498
1499</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 1493</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reload!'>reload!</span>
  <span class='id identifier rubyid_ensure_service!'>ensure_service!</span>
  <span class='ivar'>@gapi</span> <span class='op'>=</span> <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_get_bucket'>get_bucket</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span>
  <span class='comment'># If NotFound then lazy will never be unset
</span>  <span class='ivar'>@lazy</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="requester_pays-instance_method">
  
    #<strong>requester_pays</strong>  &#x21d2; <tt>Boolean</tt><sup>?</sup> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='requester_pays?-instance_method'>requester_pays?</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Indicates that a client accessing the bucket or a file it contains
must assume the transit costs related to the access. The requester
must pass the <code>user_project</code> option to <span class='object_link'><a href="Project.html#bucket-instance_method" title="Google::Cloud::Storage::Project#bucket (method)">Project#bucket</a></span> and
<span class='object_link'><a href="Project.html#buckets-instance_method" title="Google::Cloud::Storage::Project#buckets (method)">Project#buckets</a></span> to indicate the project to which the access costs
should be billed.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Returns <code>true</code> if requester pays is enabled for
the bucket.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


349
350
351</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 349</span>

<span class='kw'>def</span> <span class='id identifier rubyid_requester_pays'>requester_pays</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_billing'>billing</span><span class='period'>.</span><span class='id identifier rubyid_requester_pays'>requester_pays</span> <span class='kw'>if</span> <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_billing'>billing</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="requester_pays=-instance_method">
  
    #<strong>requester_pays=</strong>(new_requester_pays)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Enables requester pays for the bucket. If enabled, a client accessing
the bucket or a file it contains must assume the transit costs related
to the access. The requester must pass the <code>user_project</code> option to
<span class='object_link'><a href="Project.html#bucket-instance_method" title="Google::Cloud::Storage::Project#bucket (method)">Project#bucket</a></span> and <span class='object_link'><a href="Project.html#buckets-instance_method" title="Google::Cloud::Storage::Project#buckets (method)">Project#buckets</a></span> to indicate the project to
which the access costs should be billed.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Enable requester pays for a bucket:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_requester_pays'>requester_pays</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='comment'># API call
</span><span class='comment'># Other projects must now provide `user_project` option when calling
</span><span class='comment'># Project#bucket or Project#buckets to access this bucket.</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>new_requester_pays</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When set to <code>true</code>, requester pays
is enabled for the bucket.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


375
376
377
378
379</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 375</span>

<span class='kw'>def</span> <span class='id identifier rubyid_requester_pays='>requester_pays=</span> <span class='id identifier rubyid_new_requester_pays'>new_requester_pays</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_billing'>billing</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Apis.html" title="Google::Apis (module)">Apis</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Apis/StorageV1.html" title="Google::Apis::StorageV1 (module)">StorageV1</a></span></span><span class='op'>::</span><span class='const'>Bucket</span><span class='op'>::</span><span class='const'>Billing</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_billing'>billing</span><span class='period'>.</span><span class='id identifier rubyid_requester_pays'>requester_pays</span> <span class='op'>=</span> <span class='id identifier rubyid_new_requester_pays'>new_requester_pays</span>
  <span class='id identifier rubyid_patch_gapi!'>patch_gapi!</span> <span class='symbol'>:billing</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="signed_url-instance_method">
  
    #<strong>signed_url</strong>(path, method: nil, expires: nil, content_type: nil, content_md5: nil, headers: nil, issuer: nil, client_email: nil, signing_key: nil, private_key: nil, query: nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Access without authentication can be granted to a File for a specified
period of time. This URL uses a cryptographic signature of your
credentials to access the file identified by <code>path</code>. A URL can be
created for paths that do not yet exist. For instance, a URL can be
created to <code>PUT</code> file contents to.</p>

<p>Generating a URL requires service account credentials, either by
connecting with a service account when calling
<span class='object_link'><a href="../../Cloud.html#storage-class_method" title="Google::Cloud.storage (method)">Google::Cloud.storage</a></span>, or by passing in the service account <code>issuer</code>
and <code>signing_key</code> values. Although the private key can be passed as a
string for convenience, creating and storing an instance of
<code>OpenSSL::PKey::RSA</code> is more efficient when making multiple calls to
<code>signed_url</code>.</p>

<p>A <span class='object_link'><a href="SignedUrlUnavailable.html" title="Google::Cloud::Storage::SignedUrlUnavailable (class)">SignedUrlUnavailable</a></span> is raised if the service account credentials
are missing. Service account credentials are acquired by following the
steps in <a href="https://cloud.google.com/storage/docs/authentication#service_accounts">Service Account Authentication</a>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_shared_url'>shared_url</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_signed_url'>signed_url</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>avatars/heidi/400x400.png</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Any of the option parameters may be specified:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_shared_url'>shared_url</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_signed_url'>signed_url</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>avatars/heidi/400x400.png</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                               <span class='label'>method:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>PUT</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                               <span class='label'>content_type:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>image/png</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                               <span class='label'>expires:</span> <span class='int'>300</span> <span class='comment'># 5 minutes from now</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Using the issuer and signing_key options:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='period'>.</span><span class='id identifier rubyid_storage'><span class='object_link'><a href="../../Cloud.html#storage-class_method" title="Google::Cloud.storage (method)">storage</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>PKey</span><span class='op'>::</span><span class='const'>RSA</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-----BEGIN PRIVATE KEY-----\n...</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_shared_url'>shared_url</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_signed_url'>signed_url</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>avatars/heidi/400x400.png</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                               <span class='label'>issuer:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>service-account@gcloud.com</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                               <span class='label'>signing_key:</span> <span class='id identifier rubyid_key'>key</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Using the headers option:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='period'>.</span><span class='id identifier rubyid_storage'><span class='object_link'><a href="../../Cloud.html#storage-class_method" title="Google::Cloud.storage (method)">storage</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_shared_url'>shared_url</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_signed_url'>signed_url</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>avatars/heidi/400x400.png</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                               <span class='label'>headers:</span> <span class='lbrace'>{</span>
                                 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-goog-acl</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>private</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                                 <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-goog-meta-foo</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar,baz</span><span class='tstring_end'>&quot;</span></span>
                               <span class='rbrace'>}</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Path to the file in Google Cloud Storage.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>method</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The HTTP verb to be used with the signed URL.
Signed URLs can be used
with <code>GET</code>, <code>HEAD</code>, <code>PUT</code>, and <code>DELETE</code> requests. Default is <code>GET</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>expires</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The number of seconds until the URL expires.
Default is 300/5 minutes.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>content_type</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>When provided, the client (browser) must
send this value in the HTTP header. e.g. <code>text/plain</code></p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>content_md5</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The MD5 digest value in base64. If you
provide this in the string, the client (usually a browser) must
provide this HTTP header with this same value in its request.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>headers</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Google extension headers (custom HTTP headers
that begin with <code>x-goog-</code>) that must be included in requests that
use the signed URL.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>issuer</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Service Account&#39;s Client Email.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>client_email</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Service Account&#39;s Client Email.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>signing_key</span>
      
      
        <span class='type'>(<tt>OpenSSL::PKey::RSA</tt>, <tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Service Account&#39;s
Private Key.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>private_key</span>
      
      
        <span class='type'>(<tt>OpenSSL::PKey::RSA</tt>, <tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Service Account&#39;s
Private Key.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>query</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Query string parameters to include in the signed
URL. The given parameters are not verified by the signature.</p>

<p>Parameters such as <code>response-content-disposition</code> and
<code>response-content-type</code> can alter the behavior of the response when
using the URL, but only when the file resource is missing the
corresponding values. (These values can be permanently set using
<span class='object_link'><a href="File.html#content_disposition=-instance_method" title="Google::Cloud::Storage::File#content_disposition= (method)">File#content_disposition=</a></span> and <span class='object_link'><a href="File.html#content_type=-instance_method" title="Google::Cloud::Storage::File#content_type= (method)">File#content_type=</a></span>.)</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/storage/docs/access-control#Signed-URLs" target="_parent" title="Access Control Signed URLs guide">Access Control Signed URLs guide</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1017
1018
1019
1020
1021
1022
1023
1024
1025
1026
1027
1028
1029</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 1017</span>

<span class='kw'>def</span> <span class='id identifier rubyid_signed_url'>signed_url</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='label'>method:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>expires:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>content_type:</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='label'>content_md5:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>issuer:</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='label'>client_email:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>signing_key:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>private_key:</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='label'>query:</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_ensure_service!'>ensure_service!</span>
  <span class='id identifier rubyid_signer'>signer</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="File.html" title="Google::Cloud::Storage::File (class)">File</a></span></span><span class='op'>::</span><span class='const'>Signer</span><span class='period'>.</span><span class='id identifier rubyid_from_bucket'>from_bucket</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span>
  <span class='id identifier rubyid_signer'>signer</span><span class='period'>.</span><span class='id identifier rubyid_signed_url'>signed_url</span> <span class='label'>method:</span> <span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='label'>expires:</span> <span class='id identifier rubyid_expires'>expires</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span>
                    <span class='label'>content_type:</span> <span class='id identifier rubyid_content_type'>content_type</span><span class='comma'>,</span>
                    <span class='label'>content_md5:</span> <span class='id identifier rubyid_content_md5'>content_md5</span><span class='comma'>,</span> <span class='label'>issuer:</span> <span class='id identifier rubyid_issuer'>issuer</span><span class='comma'>,</span>
                    <span class='label'>client_email:</span> <span class='id identifier rubyid_client_email'>client_email</span><span class='comma'>,</span>
                    <span class='label'>signing_key:</span> <span class='id identifier rubyid_signing_key'>signing_key</span><span class='comma'>,</span> <span class='label'>private_key:</span> <span class='id identifier rubyid_private_key'>private_key</span><span class='comma'>,</span>
                    <span class='label'>query:</span> <span class='id identifier rubyid_query'>query</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="storage_class-instance_method">
  
    #<strong>storage_class</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The bucket&#39;s storage class. This defines how objects in the bucket are
stored and determines the SLA and the cost of storage. Values include
<code>MULTI_REGIONAL</code>, <code>REGIONAL</code>, <code>NEARLINE</code>, <code>COLDLINE</code>, and
<code>DURABLE_REDUCED_AVAILABILITY</code>.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


237
238
239</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 237</span>

<span class='kw'>def</span> <span class='id identifier rubyid_storage_class'>storage_class</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_storage_class'>storage_class</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="storage_class=-instance_method">
  
    #<strong>storage_class=</strong>(new_storage_class)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Updates the bucket&#39;s storage class. This defines how objects in the
bucket are stored and determines the SLA and the cost of storage.
Accepted values include <code>:multi_regional</code>, <code>:regional</code>, <code>:nearline</code>,
and <code>:coldline</code>, as well as the equivalent strings returned by
<span class='object_link'><a href="#storage_class-instance_method" title="Google::Cloud::Storage::Bucket#storage_class (method)">#storage_class</a></span>. For more information, see <a href="https://cloud.google.com/storage/docs/storage-classes">Storage
Classes</a>.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>new_storage_class</span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Storage class of the bucket.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


249
250
251
252</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 249</span>

<span class='kw'>def</span> <span class='id identifier rubyid_storage_class='>storage_class=</span> <span class='id identifier rubyid_new_storage_class'>new_storage_class</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_storage_class'>storage_class</span> <span class='op'>=</span> <span class='id identifier rubyid_storage_class_for'>storage_class_for</span><span class='lparen'>(</span><span class='id identifier rubyid_new_storage_class'>new_storage_class</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_patch_gapi!'>patch_gapi!</span> <span class='symbol'>:storage_class</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="test_permissions-instance_method">
  
    #<strong>test_permissions</strong>(*permissions)  &#x21d2; <tt>Array&lt;String&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Tests the specified permissions against the <a href="https://cloud.google.com/iam/">Cloud
IAM</a> access control policy.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_permissions'>permissions</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_test_permissions'>test_permissions</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>storage.buckets.get</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                                      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>storage.buckets.delete</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_permissions'>permissions</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>storage.buckets.get</span><span class='tstring_end'>&quot;</span></span>    <span class='comment'>#=&gt; true
</span><span class='id identifier rubyid_permissions'>permissions</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>storage.buckets.delete</span><span class='tstring_end'>&quot;</span></span> <span class='comment'>#=&gt; false</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>permissions</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The set of permissions
against which to check access. Permissions must be of the format
<code>storage.resource.capability</code>, where resource is one of <code>buckets</code> or
<code>objects</code>.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The permissions held by the caller.</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/iam/docs/managing-policies" target="_parent" title="Managing Policies">Managing Policies</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1342
1343
1344
1345
1346
1347
1348</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 1342</span>

<span class='kw'>def</span> <span class='id identifier rubyid_test_permissions'>test_permissions</span> <span class='op'>*</span><span class='id identifier rubyid_permissions'>permissions</span>
  <span class='id identifier rubyid_permissions'>permissions</span> <span class='op'>=</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='id identifier rubyid_permissions'>permissions</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span>
  <span class='id identifier rubyid_ensure_service!'>ensure_service!</span>
  <span class='id identifier rubyid_gapi'>gapi</span> <span class='op'>=</span> <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_test_bucket_permissions'>test_bucket_permissions</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_permissions'>permissions</span><span class='comma'>,</span>
                                         <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span>
  <span class='id identifier rubyid_gapi'>gapi</span><span class='period'>.</span><span class='id identifier rubyid_permissions'>permissions</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update-instance_method">
  
    #<strong>update</strong> {|bucket| ... } &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Updates the bucket with changes made in the given block in a single
PATCH request. The following attributes may be set: <span class='object_link'><a href="#cors-instance_method" title="Google::Cloud::Storage::Bucket#cors (method)">#cors</a></span>,
<span class='object_link'><a href="#logging_bucket=-instance_method" title="Google::Cloud::Storage::Bucket#logging_bucket= (method)">#logging_bucket=</a></span>, <span class='object_link'><a href="#logging_prefix=-instance_method" title="Google::Cloud::Storage::Bucket#logging_prefix= (method)">#logging_prefix=</a></span>, <span class='object_link'><a href="#versioning=-instance_method" title="Google::Cloud::Storage::Bucket#versioning= (method)">#versioning=</a></span>,
<span class='object_link'><a href="#website_main=-instance_method" title="Google::Cloud::Storage::Bucket#website_main= (method)">#website_main=</a></span>, <span class='object_link'><a href="#website_404=-instance_method" title="Google::Cloud::Storage::Bucket#website_404= (method)">#website_404=</a></span>, and <span class='object_link'><a href="#requester_pays=-instance_method" title="Google::Cloud::Storage::Bucket#requester_pays= (method)">#requester_pays=</a></span>.</p>

<p>In addition, the #cors configuration accessible in the block is
completely mutable and will be included in the request. (See
<span class='object_link'><a href="Bucket/Cors.html" title="Google::Cloud::Storage::Bucket::Cors (class)">Cors</a></span>)</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
  <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_website_main'>website_main</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>index.html</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_website_404'>website_404</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>not_found.html</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_cors'>cors</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_methods'>methods</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GET</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>POST</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DELETE</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_cors'>cors</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_headers'>headers</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>X-Another-Custom-Header</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>New CORS rules can also be added in a nested block:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>
<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_b'>b</span><span class='op'>|</span>
  <span class='id identifier rubyid_b'>b</span><span class='period'>.</span><span class='id identifier rubyid_cors'>cors</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span>
    <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_add_rule'>add_rule</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://example.org</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>https://example.org</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
               <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
               <span class='label'>headers:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>X-My-Custom-Header</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
               <span class='label'>max_age:</span> <span class='int'>300</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
  </div>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>bucket</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>a block yielding a delegate object for updating the
file</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


470
471
472
473
474
475
476
477</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 470</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update'>update</span>
  <span class='id identifier rubyid_updater'>updater</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Bucket/Updater.html" title="Google::Cloud::Storage::Bucket::Updater (class)">Updater</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Bucket/Updater.html#initialize-instance_method" title="Google::Cloud::Storage::Bucket::Updater#initialize (method)">new</a></span></span> <span class='ivar'>@gapi</span>
  <span class='kw'>yield</span> <span class='id identifier rubyid_updater'>updater</span>
  <span class='comment'># Add check for mutable cors
</span>  <span class='id identifier rubyid_updater'>updater</span><span class='period'>.</span><span class='id identifier rubyid_check_for_changed_labels!'>check_for_changed_labels!</span>
  <span class='id identifier rubyid_updater'>updater</span><span class='period'>.</span><span class='id identifier rubyid_check_for_mutable_cors!'>check_for_mutable_cors!</span>
  <span class='id identifier rubyid_patch_gapi!'>patch_gapi!</span> <span class='id identifier rubyid_updater'>updater</span><span class='period'>.</span><span class='id identifier rubyid_updates'>updates</span> <span class='kw'>unless</span> <span class='id identifier rubyid_updater'>updater</span><span class='period'>.</span><span class='id identifier rubyid_updates'>updates</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_policy-instance_method">
  
    #<strong>update_policy</strong>(new_policy)  &#x21d2; <tt><span class='object_link'><a href="Policy.html" title="Google::Cloud::Storage::Policy (class)">Policy</a></span></tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='policy=-instance_method'>policy=</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Updates the <a href="https://cloud.google.com/iam/">Cloud IAM</a> access control
policy for this bucket. The policy should be read from <span class='object_link'><a href="#policy-instance_method" title="Google::Cloud::Storage::Bucket#policy (method)">#policy</a></span>. See
<span class='object_link'><a href="Policy.html" title="Google::Cloud::Storage::Policy (class)">Policy</a></span> for an explanation of the
policy <code>etag</code> property and how to modify policies.</p>

<p>You can also update the policy by passing a block to <span class='object_link'><a href="#policy-instance_method" title="Google::Cloud::Storage::Bucket#policy (method)">#policy</a></span>, which
will call this method internally after the block completes.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_policy'>policy</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_policy'>policy</span> <span class='comment'># API call
</span>
<span class='id identifier rubyid_policy'>policy</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>roles/owner</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>user:owner@example.com</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_update_policy'>update_policy</span> <span class='id identifier rubyid_policy'>policy</span> <span class='comment'># API call</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>new_policy</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Policy.html" title="Google::Cloud::Storage::Policy (class)">Policy</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>a new or modified Cloud IAM Policy for this
bucket</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Policy.html" title="Google::Cloud::Storage::Policy (class)">Policy</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The policy returned by the API update operation.</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/iam/docs/managing-policies" target="_parent" title="Managing Policies">Managing Policies</a></li>
    
      <li><a href="https://cloud.google.com/storage/docs/json_api/v1/buckets/setIamPolicy" target="_parent" title="Buckets: setIamPolicy">Buckets: setIamPolicy</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1308
1309
1310
1311
1312
1313</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 1308</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_policy'>update_policy</span> <span class='id identifier rubyid_new_policy'>new_policy</span>
  <span class='id identifier rubyid_ensure_service!'>ensure_service!</span>
  <span class='id identifier rubyid_gapi'>gapi</span> <span class='op'>=</span> <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_set_bucket_policy'>set_bucket_policy</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_new_policy'>new_policy</span><span class='period'>.</span><span class='id identifier rubyid_to_gapi'>to_gapi</span><span class='comma'>,</span>
                                   <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span>
  <span class='const'><span class='object_link'><a href="Policy.html" title="Google::Cloud::Storage::Policy (class)">Policy</a></span></span><span class='period'>.</span><span class='id identifier rubyid_from_gapi'>from_gapi</span> <span class='id identifier rubyid_gapi'>gapi</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="versioning=-instance_method">
  
    #<strong>versioning=</strong>(new_versioning)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Updates whether <a href="https://cloud.google.com/storage/docs/object-versioning">Object
Versioning</a>
is enabled for the bucket.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


269
270
271
272
273</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 269</span>

<span class='kw'>def</span> <span class='id identifier rubyid_versioning='>versioning=</span> <span class='id identifier rubyid_new_versioning'>new_versioning</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_versioning'>versioning</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Apis.html" title="Google::Apis (module)">Apis</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Apis/StorageV1.html" title="Google::Apis::StorageV1 (module)">StorageV1</a></span></span><span class='op'>::</span><span class='const'>Bucket</span><span class='op'>::</span><span class='const'>Versioning</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_versioning'>versioning</span><span class='period'>.</span><span class='id identifier rubyid_enabled'>enabled</span> <span class='op'>=</span> <span class='id identifier rubyid_new_versioning'>new_versioning</span>
  <span class='id identifier rubyid_patch_gapi!'>patch_gapi!</span> <span class='symbol'>:versioning</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="versioning?-instance_method">
  
    #<strong>versioning?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Whether <a href="https://cloud.google.com/storage/docs/object-versioning">Object
Versioning</a>
is enabled for the bucket.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


258
259
260</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 258</span>

<span class='kw'>def</span> <span class='id identifier rubyid_versioning?'>versioning?</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_versioning'>versioning</span><span class='period'>.</span><span class='id identifier rubyid_enabled?'>enabled?</span> <span class='kw'>unless</span> <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_versioning'>versioning</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="website_404-instance_method">
  
    #<strong>website_404</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The page returned from a static website served from the bucket when a
site visitor requests a resource that does not exist.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/storage/docs/website-configuration#step4" target="_parent" title="How to Host a Static Website">How to Host a Static Website</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


306
307
308</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 306</span>

<span class='kw'>def</span> <span class='id identifier rubyid_website_404'>website_404</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_website'>website</span><span class='period'>.</span><span class='id identifier rubyid_not_found_page'>not_found_page</span> <span class='kw'>if</span> <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_website'>website</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="website_404=-instance_method">
  
    #<strong>website_404=</strong>(website_404)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Updates the page returned from a static website served from the bucket
when a site visitor requests a resource that does not exist.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/storage/docs/website-configuration#step4" target="_parent" title="How to Host a Static Website">How to Host a Static Website</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


333
334
335
336
337</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 333</span>

<span class='kw'>def</span> <span class='id identifier rubyid_website_404='>website_404=</span> <span class='id identifier rubyid_website_404'>website_404</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_website'>website</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Apis.html" title="Google::Apis (module)">Apis</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Apis/StorageV1.html" title="Google::Apis::StorageV1 (module)">StorageV1</a></span></span><span class='op'>::</span><span class='const'>Bucket</span><span class='op'>::</span><span class='const'>Website</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_website'>website</span><span class='period'>.</span><span class='id identifier rubyid_not_found_page'>not_found_page</span> <span class='op'>=</span> <span class='id identifier rubyid_website_404'>website_404</span>
  <span class='id identifier rubyid_patch_gapi!'>patch_gapi!</span> <span class='symbol'>:website</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="website_main-instance_method">
  
    #<strong>website_main</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The index page returned from a static website served from the bucket
when a site visitor requests the top level directory.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/storage/docs/website-configuration#step4" target="_parent" title="How to Host a Static Website">How to Host a Static Website</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


282
283
284</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 282</span>

<span class='kw'>def</span> <span class='id identifier rubyid_website_main'>website_main</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_website'>website</span><span class='period'>.</span><span class='id identifier rubyid_main_page_suffix'>main_page_suffix</span> <span class='kw'>if</span> <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_website'>website</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="website_main=-instance_method">
  
    #<strong>website_main=</strong>(website_main)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Updates the index page returned from a static website served from the
bucket when a site visitor requests the top level directory.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/storage/docs/website-configuration#step4" target="_parent" title="How to Host a Static Website">How to Host a Static Website</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


293
294
295
296
297</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/bucket.rb', line 293</span>

<span class='kw'>def</span> <span class='id identifier rubyid_website_main='>website_main=</span> <span class='id identifier rubyid_website_main'>website_main</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_website'>website</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Apis.html" title="Google::Apis (module)">Apis</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Apis/StorageV1.html" title="Google::Apis::StorageV1 (module)">StorageV1</a></span></span><span class='op'>::</span><span class='const'>Bucket</span><span class='op'>::</span><span class='const'>Website</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_website'>website</span><span class='period'>.</span><span class='id identifier rubyid_main_page_suffix'>main_page_suffix</span> <span class='op'>=</span> <span class='id identifier rubyid_website_main'>website_main</span>
  <span class='id identifier rubyid_patch_gapi!'>patch_gapi!</span> <span class='symbol'>:website</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

  <div id="footer">
  <ul class="footer-links">
    <li>
      <a href="https://github.com/GoogleCloudPlatform/google-cloud-ruby" title="Google Cloud on Github">
        <img src="/google-cloud-ruby/img/icon-link-github.svg" alt="GitHub icon"> GitHub
      </a>
    </li>
    <li>
      <a href="https://github.com/GoogleCloudPlatform/google-cloud-ruby/issues" title="Google Cloud issues on Github">
        <img src="/google-cloud-ruby/img/icon-link-github.svg" alt="GitHub icon"> Issues
      </a>
    </li>
    <li>
      <a href="http://stackoverflow.com/questions/tagged/google-cloud-ruby" title="Google Cloud on StackOverflow">
      <img src="/google-cloud-ruby/img/icon-link-stackoverflow.svg" alt="StackOverflow icon"> StackOverflow
    </a>
    </li>
    <li>
      <a href="http://rubygems.org/gems/google-cloud" title="Google Cloud on RubyGems">
        <img src="/google-cloud-ruby/img/icon-link-package-manager.svg" alt="RubyGems icon"> RubyGems
      </a>
    </li>
  </ul>

  <p>
    Documentation generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool">yard</a>.
  </p>
</div>

</div>
