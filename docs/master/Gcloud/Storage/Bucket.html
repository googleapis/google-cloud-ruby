<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <title>Gcloud::Storage::Bucket &mdash; Gcloud Documentation</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="//googlecloudplatform.github.io/gcloud-ruby/css/normalize.css">
    <link rel="stylesheet" href="//googlecloudplatform.github.io/gcloud-ruby/css/main.css">
    <script src="//googlecloudplatform.github.io/gcloud-ruby/js/vendor/modernizr-2.6.2.min.js"></script>
    <link href='//fonts.googleapis.com/css?family=Droid+Sans+Mono|Roboto:300,400,700,700italic,400italic|Open+Sans:300' rel='stylesheet' type='text/css'>
    <link rel="shortcut icon" href="https://cloud.google.com/images/gcp-favicon.ico">
  </head>

  <body class="lang-page">
    <!--[if lt IE 7]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

    <header class="page-header fixed" role="banner">
      <h1 class="logo">
        <a href="//googlecloudplatform.github.io/gcloud-ruby/" title="back to home">
          <img src="//googlecloudplatform.github.io/gcloud-ruby/img/logo.svg" alt="Google Cloud Platform">
          <span class="gcloud">gcloud</span>
        </a>
      </h1>

      <nav class="main-nav">
        <div class="nav-current">Ruby</div>
        <ul class="menu">
          <li>
            <a href="//googlecloudplatform.github.io/gcloud-java/" title="gcloud-java">
              <img src="//googlecloudplatform.github.io/gcloud-ruby/img/icon-lang-java.svg" alt="Java icon" class="menu-icon" />
              Java
            </a>
          </li>
          <li>
            <a href="//googlecloudplatform.github.io/gcloud-node/#/docs" title="gcloud-node">
              <img src="//googlecloudplatform.github.io/gcloud-ruby/img/icon-lang-nodejs.svg" alt="Node.js icon" class="menu-icon">
              Node.js
            </a>
          </li>
          <li>
            <a href="//googlecloudplatform.github.io/gcloud-python/latest/" title="gcloud-python">
              <img src="//googlecloudplatform.github.io/gcloud-ruby/img/icon-lang-python.svg" alt="Python icon" class="menu-icon">
              Python
            </a>
          </li>
          <li>
            <a href="//googlecloudplatform.github.io/gcloud-ruby/" title="gcloud-ruby">
              <img src="//googlecloudplatform.github.io/gcloud-ruby/img/icon-lang-ruby.svg" alt="Ruby icon" class="menu-icon" width="24">
              Ruby
            </a>
          </li>
        </ul>
      </nav>

      <div class="github-issue">
        <a href="https://github.com/GoogleCloudPlatform/gcloud-ruby/issues/new?title=%5BDocumentation+Issue%5D+" target="_blank" class="v-btn">
          <img src="//googlecloudplatform.github.io/gcloud-ruby/img/icon-link-github.svg" />
          Report an Issue
        </a>
      </div>
    </header>

    <article class="main lang-page" role="main">

      <header class="docs-header">
        <h1 class="page-title">Gcloud::Storage::Bucket</h1>
      </header>

      <section class="content">

        <div id="description" class="description">
          <h1 id="bucket">Bucket</h1>

<p>Represents a Storage bucket. Belongs to a Project and has many Files.</p>

        </div>

        <div class="section-links">
          
            <div>Parent: Object</div>
          

          
          

          
            <div>
              Instance Methods

              
                <span class='object_link'><a href="#kind-instance_method" title="Gcloud::Storage::Bucket#kind (method)">#kind</a></span>
              
                <span class='object_link'><a href="#id-instance_method" title="Gcloud::Storage::Bucket#id (method)">#id</a></span>
              
                <span class='object_link'><a href="#name-instance_method" title="Gcloud::Storage::Bucket#name (method)">#name</a></span>
              
                <span class='object_link'><a href="#api_url-instance_method" title="Gcloud::Storage::Bucket#api_url (method)">#api_url</a></span>
              
                <span class='object_link'><a href="#created_at-instance_method" title="Gcloud::Storage::Bucket#created_at (method)">#created_at</a></span>
              
                <span class='object_link'><a href="#cors-instance_method" title="Gcloud::Storage::Bucket#cors (method)">#cors</a></span>
              
                <span class='object_link'><a href="#cors%3D-instance_method" title="Gcloud::Storage::Bucket#cors= (method)">#cors=</a></span>
              
                <span class='object_link'><a href="#location-instance_method" title="Gcloud::Storage::Bucket#location (method)">#location</a></span>
              
                <span class='object_link'><a href="#logging_bucket-instance_method" title="Gcloud::Storage::Bucket#logging_bucket (method)">#logging_bucket</a></span>
              
                <span class='object_link'><a href="#logging_bucket%3D-instance_method" title="Gcloud::Storage::Bucket#logging_bucket= (method)">#logging_bucket=</a></span>
              
                <span class='object_link'><a href="#logging_prefix-instance_method" title="Gcloud::Storage::Bucket#logging_prefix (method)">#logging_prefix</a></span>
              
                <span class='object_link'><a href="#logging_prefix%3D-instance_method" title="Gcloud::Storage::Bucket#logging_prefix= (method)">#logging_prefix=</a></span>
              
                <span class='object_link'><a href="#storage_class-instance_method" title="Gcloud::Storage::Bucket#storage_class (method)">#storage_class</a></span>
              
                <span class='object_link'><a href="#versioning%3F-instance_method" title="Gcloud::Storage::Bucket#versioning? (method)">#versioning?</a></span>
              
                <span class='object_link'><a href="#versioning%3D-instance_method" title="Gcloud::Storage::Bucket#versioning= (method)">#versioning=</a></span>
              
                <span class='object_link'><a href="#website_main-instance_method" title="Gcloud::Storage::Bucket#website_main (method)">#website_main</a></span>
              
                <span class='object_link'><a href="#website_main%3D-instance_method" title="Gcloud::Storage::Bucket#website_main= (method)">#website_main=</a></span>
              
                <span class='object_link'><a href="#website_404-instance_method" title="Gcloud::Storage::Bucket#website_404 (method)">#website_404</a></span>
              
                <span class='object_link'><a href="#website_404%3D-instance_method" title="Gcloud::Storage::Bucket#website_404= (method)">#website_404=</a></span>
              
                <span class='object_link'><a href="#update-instance_method" title="Gcloud::Storage::Bucket#update (method)">#update</a></span>
              
                <span class='object_link'><a href="#delete-instance_method" title="Gcloud::Storage::Bucket#delete (method)">#delete</a></span>
              
                <span class='object_link'><a href="#files-instance_method" title="Gcloud::Storage::Bucket#files (method)">#files</a></span>
              
                <span class='object_link'><a href="#find_files-instance_method" title="Gcloud::Storage::Bucket#find_files (method)">#find_files</a></span>
              
                <span class='object_link'><a href="#file-instance_method" title="Gcloud::Storage::Bucket#file (method)">#file</a></span>
              
                <span class='object_link'><a href="#find_file-instance_method" title="Gcloud::Storage::Bucket#find_file (method)">#find_file</a></span>
              
                <span class='object_link'><a href="#create_file-instance_method" title="Gcloud::Storage::Bucket#create_file (method)">#create_file</a></span>
              
                <span class='object_link'><a href="#upload_file-instance_method" title="Gcloud::Storage::Bucket#upload_file (method)">#upload_file</a></span>
              
                <span class='object_link'><a href="#new_file-instance_method" title="Gcloud::Storage::Bucket#new_file (method)">#new_file</a></span>
              
                <span class='object_link'><a href="#acl-instance_method" title="Gcloud::Storage::Bucket#acl (method)">#acl</a></span>
              
                <span class='object_link'><a href="#default_acl-instance_method" title="Gcloud::Storage::Bucket#default_acl (method)">#default_acl</a></span>
              
                <span class='object_link'><a href="#reload%21-instance_method" title="Gcloud::Storage::Bucket#reload! (method)">#reload!</a></span>
              
                <span class='object_link'><a href="#refresh%21-instance_method" title="Gcloud::Storage::Bucket#refresh! (method)">#refresh!</a></span>
              
            </div>
          
        </div>

        
          <div id="Instance Methods-methods" class="section">
            <h3 class="section-header">Instance Methods</h3>
          </div>

          <div class="methods">
            
              <div class="method">
                <a name="kind-instance_method"></a>

                <h4>
                  <code>kind</code>
                  <span>
                    <a href="#kind-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>The kind of item this is.
For buckets, this is always <code class="highlighter-rouge">storage#bucket</code>.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="id-instance_method"></a>

                <h4>
                  <code>id</code>
                  <span>
                    <a href="#id-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>The ID of the bucket.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="name-instance_method"></a>

                <h4>
                  <code>name</code>
                  <span>
                    <a href="#name-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>The name of the bucket.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="api_url-instance_method"></a>

                <h4>
                  <code>api_url</code>
                  <span>
                    <a href="#api_url-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>A URL that can be used to access the bucket using the REST API.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="created_at-instance_method"></a>

                <h4>
                  <code>created_at</code>
                  <span>
                    <a href="#created_at-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>Creation time of the bucket.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="cors-instance_method"></a>

                <h4>
                  <code>cors</code>
                  <span>
                    <a href="#cors-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>Returns the current CORS configuration for a static website served from
the bucket.</p>

<p>The return value is a frozen (unmodifiable) array of hashes containing
the attributes specified for the Bucket resource field
<a href="https://cloud.google.com/storage/docs/json_api/v1/buckets#cors">cors</a>.</p>

<p>This method also accepts a block for updating the bucket’s CORS rules.
See <span class='object_link'><a href="Bucket/Cors.html" title="Gcloud::Storage::Bucket::Cors (class)">Cors</a></span> for details.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="cors=-instance_method"></a>

                <h4>
                  <code>cors=(new_cors)</code>
                  <span>
                    <a href="#cors=-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>Updates the CORS configuration for a static website served from the
bucket.</p>

<p>Accepts an array of hashes containing the attributes specified for the
<a href="https://cloud.google.com/storage/docs/json_api/v1/buckets#cors">resource description of
cors</a>.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="location-instance_method"></a>

                <h4>
                  <code>location</code>
                  <span>
                    <a href="#location-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>The location of the bucket.
Object data for objects in the bucket resides in physical
storage within this region. Defaults to US.
See the developer’s guide for the authoritative list.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="logging_bucket-instance_method"></a>

                <h4>
                  <code>logging_bucket</code>
                  <span>
                    <a href="#logging_bucket-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>The destination bucket name for the bucket’s logs.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="logging_bucket=-instance_method"></a>

                <h4>
                  <code>logging_bucket=(logging_bucket)</code>
                  <span>
                    <a href="#logging_bucket=-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>Updates the destination bucket for the bucket’s logs.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="logging_prefix-instance_method"></a>

                <h4>
                  <code>logging_prefix</code>
                  <span>
                    <a href="#logging_prefix-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>The logging object prefix for the bucket’s logs. For more information,</p>

                </div>
              </div>
            
              <div class="method">
                <a name="logging_prefix=-instance_method"></a>

                <h4>
                  <code>logging_prefix=(logging_prefix)</code>
                  <span>
                    <a href="#logging_prefix=-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>Updates the logging object prefix. This prefix will be used to create
log object names for the bucket. It can be at most 900 characters and
must be a <a href="https://cloud.google.com/storage/docs/bucket-naming#objectnames">valid object
name</a>.
By default, the object prefix is the name
of the bucket for which the logs are enabled.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="storage_class-instance_method"></a>

                <h4>
                  <code>storage_class</code>
                  <span>
                    <a href="#storage_class-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>The bucket’s storage class. This defines how objects in the bucket are
stored and determines the SLA and the cost of storage. Values include
<code class="highlighter-rouge">STANDARD</code>, <code class="highlighter-rouge">NEARLINE</code>, and <code class="highlighter-rouge">DURABLE_REDUCED_AVAILABILITY</code>.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="versioning?-instance_method"></a>

                <h4>
                  <code>versioning?</code>
                  <span>
                    <a href="#versioning?-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>Whether <a href="https://cloud.google.com/storage/docs/object-versioning">Object
Versioning</a> is
enabled for the bucket.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="versioning=-instance_method"></a>

                <h4>
                  <code>versioning=(new_versioning)</code>
                  <span>
                    <a href="#versioning=-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>Updates whether <a href="https://cloud.google.com/storage/docs/object-versioning">Object
Versioning</a> is
enabled for the bucket.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="website_main-instance_method"></a>

                <h4>
                  <code>website_main</code>
                  <span>
                    <a href="#website_main-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>The index page returned from a static website served from the bucket
when a site visitor requests the top level directory.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="website_main=-instance_method"></a>

                <h4>
                  <code>website_main=(website_main)</code>
                  <span>
                    <a href="#website_main=-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>Updates the index page returned from a static website served from the
bucket when a site visitor requests the top level directory.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="website_404-instance_method"></a>

                <h4>
                  <code>website_404</code>
                  <span>
                    <a href="#website_404-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>The page returned from a static website served from the bucket when a
site visitor requests a resource that does not exist.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="website_404=-instance_method"></a>

                <h4>
                  <code>website_404=(website_404)</code>
                  <span>
                    <a href="#website_404=-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>Updates the page returned from a static website served from the bucket
when a site visitor requests a resource that does not exist.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="update-instance_method"></a>

                <h4>
                  <code>update</code>
                  <span>
                    <a href="#update-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>Updates the bucket with changes made in the given block in a single
PATCH request. The following attributes may be set: <span class='object_link'><a href="#cors%3D-instance_method" title="Gcloud::Storage::Bucket#cors= (method)">#cors=</a></span>,
<span class='object_link'><a href="#logging_bucket%3D-instance_method" title="Gcloud::Storage::Bucket#logging_bucket= (method)">#logging_bucket=</a></span>, <span class='object_link'><a href="#logging_prefix%3D-instance_method" title="Gcloud::Storage::Bucket#logging_prefix= (method)">#logging_prefix=</a></span>, <span class='object_link'><a href="#versioning%3D-instance_method" title="Gcloud::Storage::Bucket#versioning= (method)">#versioning=</a></span>,
<span class='object_link'><a href="#website_main%3D-instance_method" title="Gcloud::Storage::Bucket#website_main= (method)">#website_main=</a></span>, and <span class='object_link'><a href="#website_404%3D-instance_method" title="Gcloud::Storage::Bucket#website_404= (method)">#website_404=</a></span>. In addition, the #cors
configuration accessible in the block is completely mutable and will be
included in the request. (See <span class='object_link'><a href="Bucket/Cors.html" title="Gcloud::Storage::Bucket::Cors (class)">Cors</a></span>)</p>

                </div>
              </div>
            
              <div class="method">
                <a name="delete-instance_method"></a>

                <h4>
                  <code>delete(retries: nil)</code>
                  <span>
                    <a href="#delete-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>Permanently deletes the bucket.
The bucket must be empty before it can be deleted.</p>

<p>The API call to delete the bucket may be retried under certain
conditions. See <span class='object_link'><a href="../Backoff.html" title="Gcloud::Backoff (class)">Backoff</a></span> to control this behavior, or
specify the wanted behavior using the <code class="highlighter-rouge">retries</code> option.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="files-instance_method"></a>

                <h4>
                  <code>files(prefix: nil, delimiter: nil, token: nil, max: nil, versions: nil)</code>
                  <span>
                    <a href="#files-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>Retrieves a list of files matching the criteria.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="find_files-instance_method"></a>

                <h4>
                  <code>find_files</code>
                  <span>
                    <a href="#find_files-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>Retrieves a list of files matching the criteria.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="file-instance_method"></a>

                <h4>
                  <code>file(path, generation: nil)</code>
                  <span>
                    <a href="#file-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>Retrieves a file matching the path.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="find_file-instance_method"></a>

                <h4>
                  <code>find_file</code>
                  <span>
                    <a href="#find_file-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>Retrieves a file matching the path.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="create_file-instance_method"></a>

                <h4>
                  <code>create_file(file, path = nil, acl: nil, cache_control: nil, content_disposition: nil, content_encoding: nil, content_language: nil, content_type: nil, chunk_size: nil, crc32c: nil, md5: nil, metadata: nil)</code>
                  <span>
                    <a href="#create_file-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>Create a new File object by providing a path to a local file to upload
and the path to store it with in the bucket.</p>

<p>A <code class="highlighter-rouge">chunk_size</code> value can be provided in the options to be used
in resumable uploads. This value is the number of bytes per
chunk and must be divisible by 256KB. If it is not divisible
by 256KB then it will be lowered to the nearest acceptable
value.</p>

<h4 id="troubleshooting-large-uploads">Troubleshooting large uploads</h4>

<p>You may encounter errors while attempting to upload large files. Below
are a couple of common cases and their solutions.</p>

<h5 id="handling-memory-errors">Handling memory errors</h5>

<p>If you encounter a memory error such as <code class="highlighter-rouge">NoMemoryError</code>, try performing
a resumable upload and setting the <code class="highlighter-rouge">chunk_size</code> option to a value that
works for your environment, as explained in the final example above.</p>

<h5 id="handling-broken-pipe-errors">Handling broken pipe errors</h5>

<p>To avoid broken pipe (<code class="highlighter-rouge">Errno::EPIPE</code>) errors when uploading, add the
<a href="https://rubygems.org/gems/httpclient">httpclient</a> gem to your project,
and the configuration shown below. These lines must execute after you
require gcloud but before you make your first gcloud connection. The
first statement configures <a href="https://rubygems.org/gems/faraday">Faraday</a>
to use httpclient. The second statement, which should only be added if
you are using a version of Faraday at or above 0.9.2, is a workaround
for <a href="https://github.com/GoogleCloudPlatform/gcloud-ruby/issues/367">this gzip
issue</a>.</p>

<p>require “gcloud”</p>

<p># Use httpclient to avoid broken pipe errors with large uploads
  Faraday.default_adapter = :httpclient</p>

<p># Only add the following statement if using Faraday &gt;= 0.9.2
  # Override gzip middleware with no-op for httpclient
  Faraday::Response.register_middleware :gzip =&gt;
                                          Faraday::Response::Middleware</p>

<p>gcloud = Gcloud.new
  storage = gcloud.storage</p>

                </div>
              </div>
            
              <div class="method">
                <a name="upload_file-instance_method"></a>

                <h4>
                  <code>upload_file</code>
                  <span>
                    <a href="#upload_file-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>Create a new File object by providing a path to a local file to upload
and the path to store it with in the bucket.</p>

<p>A <code class="highlighter-rouge">chunk_size</code> value can be provided in the options to be used
in resumable uploads. This value is the number of bytes per
chunk and must be divisible by 256KB. If it is not divisible
by 256KB then it will be lowered to the nearest acceptable
value.</p>

<h4 id="troubleshooting-large-uploads">Troubleshooting large uploads</h4>

<p>You may encounter errors while attempting to upload large files. Below
are a couple of common cases and their solutions.</p>

<h5 id="handling-memory-errors">Handling memory errors</h5>

<p>If you encounter a memory error such as <code class="highlighter-rouge">NoMemoryError</code>, try performing
a resumable upload and setting the <code class="highlighter-rouge">chunk_size</code> option to a value that
works for your environment, as explained in the final example above.</p>

<h5 id="handling-broken-pipe-errors">Handling broken pipe errors</h5>

<p>To avoid broken pipe (<code class="highlighter-rouge">Errno::EPIPE</code>) errors when uploading, add the
<a href="https://rubygems.org/gems/httpclient">httpclient</a> gem to your project,
and the configuration shown below. These lines must execute after you
require gcloud but before you make your first gcloud connection. The
first statement configures <a href="https://rubygems.org/gems/faraday">Faraday</a>
to use httpclient. The second statement, which should only be added if
you are using a version of Faraday at or above 0.9.2, is a workaround
for <a href="https://github.com/GoogleCloudPlatform/gcloud-ruby/issues/367">this gzip
issue</a>.</p>

<p>require “gcloud”</p>

<p># Use httpclient to avoid broken pipe errors with large uploads
  Faraday.default_adapter = :httpclient</p>

<p># Only add the following statement if using Faraday &gt;= 0.9.2
  # Override gzip middleware with no-op for httpclient
  Faraday::Response.register_middleware :gzip =&gt;
                                          Faraday::Response::Middleware</p>

<p>gcloud = Gcloud.new
  storage = gcloud.storage</p>

                </div>
              </div>
            
              <div class="method">
                <a name="new_file-instance_method"></a>

                <h4>
                  <code>new_file</code>
                  <span>
                    <a href="#new_file-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>Create a new File object by providing a path to a local file to upload
and the path to store it with in the bucket.</p>

<p>A <code class="highlighter-rouge">chunk_size</code> value can be provided in the options to be used
in resumable uploads. This value is the number of bytes per
chunk and must be divisible by 256KB. If it is not divisible
by 256KB then it will be lowered to the nearest acceptable
value.</p>

<h4 id="troubleshooting-large-uploads">Troubleshooting large uploads</h4>

<p>You may encounter errors while attempting to upload large files. Below
are a couple of common cases and their solutions.</p>

<h5 id="handling-memory-errors">Handling memory errors</h5>

<p>If you encounter a memory error such as <code class="highlighter-rouge">NoMemoryError</code>, try performing
a resumable upload and setting the <code class="highlighter-rouge">chunk_size</code> option to a value that
works for your environment, as explained in the final example above.</p>

<h5 id="handling-broken-pipe-errors">Handling broken pipe errors</h5>

<p>To avoid broken pipe (<code class="highlighter-rouge">Errno::EPIPE</code>) errors when uploading, add the
<a href="https://rubygems.org/gems/httpclient">httpclient</a> gem to your project,
and the configuration shown below. These lines must execute after you
require gcloud but before you make your first gcloud connection. The
first statement configures <a href="https://rubygems.org/gems/faraday">Faraday</a>
to use httpclient. The second statement, which should only be added if
you are using a version of Faraday at or above 0.9.2, is a workaround
for <a href="https://github.com/GoogleCloudPlatform/gcloud-ruby/issues/367">this gzip
issue</a>.</p>

<p>require “gcloud”</p>

<p># Use httpclient to avoid broken pipe errors with large uploads
  Faraday.default_adapter = :httpclient</p>

<p># Only add the following statement if using Faraday &gt;= 0.9.2
  # Override gzip middleware with no-op for httpclient
  Faraday::Response.register_middleware :gzip =&gt;
                                          Faraday::Response::Middleware</p>

<p>gcloud = Gcloud.new
  storage = gcloud.storage</p>

                </div>
              </div>
            
              <div class="method">
                <a name="acl-instance_method"></a>

                <h4>
                  <code>acl</code>
                  <span>
                    <a href="#acl-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>The Bucket::Acl instance used to control access to the bucket.</p>

<p>A bucket has owners, writers, and readers. Permissions can be granted to
an individual user’s email address, a group’s email address, as well as
many predefined lists.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="default_acl-instance_method"></a>

                <h4>
                  <code>default_acl</code>
                  <span>
                    <a href="#default_acl-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>The Bucket::DefaultAcl instance used to control access to the bucket’s
files.</p>

<p>A bucket’s files have owners, writers, and readers. Permissions can be
granted to an individual user’s email address, a group’s email address,
as well as many predefined lists.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="reload!-instance_method"></a>

                <h4>
                  <code>reload!</code>
                  <span>
                    <a href="#reload!-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>Reloads the bucket with current data from the Storage service.</p>

                </div>
              </div>
            
              <div class="method">
                <a name="refresh!-instance_method"></a>

                <h4>
                  <code>refresh!</code>
                  <span>
                    <a href="#refresh!-instance_method">&para;</a>
                    <a href="#top">&uarr;</a>
                  </span>
                </h4>

                <div class="method-description">
                  <p>Reloads the bucket with current data from the Storage service.</p>

                </div>
              </div>
            
          </div>
        
      </section>

      <nav class="side-nav">

        <div class="side-nav--meta">
          <div id="doc-build-date">
            Docs built on Jan 08, 2016.
          </div>
        </div>

        <ul>
          <h4 class="list-item--heading">Getting Started</h4>
          <li class="toc-l0"><a class="reference internal current" href="/gcloud-ruby/docs/master/index.html">Overview</a></li>

            <li class="toc-l0"><a class="reference internal" href="/gcloud-ruby/docs/master/AUTHENTICATION.html">Authentication Guide</a></li>

        </ul>

        <ul>
          <h4 class="list-item--heading">API</h4>

              <li class="toc-l0">
                <a class="reference internal" href="/gcloud-ruby/docs/master/Gcloud.html">
                  Gcloud
                </a>
              </li>


              <li class="toc-l0">
                <a class="reference internal" href="/gcloud-ruby/docs/master/Gcloud/Bigquery.html">
                  BigQuery
                </a>
              </li>


              <li class="toc-l0">
                <a class="reference internal" href="/gcloud-ruby/docs/master/Gcloud/Datastore.html">
                  Datastore
                </a>
              </li>


              <li class="toc-l0">
                <a class="reference internal" href="/gcloud-ruby/docs/master/Gcloud/Dns.html">
                  DNS
                </a>
              </li>


              <li class="toc-l0">
                <a class="reference internal" href="/gcloud-ruby/docs/master/Gcloud/Pubsub.html">
                  Pub/Sub
                </a>
              </li>


              <li class="toc-l0">
                <a class="reference internal" href="/gcloud-ruby/docs/master/Gcloud/ResourceManager.html">
                  Resource Manager
                </a>
              </li>


              <li class="toc-l0">
                <a class="reference internal" href="/gcloud-ruby/docs/master/Gcloud/Search.html">
                  Search
                </a>
              </li>


              <li class="toc-l0">
                <a class="reference internal" href="/gcloud-ruby/docs/master/Gcloud/Storage.html">
                  Storage
                </a>
              </li>


          <li class="toc-l0"><a class="reference internal" href="/gcloud-ruby/docs/master/reference.html">API Reference</a></li>
        </ul>

        <ul class="external-links">
          <li>
            <a href="https://github.com/GoogleCloudPlatform/gcloud-ruby" title="Github repository">
              <img src="//googlecloudplatform.github.io/gcloud-ruby/img/icon-link-github.svg" alt="Github icon">
              Github
            </a>
          </li>
          <li>
            <a href="https://github.com/GoogleCloudPlatform/gcloud-ruby/issues" title="Issues on Github">
              <img src="//googlecloudplatform.github.io/gcloud-ruby/img/icon-link-issues.svg" alt="Issues icon">
              Issues
            </a>
          </li>
          <li>
            <a href="http://stackoverflow.com/questions/tagged/gcloud-ruby" title="gcloud on StackOverflow">
              <img src="//googlecloudplatform.github.io/gcloud-ruby/img/icon-link-stackoverflow.svg" alt="StackOverflow icon">
              StackOverflow
            </a>
          </li>
          <li>
            <a href="http://rubygems.org/gems/gcloud" title="RubyGems" class="ext-link">
               <img src="//googlecloudplatform.github.io/gcloud-ruby/img/icon-link-rubygems.svg" alt="RubyGems icon">
              RubyGems
            </a>
          </li>
        </ul>

      </nav>

    </article>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script ="//googlecloudplatform.github.io/gcloud-ruby/js/vendor/jquery-1.10.2.min.js"><\/script>')</script>
    <script src="//googlecloudplatform.github.io/gcloud-ruby/js/plugins.js"></script>
    <script src="//googlecloudplatform.github.io/gcloud-ruby/js/main.js"></script>

    <script>
      (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
      function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
      e=o.createElement(i);r=o.getElementsByTagName(i)[0];
      e.src='//www.google-analytics.com/analytics.js';
      r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
      ga('create','UA-49880327-13');ga('send','pageview');
    </script>

  </body>
</html>
