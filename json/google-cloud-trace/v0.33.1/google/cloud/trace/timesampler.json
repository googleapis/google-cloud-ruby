{"id":"google/cloud/trace/timesampler","name":"TimeSampler","title":["Google","Cloud","Trace","TimeSampler"],"description":"<p>A sampler determines whether a given requestâ€™s latency trace should\nactually be reported. It is usually not necessary to trace every\nrequest, especially for an application serving heavy traffic. You may\nuse a sampler to decide, for a given request, whether to report its\ntrace. A sampler is simply a Proc that takes the Rack environment as an\nargument and returns a boolean indicating whether or not to sample the\ncurrent request. Alternately, it could be an object that duck-types the\nProc interface by implementing the <code>call</code> method.</p>\n\n<p>TimeSampler is the default sampler. It bases its sampling decision on\ntwo considerations:</p>\n\n<ol>\n  <li>It allows you to blacklist certain URI paths that should never be\ntraced. For example, the Google App Engine health check request\npath <code>/_ah/health</code> is blacklisted by default. Kubernetes default\nhealth check <code>/healthz</code> is also ignored.</li>\n  <li>It spaces samples out by delaying a minimum time between each\nsample. This enforces a maximum QPS for this Ruby process.</li>\n</ol>","source":"google-cloud-trace/lib/google/cloud/trace/time_sampler.rb#L38","resources":[],"examples":[],"methods":[{"id":"initialize-constructor","type":"constructor","name":"initialize","title":["Google","Cloud","Trace","TimeSampler#initialize"],"description":"<p>Create a TimeSampler for the given QPS.</p>","source":"google-cloud-trace/lib/google/cloud/trace/time_sampler.rb#L52","resources":[],"examples":[],"params":[{"name":"qps","types":["Number"],"description":"Samples per second. Default is 0.1.","optional":true,"default":"0.1","nullable":false},{"name":"path_blacklist","types":["Array{String,Regex}"],"description":"An array of paths or\npath patterns indicating URIs that should never be traced.\nDefault is DEFAULT_PATH_BLACKLIST.","optional":true,"default":"DEFAULT_PATH_BLACKLIST","nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/trace/timesampler\">TimeSampler</a>"],"description":"a new instance of TimeSampler"}]},{"id":"default-class","type":"class","name":"default","title":["Google","Cloud","Trace","TimeSampler.default"],"description":"<p>Get the default global TimeSampler.</p>","source":"google-cloud-trace/lib/google/cloud/trace/time_sampler.rb#L65","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/trace/timesampler\">TimeSampler</a>"],"description":""}]},{"id":"call-instance","type":"instance","name":"call","title":["Google","Cloud","Trace","TimeSampler#call"],"description":"<p>Implements the sampler contract. Checks to see whether a sample\nshould be taken at this time.</p>","source":"google-cloud-trace/lib/google/cloud/trace/time_sampler.rb#L76","resources":[],"examples":[],"params":[{"name":"env","types":["Hash"],"description":"Rack environment.","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["Boolean"],"description":"Whether to sample at this time."}]}]}