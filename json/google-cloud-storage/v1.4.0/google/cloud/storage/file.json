{"id":"google/cloud/storage/file","name":"File","title":["Google","Cloud","Storage","File"],"description":"<h1 id=\"file\">File</h1>\n\n<p>Represents a File\n(<a href=\"https://cloud.google.com/storage/docs/json_api/v1/objects\">Object</a>)\nthat belongs to a <a data-custom-type=\"google/cloud/storage/bucket\">Bucket</a>. Files (Objects) are the individual pieces of\ndata that you store in Google Cloud Storage. A file can be up to 5 TB in\nsize. Files have two components: data and metadata. The data component\nis the data from an external file or other data source that you want to\nstore in Google Cloud Storage. The metadata component is a collection of\nname-value pairs that describe various qualities of the data.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L52","resources":[{"title":"Concepts\nand Techniques","link":"https://cloud.google.com/storage/docs/concepts-techniques"}],"examples":[{"caption":"","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\nfile.download \"path/to/downloaded/file.ext\""}],"methods":[{"id":"user_project-instance","type":"instance","name":"user_project","title":["Google","Cloud","Storage","File#user_project"],"description":"<p>A boolean value or a project ID string for a requester pays\nbucket and its files. If this attribute is set to <code>true</code>, transit\ncosts for operations on the file will be billed to the current\nproject for this client. (See <a data-custom-type=\"google/cloud/storage/project\" data-method=\"project-instance\">Project#project</a> for the ID of the\ncurrent project.) If this attribute is set to a project ID, and that\nproject is authorized for the currently authenticated service account,\ntransit costs will be billed to the that project. The default is\n<code>nil</code>.</p>\n\n<p>In general, this attribute should be set when first retrieving the\nowning bucket by providing the <code>user_project</code> option to\n<a data-custom-type=\"google/cloud/storage/project\" data-method=\"bucket-instance\">Project#bucket</a>.</p>\n\n<p>The requester pays feature is currently available only to whitelisted\nprojects.</p>\n\n<p>See also <a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"requester_pays=-instance\">Bucket#requester_pays=</a> and <a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"requester_pays-instance\">Bucket#requester_pays</a> to\nenable requester pays for a bucket.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L87","resources":[],"examples":[{"caption":"<p>Setting a non-default project:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"other-project-bucket\", user_project: true\nfile = bucket.file \"path/to/file.ext\" # Billed to current project\nfile.user_project = \"my-other-project\"\nfile.download \"file.ext\" # Billed to \"my-other-project\""}],"params":[],"exceptions":[],"returns":[]},{"id":"user_project=-instance","type":"instance","name":"user_project=","title":["Google","Cloud","Storage","File#user_project="],"description":"<p>A boolean value or a project ID string for a requester pays\nbucket and its files. If this attribute is set to <code>true</code>, transit\ncosts for operations on the file will be billed to the current\nproject for this client. (See <a data-custom-type=\"google/cloud/storage/project\" data-method=\"project-instance\">Project#project</a> for the ID of the\ncurrent project.) If this attribute is set to a project ID, and that\nproject is authorized for the currently authenticated service account,\ntransit costs will be billed to the that project. The default is\n<code>nil</code>.</p>\n\n<p>In general, this attribute should be set when first retrieving the\nowning bucket by providing the <code>user_project</code> option to\n<a data-custom-type=\"google/cloud/storage/project\" data-method=\"bucket-instance\">Project#bucket</a>.</p>\n\n<p>The requester pays feature is currently available only to whitelisted\nprojects.</p>\n\n<p>See also <a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"requester_pays=-instance\">Bucket#requester_pays=</a> and <a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"requester_pays-instance\">Bucket#requester_pays</a> to\nenable requester pays for a bucket.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L87","resources":[],"examples":[{"caption":"<p>Setting a non-default project:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"other-project-bucket\", user_project: true\nfile = bucket.file \"path/to/file.ext\" # Billed to current project\nfile.user_project = \"my-other-project\"\nfile.download \"file.ext\" # Billed to \"my-other-project\""}],"params":[],"exceptions":[],"returns":[]},{"id":"kind-instance","type":"instance","name":"kind","title":["Google","Cloud","Storage","File#kind"],"description":"<p>The kind of item this is.\nFor files, this is always storage#object.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L104","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"id-instance","type":"instance","name":"id","title":["Google","Cloud","Storage","File#id"],"description":"<p>The ID of the file.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L110","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"name-instance","type":"instance","name":"name","title":["Google","Cloud","Storage","File#name"],"description":"<p>The name of this file.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L116","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"bucket-instance","type":"instance","name":"bucket","title":["Google","Cloud","Storage","File#bucket"],"description":"<p>The name of the <a data-custom-type=\"google/cloud/storage/bucket\">Bucket</a> containing this file.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L122","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"generation-instance","type":"instance","name":"generation","title":["Google","Cloud","Storage","File#generation"],"description":"<p>The content generation of this file.\nUsed for object versioning.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L129","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"metageneration-instance","type":"instance","name":"metageneration","title":["Google","Cloud","Storage","File#metageneration"],"description":"<p>The version of the metadata for this file at this generation.\nUsed for preconditions and for detecting changes in metadata.\nA metageneration number is only meaningful in the context of a\nparticular generation of a particular file.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L138","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"api_url-instance","type":"instance","name":"api_url","title":["Google","Cloud","Storage","File#api_url"],"description":"<p>A URL that can be used to access the file using the REST API.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L144","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"media_url-instance","type":"instance","name":"media_url","title":["Google","Cloud","Storage","File#media_url"],"description":"<p>A URL that can be used to download the file using the REST API.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L150","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"size-instance","type":"instance","name":"size","title":["Google","Cloud","Storage","File#size"],"description":"<p>Content-Length of the data in bytes.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L156","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"created_at-instance","type":"instance","name":"created_at","title":["Google","Cloud","Storage","File#created_at"],"description":"<p>Creation time of the file.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L162","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"updated_at-instance","type":"instance","name":"updated_at","title":["Google","Cloud","Storage","File#updated_at"],"description":"<p>The creation or modification time of the file.\nFor buckets with versioning enabled, changing an object’s\nmetadata does not change this property.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L170","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"md5-instance","type":"instance","name":"md5","title":["Google","Cloud","Storage","File#md5"],"description":"<p>MD5 hash of the data; encoded using base64.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L176","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"crc32c-instance","type":"instance","name":"crc32c","title":["Google","Cloud","Storage","File#crc32c"],"description":"<p>The CRC32c checksum of the data, as described in\n<a href=\"http://tools.ietf.org/html/rfc4960#appendix-B\">RFC 4960, Appendix B</a>.\nEncoded using base64 in big-endian byte order.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L184","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"etag-instance","type":"instance","name":"etag","title":["Google","Cloud","Storage","File#etag"],"description":"<p>HTTP 1.1 Entity tag for the file.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L190","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"cache_control-instance","type":"instance","name":"cache_control","title":["Google","Cloud","Storage","File#cache_control"],"description":"<p>The <a href=\"https://tools.ietf.org/html/rfc7234#section-5.2\">Cache-Control</a>\ndirective for the file data.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L197","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"cache_control=-instance","type":"instance","name":"cache_control=","title":["Google","Cloud","Storage","File#cache_control="],"description":"<p>Updates the\n<a href=\"https://tools.ietf.org/html/rfc7234#section-5.2\">Cache-Control</a>\ndirective for the file data.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L205","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"content_disposition-instance","type":"instance","name":"content_disposition","title":["Google","Cloud","Storage","File#content_disposition"],"description":"<p>The <a href=\"https://tools.ietf.org/html/rfc6266\">Content-Disposition</a> of the\nfile data.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L213","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"content_disposition=-instance","type":"instance","name":"content_disposition=","title":["Google","Cloud","Storage","File#content_disposition="],"description":"<p>Updates the <a href=\"https://tools.ietf.org/html/rfc6266\">Content-Disposition</a>\nof the file data.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L220","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"content_encoding-instance","type":"instance","name":"content_encoding","title":["Google","Cloud","Storage","File#content_encoding"],"description":"<p>The <a href=\"https://tools.ietf.org/html/rfc7231#section-3.1.2.2\">Content-Encoding\n</a> of the file\ndata.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L229","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"content_encoding=-instance","type":"instance","name":"content_encoding=","title":["Google","Cloud","Storage","File#content_encoding="],"description":"<p>Updates the <a href=\"https://tools.ietf.org/html/rfc7231#section-3.1.2.2\">Content-Encoding\n</a> of the file\ndata.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L237","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"content_language-instance","type":"instance","name":"content_language","title":["Google","Cloud","Storage","File#content_language"],"description":"<p>The <a href=\"http://tools.ietf.org/html/bcp47\">Content-Language</a> of the file\ndata.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L245","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"content_language=-instance","type":"instance","name":"content_language=","title":["Google","Cloud","Storage","File#content_language="],"description":"<p>Updates the <a href=\"http://tools.ietf.org/html/bcp47\">Content-Language</a> of\nthe file data.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L252","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"content_type-instance","type":"instance","name":"content_type","title":["Google","Cloud","Storage","File#content_type"],"description":"<p>The <a href=\"https://tools.ietf.org/html/rfc2616#section-14.17\">Content-Type</a>\nof the file data.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L260","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"content_type=-instance","type":"instance","name":"content_type=","title":["Google","Cloud","Storage","File#content_type="],"description":"<p>Updates the\n<a href=\"https://tools.ietf.org/html/rfc2616#section-14.17\">Content-Type</a> of\nthe file data.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L268","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"metadata-instance","type":"instance","name":"metadata","title":["Google","Cloud","Storage","File#metadata"],"description":"<p>A hash of custom, user-provided web-safe keys and arbitrary string\nvalues that will returned with requests for the file as “x-goog-meta-“\nresponse headers.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L277","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"metadata=-instance","type":"instance","name":"metadata=","title":["Google","Cloud","Storage","File#metadata="],"description":"<p>Updates the hash of custom, user-provided web-safe keys and arbitrary\nstring values that will returned with requests for the file as\n“x-goog-meta-“ response headers.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L287","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"encryption_key_sha256-instance","type":"instance","name":"encryption_key_sha256","title":["Google","Cloud","Storage","File#encryption_key_sha256"],"description":"<p>An <a href=\"https://tools.ietf.org/html/rfc4648#section-4\">RFC 4648</a>\nBase64-encoded string of the SHA256 hash of the <a href=\"https://cloud.google.com/storage/docs/encryption#customer-supplied\">customer-supplied\nencryption\nkey</a>.\nYou can use this SHA256 hash to uniquely identify the AES-256\nencryption key required to decrypt this file.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L299","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"storage_class-instance","type":"instance","name":"storage_class","title":["Google","Cloud","Storage","File#storage_class"],"description":"<p>The file’s storage class. This defines how the file is stored and\ndetermines the SLA and the cost of storage. For more information, see\n<a href=\"https://cloud.google.com/storage/docs/storage-classes\">Storage\nClasses</a> and\n<a href=\"https://cloud.google.com/storage/docs/per-object-storage-class\">Per-Object Storage\nClass</a>.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L311","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"storage_class=-instance","type":"instance","name":"storage_class=","title":["Google","Cloud","Storage","File#storage_class="],"description":"<p>Updates how the file is stored and determines the SLA and the cost of\nstorage. Accepted values include <code>:multi_regional</code>, <code>:regional</code>,\n<code>:nearline</code>, and <code>:coldline</code>, as well as the equivalent strings\nreturned by <a data-custom-type=\"google/cloud/storage/file\" data-method=\"storage_class-instance\">File#storage_class</a> or <a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"storage_class-instance\">Bucket#storage_class</a>. For more\ninformation, see <a href=\"https://cloud.google.com/storage/docs/storage-classes\">Storage\nClasses</a> and\n<a href=\"https://cloud.google.com/storage/docs/per-object-storage-class\">Per-Object Storage\nClass</a>.\nThe  default value is the default storage class for the bucket. See\n<a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"storage_class-instance\">Bucket#storage_class</a>.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L327","resources":[],"examples":[],"params":[{"name":"storage_class","types":["Symbol","String"],"description":"Storage class of the file.","optional":false,"nullable":false}],"exceptions":[],"returns":[]},{"id":"generations-instance","type":"instance","name":"generations","title":["Google","Cloud","Storage","File#generations"],"description":"<p>Retrieves a list of versioned files for the current object.</p>\n\n<p>Useful for listing archived versions of the file, restoring the live\nversion of the file to an older version, or deleting an archived\nversion. You can turn versioning on or off for a bucket at any time\nwith <a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"versioning=-instance\">Bucket#versioning=</a>. Turning versioning off leaves existing file\nversions in place and causes the bucket to stop accumulating new\narchived object versions. (See Bucket#versioning and\n<a data-custom-type=\"google/cloud/storage/file\" data-method=\"generation-instance\">File#generation</a>)</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L362","resources":[{"title":"Object\nVersioning","link":"https://cloud.google.com/storage/docs/object-versioning"}],"examples":[{"caption":"","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\nfile.generation #=> 1234567890\nfile.generations.each do |versioned_file|\n  versioned_file.generation\nend"}],"params":[],"exceptions":[],"returns":[{"types":["Array&lt;<a data-custom-type=\"google/cloud/storage/file\">Google::Cloud::Storage::File</a>&gt;"],"description":"(See\n<a data-custom-type=\"google/cloud/storage/file/list\">Google::Cloud::Storage::File::List</a>)"}]},{"id":"update-instance","type":"instance","name":"update","title":["Google","Cloud","Storage","File#update"],"description":"<p>Updates the file with changes made in the given block in a single\nPATCH request. The following attributes may be set: <a data-custom-type=\"google/cloud/storage/file\" data-method=\"cache_control=-instance\">#cache_control=</a>,\n<a data-custom-type=\"google/cloud/storage/file\" data-method=\"content_disposition=-instance\">#content_disposition=</a>, <a data-custom-type=\"google/cloud/storage/file\" data-method=\"content_encoding=-instance\">#content_encoding=</a>, <a data-custom-type=\"google/cloud/storage/file\" data-method=\"content_language=-instance\">#content_language=</a>,\n<a data-custom-type=\"google/cloud/storage/file\" data-method=\"content_type=-instance\">#content_type=</a>, and <a data-custom-type=\"google/cloud/storage/file\" data-method=\"metadata=-instance\">#metadata=</a>. The <a data-custom-type=\"google/cloud/storage/file\" data-method=\"metadata-instance\">#metadata</a> hash accessible in\nthe block is completely mutable and will be included in the request.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L399","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\n\nfile.update do |f|\n  f.cache_control = \"private, max-age=0, no-cache\"\n  f.content_disposition = \"inline; filename=filename.ext\"\n  f.content_encoding = \"deflate\"\n  f.content_language = \"de\"\n  f.content_type = \"application/json\"\n  f.metadata[\"player\"] = \"Bob\"\n  f.metadata[\"score\"] = \"10\"\nend"}],"params":[{"name":"yield","types":["block"],"description":"a block yielding a delegate object for updating the file","optional":true,"nullable":false}],"exceptions":[],"returns":[]},{"id":"download-instance","type":"instance","name":"download","title":["Google","Cloud","Storage","File#download"],"description":"<p>Download the file’s contents to a local file or an IO instance.</p>\n\n<p>By default, the download is verified by calculating the MD5 digest.</p>\n\n<p>If a <a href=\"https://cloud.google.com/storage/docs/encryption#customer-supplied\">customer-supplied encryption\nkey</a>\nwas used with <a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"create_file-instance\">Bucket#create_file</a>, the <code>encryption_key</code> option must\nbe provided.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L493","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\nfile.download \"path/to/downloaded/file.ext\""},{"caption":"<p>Use the CRC32c digest by passing :crc32c.</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\nfile.download \"path/to/downloaded/file.ext\", verify: :crc32c"},{"caption":"<p>Use the MD5 and CRC32c digests by passing :all.</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\nfile.download \"path/to/downloaded/file.ext\", verify: :all"},{"caption":"<p>Disable the download verification by passing :none.</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\nfile.download \"path/to/downloaded/file.ext\", verify: :none"},{"caption":"<p>Download to an in-memory StringIO object.</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\ndownloaded = file.download\ndownloaded.rewind\ndownloaded.read #=> \"Hello world!\""}],"params":[{"name":"path","types":["String","IO"],"description":"The path on the local file system to write\nthe data to. The path provided must be writable. Can also be an IO\nobject, or IO-ish object like StringIO. If an IO object, the object\nwill be written to, not the filesystem. If omitted, a new StringIO\ninstance will be written to and returned. Optional.","optional":true,"default":"nil","nullable":true},{"name":"verify","types":["Symbol"],"description":"The verification algorithm used to ensure the\ndownloaded file contents are correct. Default is <code>:md5</code>.</p>\n\n<p>Acceptable values are:</p>\n\n<ul>\n  <li><code>md5</code> - Verify file content match using the MD5 hash.</li>\n  <li><code>crc32c</code> - Verify file content match using the CRC32c hash.</li>\n  <li><code>all</code> - Perform all available file content verification.</li>\n  <li><code>none</code> - Don’t perform file content verification.</li>\n</ul>","optional":true,"default":":md5","nullable":false},{"name":"encryption_key","types":["String"],"description":"Optional. The customer-supplied,\nAES-256 encryption key used to encrypt the file, if one was provided\nto <a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"create_file-instance\">Bucket#create_file</a>.","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[{"types":["IO"],"description":"Returns an IO object representing the file data. This\nwill ordinarily be a <code>::File</code> object referencing the local file\nsystem. However, if the argument to <code>path</code> is <code>nil</code>, a StringIO\ninstance will be returned. If the argument to <code>path</code> is an IO\nobject, then that object will be returned."}]},{"id":"copy-instance","type":"instance","name":"copy","title":["Google","Cloud","Storage","File#copy"],"description":"<p>Copy the file to a new location.</p>\n\n<p>If a <a href=\"https://cloud.google.com/storage/docs/encryption#customer-supplied\">customer-supplied encryption\nkey</a>\nwas used with <a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"create_file-instance\">Bucket#create_file</a>, the <code>encryption_key</code> option must\nbe provided.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L591","resources":[],"examples":[{"caption":"<p>The file can be copied to a new path in the current bucket:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\nfile.copy \"path/to/destination/file.ext\""},{"caption":"<p>The file can also be copied to a different bucket:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\nfile.copy \"new-destination-bucket\",\n          \"path/to/destination/file.ext\""},{"caption":"<p>The file can also be copied by specifying a generation:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\nfile.copy \"copy/of/previous/generation/file.ext\",\n          generation: 123456"},{"caption":"<p>The file can be modified during copying:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\nfile.copy \"new-destination-bucket\",\n          \"path/to/destination/file.ext\" do |f|\n  f.metadata[\"copied_from\"] = \"#{file.bucket}/#{file.name}\"\nend"}],"params":[{"name":"dest_bucket_or_path","types":["String"],"description":"Either the bucket to copy the file\nto, or the path to copy the file to in the current bucket.","optional":false,"nullable":false},{"name":"dest_path","types":["String"],"description":"If a bucket was provided in the first\nparameter, this contains the path to copy the file to in the given\nbucket.","optional":true,"default":"nil","nullable":true},{"name":"acl","types":["String"],"description":"A predefined set of access controls to apply to\nnew file.</p>\n\n<p>Acceptable values are:</p>\n\n<ul>\n  <li><code>auth</code>, <code>auth_read</code>, <code>authenticated</code>, <code>authenticated_read</code>,\n<code>authenticatedRead</code> - File owner gets OWNER access, and\nallAuthenticatedUsers get READER access.</li>\n  <li><code>owner_full</code>, <code>bucketOwnerFullControl</code> - File owner gets OWNER\naccess, and project team owners get OWNER access.</li>\n  <li><code>owner_read</code>, <code>bucketOwnerRead</code> - File owner gets OWNER access,\nand project team owners get READER access.</li>\n  <li><code>private</code> - File owner gets OWNER access.</li>\n  <li><code>project_private</code>, <code>projectPrivate</code> - File owner gets OWNER\naccess, and project team members get access according to their\nroles.</li>\n  <li><code>public</code>, <code>public_read</code>, <code>publicRead</code> - File owner gets OWNER\naccess, and allUsers get READER access.</li>\n</ul>","optional":true,"default":"nil","nullable":true},{"name":"generation","types":["Integer"],"description":"Select a specific revision of the file to\ncopy. The default is the latest version.","optional":true,"default":"nil","nullable":true},{"name":"encryption_key","types":["String"],"description":"Optional. The customer-supplied,\nAES-256 encryption key used to encrypt the file, if one was provided\nto <a data-custom-type=\"google/cloud/storage/bucket\" data-method=\"create_file-instance\">Bucket#create_file</a>.","optional":true,"default":"nil","nullable":true},{"name":"yield","types":["block"],"description":"a block yielding a delegate object for updating","optional":true,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/storage/file\">Google::Cloud::Storage::File</a>"],"description":""}]},{"id":"rotate-instance","type":"instance","name":"rotate","title":["Google","Cloud","Storage","File#rotate"],"description":"<p><a href=\"https://cloud.google.com/storage/docs/json_api/v1/objects/rewrite\">Rewrites</a>\nthe file to the same <a data-custom-type=\"google/cloud/storage/file\" data-method=\"bucket-instance\">#bucket</a> and <a data-custom-type=\"google/cloud/storage/file\" data-method=\"name-instance\">#name</a> with a new\n<a href=\"https://cloud.google.com/storage/docs/encryption#customer-supplied\">customer-supplied encryption\nkey</a>.</p>\n\n<p>If a new key is provided to this method, the new key must be used to\nsubsequently download or copy the file. You must securely manage your\nkeys and ensure that they are not lost. Also, please note that file\nmetadata is not encrypted, with the exception of the CRC32C checksum\nand MD5 hash. The names of files and buckets are also not encrypted,\nand you can read or update the metadata of an encrypted file without\nproviding the encryption key.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L663","resources":[{"title":"","link":"https://cloud.google.com/storage/docs/encryption"}],"examples":[{"caption":"<p>The file will be rewritten with a new encryption key:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\nbucket = storage.bucket \"my-bucket\"\n\n# Old key was stored securely for later use.\nold_key = \"y\\x03\\\"\\x0E\\xB6\\xD3\\x9B\\x0E\\xAB*\\x19\\xFAv\\xDEY\\xBEI...\"\n\nfile = bucket.file \"path/to/my-file.ext\", encryption_key: old_key\n\n# Key generation shown for example purposes only. Write your own.\ncipher = OpenSSL::Cipher.new \"aes-256-cfb\"\ncipher.encrypt\nnew_key = cipher.random_key\n\nfile.rotate encryption_key: old_key, new_encryption_key: new_key"}],"params":[{"name":"encryption_key","types":["String","nil"],"description":"Optional. The last\ncustomer-supplied, AES-256 encryption key used to encrypt the file,\nif one was used.","optional":true,"default":"nil","nullable":true},{"name":"new_encryption_key","types":["String","nil"],"description":"Optional. The new\ncustomer-supplied, AES-256 encryption key with which to encrypt the\nfile. If <code>nil</code>, the rewritten file will be encrypted using the\ndefault server-side encryption, not customer-supplied encryption\nkeys.","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/storage/file\">Google::Cloud::Storage::File</a>"],"description":""}]},{"id":"delete-instance","type":"instance","name":"delete","title":["Google","Cloud","Storage","File#delete"],"description":"<p>Permanently deletes the file.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L717","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\nfile.delete"},{"caption":"<p>The file’s generation can used by passing <code>true</code>:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\nfile.delete generation: true"},{"caption":"<p>A generation can also be specified:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\nfile.delete generation: 123456"}],"params":[{"name":"generation","types":["Boolean","Integer"],"description":"Specify a version of the file to\ndelete. When <code>true</code>, it will delete the version returned by\n<a data-custom-type=\"google/cloud/storage/file\" data-method=\"generation-instance\">#generation</a>. The default behavior is to delete the latest version\nof the file (regardless of the version to which the file is set,\nwhich is the version returned by <a data-custom-type=\"google/cloud/storage/file\" data-method=\"generation-instance\">#generation</a>.)","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[{"types":["Boolean"],"description":"Returns <code>true</code> if the file was deleted."}]},{"id":"public_url-instance","type":"instance","name":"public_url","title":["Google","Cloud","Storage","File#public_url"],"description":"<p>Public URL to access the file. If the file is not public, requests to\nthe URL will return an error. (See <a data-custom-type=\"google/cloud/storage/file/acl\" data-method=\"public!-instance\">File::Acl#public!</a> and\n<a data-custom-type=\"google/cloud/storage/bucket/defaultacl\" data-method=\"public!-instance\">Bucket::DefaultAcl#public!</a>) To share a file that is not public see\n<a data-custom-type=\"google/cloud/storage/file\" data-method=\"signed_url-instance\">#signed_url</a>.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L755","resources":[{"title":"Accessing Public Data","link":"https://cloud.google.com/storage/docs/access-public-data"}],"examples":[{"caption":"","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-todo-app\"\nfile = bucket.file \"avatars/heidi/400x400.png\"\npublic_url = file.public_url"},{"caption":"<p>Generate the URL with a protocol other than HTTPS:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-todo-app\"\nfile = bucket.file \"avatars/heidi/400x400.png\"\npublic_url = file.public_url protocol: \"http\""}],"params":[{"name":"protocol","types":["String"],"description":"The protocol to use for the URL. Default is\n<code>HTTPS</code>.","optional":true,"default":":https","nullable":false}],"exceptions":[],"returns":[]},{"id":"signed_url-instance","type":"instance","name":"signed_url","title":["Google","Cloud","Storage","File#signed_url"],"description":"<p>Access without authentication can be granted to a File for a specified\nperiod of time. This URL uses a cryptographic signature of your\ncredentials to access the file.</p>\n\n<p>Generating a URL requires service account credentials, either by\nconnecting with a service account when calling\nGoogle::Cloud.storage, or by passing in the service account <code>issuer</code>\nand <code>signing_key</code> values. Although the private key can be passed as a\nstring for convenience, creating and storing an instance of\n<code>OpenSSL::PKey::RSA</code> is more efficient when making multiple calls to\n<code>signed_url</code>.</p>\n\n<p>A <a data-custom-type=\"google/cloud/storage/signedurlunavailable\">SignedUrlUnavailable</a> is raised if the service account credentials\nare missing. Service account credentials are acquired by following the\nsteps in <a href=\"https://cloud.google.com/storage/docs/authentication#service_accounts\">Service Account Authentication</a>.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L853","resources":[{"title":"Access Control Signed URLs guide","link":"https://cloud.google.com/storage/docs/access-control#Signed-URLs"}],"examples":[{"caption":"","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-todo-app\"\nfile = bucket.file \"avatars/heidi/400x400.png\"\nshared_url = file.signed_url"},{"caption":"<p>Any of the option parameters may be specified:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-todo-app\"\nfile = bucket.file \"avatars/heidi/400x400.png\"\nshared_url = file.signed_url method: \"PUT\",\n                             content_type: \"image/png\",\n                             expires: 300 # 5 minutes from now"},{"caption":"<p>Using the <code>issuer</code> and <code>signing_key</code> options:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud.storage\n\nbucket = storage.bucket \"my-todo-app\"\nfile = bucket.file \"avatars/heidi/400x400.png\"\nkey = OpenSSL::PKey::RSA.new \"-----BEGIN PRIVATE KEY-----\\n...\"\nshared_url = file.signed_url issuer: \"service-account@gcloud.com\",\n                             signing_key: key"},{"caption":"<p>Using the <code>headers</code> option:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-todo-app\"\nfile = bucket.file \"avatars/heidi/400x400.png\"\nshared_url = file.signed_url method: \"GET\",\n                             headers: {\n                               \"x-goog-acl\" => \"public-read\",\n                               \"x-goog-meta-foo\" => \"bar,baz\"\n                             }"}],"params":[{"name":"method","types":["String"],"description":"The HTTP verb to be used with the signed URL.\nSigned URLs can be used\nwith <code>GET</code>, <code>HEAD</code>, <code>PUT</code>, and <code>DELETE</code> requests. Default is <code>GET</code>.","optional":true,"default":"nil","nullable":true},{"name":"expires","types":["Integer"],"description":"The number of seconds until the URL expires.\nDefault is 300/5 minutes.","optional":true,"default":"nil","nullable":true},{"name":"content_type","types":["String"],"description":"When provided, the client (browser) must\nsend this value in the HTTP header. e.g. <code>text/plain</code>","optional":true,"default":"nil","nullable":true},{"name":"content_md5","types":["String"],"description":"The MD5 digest value in base64. If you\nprovide this in the string, the client (usually a browser) must\nprovide this HTTP header with this same value in its request.","optional":true,"default":"nil","nullable":true},{"name":"headers","types":["Hash"],"description":"Google extension headers (custom HTTP headers\nthat begin with <code>x-goog-</code>) that must be included in requests that\nuse the signed URL.","optional":true,"default":"nil","nullable":true},{"name":"issuer","types":["String"],"description":"Service Account’s Client Email.","optional":true,"default":"nil","nullable":true},{"name":"client_email","types":["String"],"description":"Service Account’s Client Email.","optional":true,"default":"nil","nullable":true},{"name":"signing_key","types":["OpenSSL::PKey::RSA","String"],"description":"Service Account’s\nPrivate Key.","optional":true,"default":"nil","nullable":true},{"name":"private_key","types":["OpenSSL::PKey::RSA","String"],"description":"Service Account’s\nPrivate Key.","optional":true,"default":"nil","nullable":true},{"name":"query","types":["Hash"],"description":"Query string parameters to include in the signed\nURL. The given parameters are not verified by the signature.</p>\n\n<p>Parameters such as <code>response-content-disposition</code> and\n<code>response-content-type</code> can alter the behavior of the response when\nusing the URL, but only when the file resource is missing the\ncorresponding values. (These values can be permanently set using\n<a data-custom-type=\"google/cloud/storage/file\" data-method=\"content_disposition=-instance\">#content_disposition=</a> and <a data-custom-type=\"google/cloud/storage/file\" data-method=\"content_type=-instance\">#content_type=</a>.)","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[]},{"id":"acl-instance","type":"instance","name":"acl","title":["Google","Cloud","Storage","File#acl"],"description":"<p>The <a data-custom-type=\"google/cloud/storage/file/acl\">File::Acl</a> instance used to control access to the file.</p>\n\n<p>A file has owners, writers, and readers. Permissions can be granted to\nan individual user’s email address, a group’s email address,  as well\nas many predefined lists.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L909","resources":[{"title":"Access\nControl guide","link":"https://cloud.google.com/storage/docs/access-control"}],"examples":[{"caption":"<p>Grant access to a user by prepending <code>\"user-\"</code> to an email:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-todo-app\"\nfile = bucket.file \"avatars/heidi/400x400.png\"\n\nemail = \"heidi@example.net\"\nfile.acl.add_reader \"user-#{email}\""},{"caption":"<p>Grant access to a group by prepending <code>\"group-\"</code> to an email:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-todo-app\"\nfile = bucket.file \"avatars/heidi/400x400.png\"\n\nemail = \"authors@example.net\"\nfile.acl.add_reader \"group-#{email}\""},{"caption":"<p>Or, grant access via a predefined permissions list:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-todo-app\"\nfile = bucket.file \"avatars/heidi/400x400.png\"\n\nfile.acl.public!"}],"params":[],"exceptions":[],"returns":[]},{"id":"reload!-instance","type":"instance","name":"reload!","title":["Google","Cloud","Storage","File#reload!"],"description":"<p>Reloads the file with current data from the Storage service.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L952","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\"\nfile.reload!"},{"caption":"<p>The file’s generation can used by passing <code>true</code>:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\", generation: 123456\nfile.reload! generation: true"},{"caption":"<p>A generation can also be specified:</p>","code":"require \"google/cloud/storage\"\n\nstorage = Google::Cloud::Storage.new\n\nbucket = storage.bucket \"my-bucket\"\n\nfile = bucket.file \"path/to/my-file.ext\", generation: 123456\nfile.reload! generation: 123457"}],"params":[{"name":"generation","types":["Boolean","Integer"],"description":"Specify a version of the file to\nreload with. When <code>true</code>, it will reload the version returned by\n<a data-custom-type=\"google/cloud/storage/file\" data-method=\"generation-instance\">#generation</a>. The default behavior is to reload with the latest\nversion of the file (regardless of the version to which the file is\nset, which is the version returned by <a data-custom-type=\"google/cloud/storage/file\" data-method=\"generation-instance\">#generation</a>.)","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[]},{"id":"exists?-instance","type":"instance","name":"exists?","title":["Google","Cloud","Storage","File#exists?"],"description":"<p>Determines whether the file exists in the Storage service.</p>","source":"google-cloud-storage/lib/google/cloud/storage/file.rb#L965","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":""}]}]}