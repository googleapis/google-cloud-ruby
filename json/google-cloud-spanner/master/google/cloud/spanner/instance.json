{"id":"google/cloud/spanner/instance","name":"Instance","title":["Google","Cloud","Spanner","Instance"],"description":"<h1 id=\"instance\">Instance</h1>\n\n<p>Represents a Cloud Spanner instance. Instances are dedicated Cloud\nSpanner serving and storage resources to be used by Cloud Spanner\ndatabases. Instances offer isolation: problems with databases in one\ninstance will not affect other instances. However, within an instance\ndatabases can affect each other. For example, if one database in an\ninstance receives a lot of requests and consumes most of the instance\nresources, fewer resources are available for other databases in that\ninstance, and their performance may suffer.</p>\n\n<p>See Google::Cloud::Spanner::Project#instances,\nGoogle::Cloud::Spanner::Project#instance, and\nGoogle::Cloud::Spanner::Project#create_instance.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/instance.rb#L62","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/spanner\"\n\nspanner = Google::Cloud::Spanner.new\n\njob = spanner.create_instance \"my-new-instance\",\n                              name: \"My New Instance\",\n                              config: \"regional-us-central1\",\n                              nodes: 5,\n                              labels: { production: :env }\n\njob.done? #=> false\njob.reload! # API call\njob.done? #=> true\n\nif job.error?\n  status = job.error\nelse\n  instance = job.instance\nend"}],"methods":[{"id":"project_id-instance","type":"instance","name":"project_id","title":["Google","Cloud","Spanner","Instance#project_id"],"description":"<p>The unique identifier for the project.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/instance.rb#L75","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["String"],"description":""}]},{"id":"instance_id-instance","type":"instance","name":"instance_id","title":["Google","Cloud","Spanner","Instance#instance_id"],"description":"<p>The unique identifier for the instance.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/instance.rb#L81","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["String"],"description":""}]},{"id":"path-instance","type":"instance","name":"path","title":["Google","Cloud","Spanner","Instance#path"],"description":"<p>The full path for the instance resource. Values are of the form\n<code>projects/&lt;project_id&gt;/instances/&lt;instance_id&gt;</code>.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/instance.rb#L89","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["String"],"description":""}]},{"id":"name-instance","type":"instance","name":"name","title":["Google","Cloud","Spanner","Instance#name"],"description":"<p>The descriptive name for this instance as it appears in UIs. Must be\nunique per project and between 4 and 30 characters in length.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/instance.rb#L97","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["String"],"description":""}]},{"id":"config-instance","type":"instance","name":"config","title":["Google","Cloud","Spanner","Instance#config"],"description":"<p>The instance configuration resource.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/instance.rb#L105","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/spanner/instance/config\">Instance::Config</a>"],"description":""}]},{"id":"name=-instance","type":"instance","name":"name=","title":["Google","Cloud","Spanner","Instance#name="],"description":"<p>Updates the descriptive name for this instance as it appears in UIs.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/instance.rb#L116","resources":[],"examples":[],"params":[{"name":"display_name","types":["String"],"description":"The descriptive name for this instance.","optional":false,"nullable":false}],"exceptions":[],"returns":[]},{"id":"nodes-instance","type":"instance","name":"nodes","title":["Google","Cloud","Spanner","Instance#nodes"],"description":"<p>The number of nodes allocated to this instance.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/instance.rb#L124","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Integer"],"description":""}]},{"id":"nodes=-instance","type":"instance","name":"nodes=","title":["Google","Cloud","Spanner","Instance#nodes="],"description":"<p>Updates the number of nodes allocated to this instance.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/instance.rb#L132","resources":[],"examples":[],"params":[{"name":"nodes","types":["Integer"],"description":"The number of nodes allocated to this instance.","optional":false,"nullable":false}],"exceptions":[],"returns":[]},{"id":"state-instance","type":"instance","name":"state","title":["Google","Cloud","Spanner","Instance#state"],"description":"<p>The current instance state. Possible values are <code>:CREATING</code> and\n<code>:READY</code>.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/instance.rb#L141","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Symbol"],"description":""}]},{"id":"creating?-instance","type":"instance","name":"creating?","title":["Google","Cloud","Spanner","Instance#creating?"],"description":"<p>The instance is still being created. Resources may not be available\nyet, and operations such as database creation may not work.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/instance.rb#L149","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":""}]},{"id":"ready?-instance","type":"instance","name":"ready?","title":["Google","Cloud","Spanner","Instance#ready?"],"description":"<p>The instance is fully created and ready to do work such as creating\ndatabases.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/instance.rb#L157","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":""}]},{"id":"labels-instance","type":"instance","name":"labels","title":["Google","Cloud","Spanner","Instance#labels"],"description":"<p>Cloud Labels are a flexible and lightweight mechanism for organizing\ncloud resources into groups that reflect a customer’s organizational\nneeds and deployment strategies. Cloud Labels can be used to filter\ncollections of resources. They can be used to control how resource\nmetrics are aggregated. And they can be used as arguments to policy\nmanagement rules (e.g. route, firewall, load balancing, etc.).</p>\n\n<ul>\n  <li>Label keys must be between 1 and 63 characters long and must conform\nto the following regular expression: <code>[a-z]([-a-z0-9]*[a-z0-9])?</code>.</li>\n  <li>Label values must be between 0 and 63 characters long and must\nconform to the regular expression <code>([a-z]([-a-z0-9]*[a-z0-9])?)?</code>.</li>\n  <li>No more than 64 labels can be associated with a given resource.</li>\n</ul>","source":"google-cloud-spanner/lib/google/cloud/spanner/instance.rb#L177","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[{"types":["Hash{String=&gt;String}"],"description":"The label keys and values in a hash."}]},{"id":"labels=-instance","type":"instance","name":"labels=","title":["Google","Cloud","Spanner","Instance#labels="],"description":"<p>Updates the Cloud Labels.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/instance.rb#L184","resources":[],"examples":[],"params":[{"name":"labels","types":["Hash{String=>String}"],"description":"The Cloud Labels.","optional":false,"nullable":false}],"exceptions":[],"returns":[]},{"id":"save-instance","type":"instance","name":"save","title":["Google","Cloud","Spanner","Instance#save"],"description":"","source":"google-cloud-spanner/lib/google/cloud/spanner/instance.rb#L191","resources":[],"examples":[],"params":[],"exceptions":[],"returns":[]},{"id":"delete-instance","type":"instance","name":"delete","title":["Google","Cloud","Spanner","Instance#delete"],"description":"<p>Permanently deletes the instance.</p>\n\n<p>Immediately upon completion of the request:</p>\n\n<ul>\n  <li>Billing ceases for all of the instance’s reserved resources.</li>\n</ul>\n\n<p>Soon afterward:</p>\n\n<ul>\n  <li>The instance and all of its databases immediately and irrevocably\ndisappear from the API. All data in the databases is permanently\ndeleted.</li>\n</ul>","source":"google-cloud-spanner/lib/google/cloud/spanner/instance.rb#L220","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/spanner\"\n\nspanner = Google::Cloud::Spanner.new\n\ninstance = spanner.instance \"my-instance\"\ninstance.delete"}],"params":[],"exceptions":[],"returns":[{"types":["Boolean"],"description":"Returns <code>true</code> if the instance was deleted."}]},{"id":"databases-instance","type":"instance","name":"databases","title":["Google","Cloud","Spanner","Instance#databases"],"description":"<p>Retrieves the list of databases for the given instance.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/instance.rb#L259","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/spanner\"\n\nspanner = Google::Cloud::Spanner.new\n\ninstance = spanner.instance \"my-instance\"\ndatabases = instance.databases\ndatabases.each do |database|\n  puts database.database_id\nend"},{"caption":"<p>Retrieve all: (See Instance::Config::List::List#all)</p>","code":"require \"google/cloud/spanner\"\n\nspanner = Google::Cloud::Spanner.new\n\ninstance = spanner.instance \"my-instance\"\ndatabases = instance.databases\ndatabases.all do |database|\n  puts database.database_id\nend"}],"params":[{"name":"token","types":["String"],"description":"The <code>token</code> value returned by the last call to\n<code>databases</code>; indicates that this is a continuation of a call,\nand that the system should return the next page of data.","optional":true,"default":"nil","nullable":true},{"name":"max","types":["Integer"],"description":"Maximum number of databases to return.","optional":true,"default":"nil","nullable":true}],"exceptions":[],"returns":[{"types":["Array&lt;<a data-custom-type=\"google/cloud/spanner/database\">Google::Cloud::Spanner::Database</a>&gt;"],"description":"(See\n<a data-custom-type=\"google/cloud/spanner/database/list\">Google::Cloud::Spanner::Database::List</a>)"}]},{"id":"database-instance","type":"instance","name":"database","title":["Google","Cloud","Spanner","Instance#database"],"description":"<p>Retrieves a database belonging to the instance by identifier.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/instance.rb#L287","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/spanner\"\n\nspanner = Google::Cloud::Spanner.new\ninstance = spanner.instance \"my-instance\"\ndatabase = instance.database \"my-database\""},{"caption":"<p>Will return <code>nil</code> if instance does not exist.</p>","code":"require \"google/cloud/spanner\"\n\nspanner = Google::Cloud::Spanner.new\ninstance = spanner.instance \"my-instance\"\ndatabase = instance.database \"my-database\" # nil"}],"params":[{"name":"database_id","types":["String"],"description":"The unique identifier for the database.","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/spanner/database\">Google::Cloud::Spanner::Database</a>","nil"],"description":"Returns <code>nil</code>\nif database does not exist."}]},{"id":"create_database-instance","type":"instance","name":"create_database","title":["Google","Cloud","Spanner","Instance#create_database"],"description":"<p>Creates a database and starts preparing it to begin serving.</p>\n\n<p>See <a data-custom-type=\"google/cloud/spanner/database/job\">Database::Job</a>.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/instance.rb#L331","resources":[],"examples":[{"caption":"","code":"require \"google/cloud/spanner\"\n\nspanner = Google::Cloud::Spanner.new\n\ninstance = spanner.instance \"my-instance\"\njob = instance.create_database \"my-new-database\"\n\njob.done? #=> false\njob.reload! # API call\njob.done? #=> true\n\nif job.error?\n  status = job.error\nelse\n  database = job.database\nend"}],"params":[{"name":"database_id","types":["String"],"description":"The unique identifier for the database,\nwhich cannot be changed after the database is created. Values are of\nthe form <code>[a-z][a-z0-9_\\-]*[a-z0-9]</code> and must be between 2 and 30\ncharacters in length. Required.","optional":false,"nullable":false},{"name":"statements","types":["Array<String>"],"description":"DDL statements to run inside the\nnewly created database. Statements can create tables, indexes, etc.\nThese statements execute atomically with the creation of the\ndatabase: if there is an error in any statement, the database is not\ncreated. Optional.","optional":true,"default":"[]","nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/spanner/database/job\">Database::Job</a>"],"description":"The job representing the long-running,\nasynchronous processing of a database create operation."}]},{"id":"policy-instance","type":"instance","name":"policy","title":["Google","Cloud","Spanner","Instance#policy"],"description":"<p>Gets the <a href=\"https://cloud.google.com/iam/\">Cloud IAM</a> access control\npolicy for this instance.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/instance.rb#L371","resources":[{"title":"google.iam.v1.IAMPolicy","link":"https://cloud.google.com/spanner/reference/rpc/google.iam.v1#google.iam.v1.Policy"}],"examples":[{"caption":"","code":"require \"google/cloud/spanner\"\n\nspanner = Google::Cloud::Spanner.new\ninstance = spanner.instance \"my-instance\"\n\npolicy = instance.policy"},{"caption":"<p>Update the policy by passing a block:</p>","code":"require \"google/cloud/spanner\"\n\nspanner = Google::Cloud::Spanner.new\ninstance = spanner.instance \"my-instance\"\n\ninstance.policy do |p|\n  p.add \"roles/owner\", \"user:owner@example.com\"\nend # 2 API calls"}],"params":[{"name":"yield","types":["block"],"description":"A block for updating the policy. The latest policy\nwill be read from the Spanner service and passed to the block. After\nthe block completes, the modified policy will be written to the\nservice.","optional":true,"nullable":false},{"name":"yield.policy","types":["Policy"],"description":"the current Cloud IAM Policy for this\ninstance","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/spanner/policy\">Policy</a>"],"description":"The current Cloud IAM Policy for this instance."}]},{"id":"policy=-instance","type":"instance","name":"policy=","title":["Google","Cloud","Spanner","Instance#policy="],"description":"<p>Updates the <a href=\"https://cloud.google.com/iam/\">Cloud IAM</a> access control\npolicy for this instance. The policy should be read from <a data-custom-type=\"google/cloud/spanner/instance\" data-method=\"policy-instance\">#policy</a>.\nSee <a data-custom-type=\"google/cloud/spanner/policy\">Google::Cloud::Spanner::Policy</a> for an explanation of the policy\n<code>etag</code> property and how to modify policies.</p>\n\n<p>You can also update the policy by passing a block to <a data-custom-type=\"google/cloud/spanner/instance\" data-method=\"policy-instance\">#policy</a>, which\nwill call this method internally after the block completes.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/instance.rb#L409","resources":[{"title":"google.iam.v1.IAMPolicy","link":"https://cloud.google.com/spanner/reference/rpc/google.iam.v1#google.iam.v1.Policy"}],"examples":[{"caption":"","code":"require \"google/cloud/spanner\"\n\nspanner = Google::Cloud::Spanner.new\ninstance = spanner.instance \"my-instance\"\n\npolicy = instance.policy # API call\n\npolicy.add \"roles/owner\", \"user:owner@example.com\"\n\ninstance.policy = policy # API call"}],"params":[{"name":"new_policy","types":["Policy"],"description":"a new or modified Cloud IAM Policy for this\ninstance","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"google/cloud/spanner/policy\">Policy</a>"],"description":"The policy returned by the API update operation."}]},{"id":"test_permissions-instance","type":"instance","name":"test_permissions","title":["Google","Cloud","Spanner","Instance#test_permissions"],"description":"<p>Tests the specified permissions against the <a href=\"https://cloud.google.com/iam/\">Cloud\nIAM</a> access control policy.</p>","source":"google-cloud-spanner/lib/google/cloud/spanner/instance.rb#L448","resources":[{"title":"Managing\nPolicies","link":"https://cloud.google.com/iam/docs/managing-policies"}],"examples":[{"caption":"","code":"require \"google/cloud/spanner\"\n\nspanner = Google::Cloud::Spanner.new\ninstance = spanner.instance \"my-instance\"\nperms = instance.test_permissions \"spanner.instances.get\",\n                                  \"spanner.instances.update\"\nperms.include? \"spanner.instances.get\" #=> true\nperms.include? \"spanner.instances.update\" #=> false"}],"params":[{"name":"permissions","types":["String","Array<String>"],"description":"The set of permissions to\ncheck access for. Permissions with wildcards (such as <code>*</code> or\n<code>storage.*</code>) are not allowed.</p>\n\n<p>The permissions that can be checked on a instance are:</p>\n\n<ul>\n  <li>pubsub.instances.create</li>\n  <li>pubsub.instances.list</li>\n  <li>pubsub.instances.get</li>\n  <li>pubsub.instances.getIamPolicy</li>\n  <li>pubsub.instances.update</li>\n  <li>pubsub.instances.setIamPolicy</li>\n  <li>pubsub.instances.delete</li>\n</ul>","optional":false,"nullable":false}],"exceptions":[],"returns":[{"types":["Array&lt;Strings&gt;"],"description":"The permissions that have access."}]}]}